"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};(function(){var t,e,i=this,n=this,a=n?n.document:null,o=(n?n.document.documentElement:null,/^(["'](\\.|[^"\\\n\r])*?["']|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/),l=/^-ms-/,s=/[\-_]([\da-z])/gi,r=/([A-Z])/g,d=/\./,c=/[-|+]?[\D]/gi,u=/\D/gi,h=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),p=/&/g,f=/=/,g=/[ ]+/g,m={};m.guid=1,m.getGuid=function(){return m.guid++},m.info=t=function(){function i(t,i){return t={href:n.location.href,param:n.location.search,referrer:a.referrer,pathname:n.location.pathname,hostname:n.location.hostname,port:n.location.port},i=t.href.split(/[\?#]/),t.param=t.param.replace("?",""),t.url=i[0],t.href.search("#")>-1&&(t.hashdata=e.last(i)),i=null,t.baseUrl=e.left(t.href,"?").replace(t.pathname,""),t}function o(e,i,n){return t.errorMsg&&t.errorMsg[e]?{className:e,errorCode:i,methodName:n,msg:t.errorMsg[e][i]}:{className:e,errorCode:i,methodName:n}}var l="0.0.1",s="",r=function(){console.error(e.toArray(arguments).join(":"))},d={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,SPACE:32},c=[{label:"SUN"},{label:"MON"},{label:"TUE"},{label:"WED"},{label:"THU"},{label:"FRI"},{label:"SAT"}],u=function(t,e,i,a,o,l){return n&&n.navigator?(t=navigator.userAgent.toLowerCase(),e=t.search(/mobile/g)!=-1,l,t.search(/iphone/g)!=-1?{name:"iphone",version:0,mobile:!0}:t.search(/ipad/g)!=-1?{name:"ipad",version:0,mobile:!0}:t.search(/android/g)!=-1?(a=/(android)[ \/]([\w.]+)/.exec(t)||[],l=a[2]||"0",{name:"android",version:l,mobile:e}):(i="",a=/(opr)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],o=a[1]||"",l=a[2]||"0","msie"==o&&(o="ie"),{name:o,version:l,mobile:e})):{}}(),h=!("undefined"==typeof window||"undefined"==typeof navigator||!n.document),p=n&&/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",f={},g=!!n&&("ontouchstart"in n||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);return{errorMsg:f,version:l,baseUrl:s,onerror:r,eventKeys:d,weekNames:c,browser:u,isBrowser:h,supportTouch:g,wheelEnm:p,urlUtil:i,getError:o}}(),m.util=e=function(){function x(t,e){if(R(t))return[];var i,n=0,a=t.length,o=void 0===a||"function"==typeof t;if(o){for(i in t)if("undefined"!=typeof t[i]&&e.call(t[i],i,t[i])===!1)break}else for(;n<a&&("undefined"==typeof t[n]||e.call(t[n],n,t[n++])!==!1););return t}function v(t,e){if(R(t))return[];var i,n,a=0,o=t.length,l=[];if(j(t)){for(i in t)if("undefined"!=typeof t[i]){if(n=void 0,(n=e.call(t[i],i,t[i]))===!1)break;l.push(n)}}else for(;a<o;)if("undefined"!=typeof t[a]){if(n=void 0,(n=e.call(t[a],a,t[a++]))===!1)break;l.push(n)}return l}function b(t,e){if(R(t))return-1;var i,n=0,a=t.length;if(j(t))for(i in t){if("undefined"!=typeof t[i]&&P(e)&&e.call(t[i],i,t[i]))return i;if(t[i]==e)return i}else for(;n<a;){if("undefined"!=typeof t[n]&&P(e)&&e.call(t[n],n,t[n]))return n;if(t[n]==e)return n;n++}return-1}function y(t,e,i){var n,a,o;if(P(e)&&"undefined"==typeof i&&(i=e,e=0),"undefined"==typeof e&&(e=0),N(t)){for(n=0,a=t.length;n<a;n++)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e}if(j(t)){for(n in t)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e}return console.error("argument error : ax5.util.sum - use Array or Object"),e}function w(t,e,i){var n,a,o;if(P(e)&&"undefined"==typeof i&&(i=e,e=0),"undefined"==typeof e&&(e=0),N(t)){for(n=0,a=t.length;n<a;n++)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e/a}if(j(t)){for(n in t)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e/a}return console.error("argument error : ax5.util.sum - use Array or Object"),e}function _(t,e){var n,a,o;if(N(t)){for(n=0,a=t.length,o=t[n];n<a-1&&("undefined"==typeof t[n]||(o=e.call(i,o,t[++n]))!==!1););return o}if(j(t)){for(n in t)if("undefined"!=typeof t[n]&&(o=e.call(i,o,t[n]))===!1)break;return o}return console.error("argument error : ax5.util.reduce - use Array or Object"),null}function I(t,e){for(var n=t.length-1,a=t[n];n>0&&("undefined"==typeof t[n]||(a=e.call(i,a,t[--n]))!==!1););return a}function k(t,e){if(R(t))return[];var i,n,a=0,o=t.length,l=[];if(j(t))for(i in t)"undefined"!=typeof t[i]&&(n=e.call(t[i],i,t[i]))&&l.push(t[i]);else for(;a<o;)"undefined"!=typeof t[a]&&((n=e.call(t[a],a,t[a]))&&l.push(t[a]),a++);return l}function C(t){var e="";if(m.util.isArray(t)){var i=0,n=t.length;for(e+="[";i<n;i++)i>0&&(e+=","),e+=C(t[i]);e+="]"}else if(m.util.isObject(t)){e+="{";var a=[];x(t,function(t,e){a.push('"'+t+'": '+C(e))}),e+=a.join(", "),e+="}"}else e=m.util.isString(t)?'"'+t+'"':m.util.isNumber(t)?t:m.util.isUndefined(t)?"undefined":m.util.isFunction(t)?'"{Function}"':t;return e}function $(t,e){if(!e&&!o.test(t))return{error:500,msg:"syntax error"};try{return new Function("","return "+t)()}catch(i){return{error:500,msg:"syntax error"}}}function S(t){var e;return null!=t&&t==t.window?e="window":t&&1==t.nodeType?e="element":t&&11==t.nodeType?e="fragment":null===t?e="null":"undefined"==typeof t?e="undefined":"[object Object]"==ht.call(t)?e="object":"[object Array]"==ht.call(t)?e="array":"[object String]"==ht.call(t)?e="string":"[object Number]"==ht.call(t)?e="number":"[object NodeList]"==ht.call(t)?e="nodelist":"function"==typeof t&&(e="function"),e}function T(t){return null!=t&&t==t.window}function E(t){return!(!t||1!=t.nodeType&&11!=t.nodeType)}function j(t){return"[object Object]"==ht.call(t)}function N(t){return"[object Array]"==ht.call(t)}function P(t){return"function"==typeof t}function K(t){return"[object String]"==ht.call(t)}function z(t){return"[object Number]"==ht.call(t)}function D(t){return!!("[object NodeList]"==ht.call(t)||"undefined"!=typeof t&&t&&t[0]&&1==t[0].nodeType)}function Q(t){return"undefined"==typeof t}function R(t){return"undefined"==typeof t||null===t||""===t}function q(t){return t instanceof Date&&!isNaN(t.valueOf())}function O(t){var e=!1;if(t)if(t instanceof Date&&!isNaN(t.valueOf()))e=!0;else{if(t.length>7&&et(t)instanceof Date)return!0;if(t=t.replace(/\D/g,""),t.length>7){var i=t.substr(4,2),n=t.substr(6,2);t=et(t),t.getMonth()==i-1&&t.getDate()==n&&(e=!0)}}else;return e}function A(t){if(j(t)){var e=Object.keys(t),i={};return i[e[0]]=t[e[0]],i}return N(t)?t[0]:void console.error("ax5.util.object.first","argument type error")}function M(t){if(j(t)){var e=Object.keys(t),i={};return i[e[e.length-1]]=t[e[e.length-1]],i}return N(t)?t[t.length-1]:void console.error("ax5.util.object.last","argument type error")}function G(t,e,i,n){var o;return"number"==typeof i&&(o=new Date,o.setDate(o.getDate()+i)),n=n||{},a.cookie=[escape(t),"=",escape(e),o?"; expires="+o.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}function L(t){for(var e=t+"=",i=a.cookie.split(";"),n=0,o=i.length;n<o;n++){for(var l=i[n];" "==l.charAt(0);)l=l.substring(1);if(l.indexOf(e)!=-1)return unescape(l.substring(e.length,l.length))}return""}function H(t){return n.alert(C(t)),t}function V(t,e){return"undefined"==typeof t||"undefined"==typeof e?"":K(e)?t.indexOf(e)>-1?t.substr(0,t.indexOf(e)):"":z(e)?t.substr(0,e):""}function F(t,e){return"undefined"==typeof t||"undefined"==typeof e?"":(t=""+t,K(e)?t.lastIndexOf(e)>-1?t.substr(t.lastIndexOf(e)+1):"":z(e)?t.substr(t.length-e):"")}function W(t){return t.replace(l,"ms-").replace(s,function(t,e){return e.toUpperCase()})}function B(t){return W(t).replace(r,function(t,e){return"-"+e.toLowerCase()})}function U(t,e){var i,n=(""+t).split(d),a=Number(n[0])<0||"-0"==n[0],o=0;return n[0]=n[0].replace(c,""),n[1]?(n[1]=n[1].replace(u,""),o=Number(n[0]+"."+n[1])||0):o=Number(n[0])||0,i=a?-o:o,x(e,function(t,e){"round"==t&&(i=z(e)?e<0?+(Math.round(i+"e-"+Math.abs(e))+"e+"+Math.abs(e)):+(Math.round(i+"e+"+e)+"e-"+e):Math.round(i)),"floor"==t&&(i=Math.floor(i)),"ceil"==t?i=Math.ceil(i):"money"==t?i=function(t){var e=""+t;if(isNaN(e)||""==e)return"";var i=e.split(".");i[0]+=".";do i[0]=i[0].replace(h,"$1,$2");while(h.test(i[0]));return i.length>1?i.join(""):i[0].split(".")[0]}(i):"abs"==t?i=Math.abs(Number(i)):"byte"==t&&(i=function(t){t=Number(i);var e="KB",n=t/1024;return n/1024>1&&(e="MB",n/=1024),n/1024>1&&(e="GB",n/=1024),U(n,{round:1})+e}(i))}),i}function Y(t){return"undefined"!=typeof t.length?Array.prototype.slice.call(t):[]}function X(t,e){var i=e.length,n=t.length,a=0;if("number"==typeof i)for(;a<i;a++)t[n++]=e[a];else for(;void 0!==e[a];)t[n++]=e[a++];return t.length=n,t}function J(t,e){var i;return K(t)&&"undefined"!=typeof e&&"param"==e?t:K(t)&&"undefined"!=typeof e&&"object"==e||K(t)&&"undefined"==typeof e?(i={},x(t.split(p),function(){var t=this.split(f);i[t[0]]?(K(i[t[0]])&&(i[t[0]]=[i[t[0]]]),i[t[0]].push(t[1])):i[t[0]]=t[1]}),i):(i=[],x(t,function(t,e){i.push(t+"="+escape(e))}),i.join("&"))}function Z(){m.info.onerror.apply(this,arguments)}function tt(t,e,i,n,a,o){var l,s;return s=new Date,"undefined"==typeof n&&(n=23),"undefined"==typeof a&&(a=59),l=new Date(Date.UTC(t,e,i||1,n,a,o||0)),0==e&&1==i&&l.getUTCHours()+l.getTimezoneOffset()/60<0?l.setUTCHours(0):l.setUTCHours(l.getUTCHours()+l.getTimezoneOffset()/60),l}function et(e,i){var n,a,o,l,s,r,d,c,u,h,p=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,f=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;if(K(e))if(0==e.length)e=new Date;else if(e.length>15)f.test(e)||p.test(e)?e=new Date(e):(r=e.split(/ /g),u=r[0].split(/\D/g),n=u[0],a=parseFloat(u[1]),o=parseFloat(u[2]),c=r[1]||"09:00",d=c.substring(0,5).split(":"),l=parseFloat(d[0]),s=parseFloat(d[1]),"AM"!==F(c,2)&&"PM"!==F(c,2)||(l+=12),e=tt(n,a-1,o,l,s));else if(14==e.length)h=e.replace(/\D/g,""),e=tt(h.substr(0,4),h.substr(4,2)-1,U(h.substr(6,2)),U(h.substr(8,2)),U(h.substr(10,2)),U(h.substr(12,2)));else if(e.length>7)h=e.replace(/\D/g,""),e=tt(h.substr(0,4),h.substr(4,2)-1,U(h.substr(6,2)));else if(e.length>4)h=e.replace(/\D/g,""),e=tt(h.substr(0,4),h.substr(4,2)-1,1);else{if(e.length>2)return h=e.replace(/\D/g,""),tt(h.substr(0,4),h.substr(4,2)-1,1);e=new Date}return"undefined"==typeof i?e:(i.add&&(e=function(t,e){var i,n,a,o,l=864e5;return"undefined"!=typeof e.d?t.setTime(t.getTime()+e.d*l):"undefined"!=typeof e.m?(i=t.getFullYear(),n=t.getMonth(),a=t.getDate(),i+=parseInt(e.m/12),n+=e.m%12,o=at(i,n),o<a&&(a=o),t=new Date(i,n,a,12)):"undefined"!=typeof e.y?t.setTime(t.getTime()+365*e.y*l):t.setTime(t.getTime()+e.y*l),t}(new Date(e),i.add)),i["return"]?function(){var n,a,o,l,s,r,d,c=i["return"];n=e.getUTCFullYear(),a=ot(e.getMonth()+1,2),o=ot(e.getDate(),2),l=ot(e.getHours(),2),s=ot(e.getMinutes(),2),r=ot(e.getSeconds(),2),d=e.getDay();var u=/[^y]*(yyyy)[^y]*/gi;u.exec(c);var h=RegExp.$1,p=/[^m]*(MM)[^m]*/g;p.exec(c);var f=RegExp.$1,g=/[^d]*(dd)[^d]*/gi;g.exec(c);var m=RegExp.$1,x=/[^h]*(hh)[^h]*/gi;x.exec(c);var v=RegExp.$1,b=/[^m]*(mm)[^i]*/g;b.exec(c);var y=RegExp.$1,w=/[^s]*(ss)[^s]*/gi;w.exec(c);var _=RegExp.$1,I=/[^d]*(dw)[^w]*/gi;I.exec(c);var k=RegExp.$1;return"yyyy"===h&&(c=c.replace(h,F(n,h.length))),"MM"===f&&(1==f.length&&(a=e.getMonth()+1),c=c.replace(f,a)),"dd"===m&&(1==m.length&&(o=e.getDate()),c=c.replace(m,o)),"hh"===v&&(c=c.replace(v,l)),"mm"===y&&(c=c.replace(y,s)),"ss"===_&&(c=c.replace(_,r)),"dw"==k&&(c=c.replace(k,t.weekNames[d].label)),c}():e)}function it(t,e){function i(t){return Math.floor(t.getTime()/l)*l}var n,a,o=et(t),l=864e5,s=new Date;return"undefined"==typeof e?n=U((i(o)-i(s))/l,{floor:!0}):(n=U((i(o)-i(s))/l,{floor:!0}),e.today&&(s=et(e.today),n=U((i(o)-i(s))/l,{floor:!0})),e.thisYear&&(a=new Date(s.getFullYear(),o.getMonth(),o.getDate()),n=U((i(a)-i(s))/l,{floor:!0}),n<0&&(a=new Date(s.getFullYear()+1,o.getMonth(),o.getDate()),n=U((i(a)-i(s))/l,{floor:!0}))),e.age&&(a=new Date(s.getFullYear(),o.getMonth(),o.getDate()),n=a.getFullYear()-o.getFullYear()),n)}function nt(t){var e=et(t);return{year:e.getFullYear(),month:e.getMonth()+1,count:parseInt(e.getDate()/7+1)}}function at(t,e){return 3==e||5==e||8==e||10==e?30:1==e?t%4==0&&t%100!=0||t%400==0?29:28:31}function ot(t,e,i,n){var a=t.toString(n||10);return lt(i||"0",e-a.length)+a}function lt(t,e){return e<1?"":new Array(e+1).join(t)}function st(t,e){if(t)for(;function(){var i=!0;if("undefined"==typeof e)t=!!t.parentNode&&t.parentNode;else if(P(e))i=e(t);else if(j(e))for(var n in e)if("tagname"===n){if(t.tagName.toLocaleLowerCase()!=e[n]){i=!1;break}}else if("clazz"===n||"class_name"===n){if(!("className"in t)){i=!1;break}for(var a=t.className.split(g),o=!1,l=0;l<a.length;l++)if(a[l]==e[n]){o=!0;break}i=o}else{if(!t.getAttribute){i=!1;break}if(t.getAttribute(n)!=e[n]){i=!1;break}}return!i}();){if(!t.parentNode||!t.parentNode.parentNode){t=!1;break}t=t.parentNode}return t}function rt(t){var e=/\D?(\d+)([a-zA-Z%]*)/i,i=(""+t).match(e),n=i[2]||"px";return i[1]+n}function dt(t){var e;if(j(t)){e="";for(var i in t)e+=i+":"+t[i]+";";return e}if(K(t)){e={};var n=t.split(/[ ]*;[ ]*/g);return n.forEach(function(t){if(""!==(t=t.trim())){var i=t.split(/[ ]*:[ ]*/g);e[i[0]]=i[1]}}),e}}function ct(t){if(!t)var t=window.event;return t.cancelBubble=!0,t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}function ut(t){var i,n;if("object"==("undefined"==typeof t?"undefined":_typeof(t))){if(e.isArray(t)){n=t.length,i=new Array(n);for(var a=0;a<n;a++)i[a]=ut(t[a]);return i}return jQuery.extend({},t)}return t}var ht=Object.prototype.toString,pt=function(){var t={textRange:{selectAll:function(t,e,i){},arr:function(t,e,i){e.moveStart("character",i[0]),e.collapse(),e.moveEnd("character",i[1])},start:function(t,e,i){e.moveStart("character",0),e.collapse()},end:function(t,e,i){e.moveStart("character",e.text.length),e.collapse()}},range:{selectAll:function(t,e,i){e.selectNodeContents(t)},arr:function(t,e,i){j(i[0])?(e.setStart(i[0].node,i[0].offset),e.setEnd(i[1].node,i[1].offset)):(e.setStart(t.firstChild,i[0]),e.setEnd(t.firstChild,i[1]))},start:function(t,e,i){e.selectNodeContents(t),e.collapse(!0)},end:function(t,e,i){e.selectNodeContents(t),e.collapse(!1)}}};return function(e,i){var n,o,l;if(e instanceof jQuery&&(e=e.get(0)),e){if(a.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(e),o="textRange"):window.getSelection&&(l=window.getSelection(),n=document.createRange(),o="range"),"undefined"==typeof i)t[o].selectAll.call(this,e,n,i);else if(N(i))t[o].arr.call(this,e,n,i);else for(var s in t[o])if(i==s){t[o][s].call(this,e,n,i);break}a.body.createTextRange?(n.select(),e.focus()):window.getSelection&&(e.focus(),l.removeAllRanges(),l.addRange(n))}}}(),ft=function(t,e,i){var n,a,o=function(){var o=Y(arguments);a&&clearTimeout(a),n?(n&&clearTimeout(n),n=setTimeout(function(e){t.apply(this,e)}.bind(this,o),e)):n=setTimeout(function(e){t.apply(this,e)}.bind(this,o),i?0:e),a=setTimeout(function(){clearTimeout(n),n=null},e)};return o.cancel=function(){clearTimeout(n),clearTimeout(a),n=null},o};return{alert:H,each:x,map:v,search:b,reduce:_,reduceRight:I,filter:k,sum:y,avg:w,toJson:C,parseJson:$,first:A,last:M,deepCopy:ut,left:V,right:F,getType:S,isWindow:T,isElement:E,isObject:j,isArray:N,isFunction:P,isString:K,isNumber:z,isNodelist:D,isUndefined:Q,isNothing:R,setCookie:G,getCookie:L,camelCase:W,snakeCase:B,number:U,toArray:Y,merge:X,param:J,error:Z,date:et,dday:it,daysOfMonth:at,weeksOfMonth:nt,setDigit:ot,times:lt,findParentNode:st,cssNumber:rt,css:dt,isDate:q,isDateFormat:O,stopEvent:ct,selectRange:pt,debounce:ft}}(),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=m:i.ax5=function(){return m}()}).call("undefined"!=typeof window?window:void 0),ax5.def={},ax5.info.errorMsg.ax5dialog={501:"Duplicate call error"},ax5.info.errorMsg.ax5picker={401:"Can not find target element",402:"Can not find boundID",501:"Can not find content key"},ax5.info.errorMsg["single-uploader"]={460:"There are no files to be uploaded.",461:"There is no uploaded files."},ax5.info.errorMsg.ax5calendar={401:"Can not find target element"},ax5.info.errorMsg.ax5formatter={401:"Can not find target element",402:"Can not find boundID",501:"Can not find pattern"},ax5.info.errorMsg.ax5menu={501:"Can not find menu item"},ax5.info.errorMsg.ax5select={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},ax5.info.errorMsg.ax5combobox={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},function(){var t=/^\s*|\s*$/g;Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a))&&("function"!=typeof a||null===a))throw new TypeError("type err");var o,l,s=[];for(o in a)t.call(a,o)&&s.push(o);if(e)for(l=0;l<n;l++)t.call(a,i[l])&&s.push(i[l]);return s}}()),Array.prototype.forEach||(Array.prototype.forEach=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var n,a=arguments[1];for(n=0;n<i;n++)n in e&&t.call(a,e[n],n,e)}),Function.prototype.bind||(Function.prototype.bind=function(t){function e(){}if("function"!=typeof this)throw TypeError("function");var i=[].slice,n=i.call(arguments,1),a=this,o=function(){return a.apply(this instanceof e?this:t,n.concat(i.call(arguments)))};return e.prototype=a.prototype,o.prototype=new e,o}),function(){if(!document.querySelectorAll&&!document.querySelector&&document.createStyleSheet){var t=document.createStyleSheet(),e=function(e,i){var n,a=document.all,o=a.length,l=[];for(t.addRule(e,"foo:bar"),n=0;n<o&&!("bar"===a[n].currentStyle.foo&&(l.push(a[n]),l.length>i));n+=1);return t.removeRule(0),l};document.querySelectorAll=function(t){return e(t,1/0)},document.querySelector=function(t){return e(t,1)[0]||null}}}(),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(t,"")}}(),window.JSON||(window.JSON={parse:function(t){return new Function("","return "+t)()},stringify:function(){var t,e=/["]/g;return t=function(i){var n,a,o;switch(n="undefined"==typeof i?"undefined":_typeof(i)){case"string":return'"'+i.replace(e,'\\"')+'"';case"number":case"boolean":return i.toString();case"undefined":return"undefined";case"function":return'""';case"object":if(!i)return"null";if(n="",i.splice){for(a=0,o=i.length;a<o;a++)n+=","+t(i[a]);return"["+n.substr(1)+"]"}for(a in i)i.hasOwnProperty(a)&&void 0!==i[a]&&"function"!=typeof i[a]&&(n+=',"'+a+'":'+t(i[a]));return"{"+n.substr(1)+"}"}}}()}),function(){if(!document.documentMode||document.documentMode>=9)return!1;var t=Array.prototype.splice;Array.prototype.splice=function(){var e=Array.prototype.slice.call(arguments);return"undefined"==typeof e[1]&&(e[1]=this.length-e[0]),t.apply(this,e)}}(),function(){var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(e){Array.prototype.slice=function(e,i){if(i="undefined"!=typeof i?i:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,e,i);var n,a,o=[],l=this.length,s=e||0;s=s>=0?s:Math.max(0,l+s);var r="number"==typeof i?Math.min(i,l):l;if(i<0&&(r=l+i),a=r-s,a>0)if(o=new Array(a),this.charAt)for(n=0;n<a;n++)o[n]=this.charAt(s+n);else for(n=0;n<a;n++)o[n]=this[s+n];return o}}}(),function(t){for(var e,i,n={},a=function(){},o="memory".split(","),l="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)t[e]=t[e]||n;for(;i=l.pop();)t[i]=t[i]||a}(window.console||{});var e=document.getElementsByTagName("html")[0];document.getElementsByTagName("body")[0];window.innerWidth||(window.innerWidth=e.clientWidth),window.innerHeight||(window.innerHeight=e.clientHeight),window.scrollX||(window.scrollX=window.pageXOffset||e.scrollLeft),window.scrollY||(window.scrollY=window.pageYOffset||e.scrollTop)}.call(window),ax5.ui=function(){function t(){this.config={},this.name="root",this.setConfig=function(t,e){return jQuery.extend(!0,this.config,t),"undefined"!=typeof e&&e!==!0||this.init(),this},this.init=function(){console.log(this.config)},this.bindWindowResize=function(t){setTimeout(function(){jQuery(window).resize(function(){this.bindWindowResize__&&clearTimeout(this.bindWindowResize__),this.bindWindowResize__=setTimeout(function(){t.call(this)}.bind(this),10)}.bind(this))}.bind(this),100)},this.stopEvent=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1},this.toString=function(){return this.name+"@"+this.version},this.main=function(){}.apply(this,arguments)}function e(t,e){if(!t||!t.className)throw"invalid call";var i=t.classStore?t.classStore:ax5.ui;if(!i)throw"invalid classStore";ax5.def[t.className]={version:t.version};var n=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2])}},a=function(t,e,i){return i.name=t,i.version=e,i.instanceId=ax5.getGuid(),i},o=function(e){var i=t.superClass?t.superClass:ax5.ui.root;if(!ax5.util.isFunction(i))throw"invalid superClass";i.call(this),e.prototype=new i},l=function s(){if(!(this&&this instanceof s))throw"invalid call";var i=n(e,arguments);return a(t.className,t.version||"",i)};o.call(this,e),i[t.className]=l}return{root:t,addClass:e}}(),function(t,e){e(t.mustache={})}(window.ax5,function(t){function e(t){return"function"==typeof t}function i(t){return g(t)?"array":"undefined"==typeof t?"undefined":_typeof(t)}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t,e){return null!=t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&e in t}function o(t,e){return m.call(t,e)}function l(t){return!o(x,t)}function s(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function r(e,i){function a(){if(x&&!v)for(;m.length;)delete f[m.pop()];else m=[];x=!1,v=!1}function o(t){if("string"==typeof t&&(t=t.split(y,2)),!g(t)||2!==t.length)throw new Error("Invalid tags: "+t);s=new RegExp(n(t[0])+"\\s*"),r=new RegExp("\\s*"+n(t[1])),h=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var s,r,h,p=[],f=[],m=[],x=!1,v=!1;o(i||t.tags);for(var k,C,$,S,T,E,j=new u(e);!j.eos();){if(k=j.pos,$=j.scanUntil(s))for(var N=0,P=$.length;N<P;++N)S=$.charAt(N),l(S)?m.push(f.length):v=!0,f.push(["text",S,k,k+1]),k+=1,"\n"===S&&a();if(!j.scan(s))break;if(x=!0,C=j.scan(I)||"name",j.scan(b),"="===C?($=j.scanUntil(w),j.scan(w),j.scanUntil(r)):"{"===C?($=j.scanUntil(h),j.scan(_),j.scanUntil(r),C="&"):$=j.scanUntil(r),!j.scan(r))throw new Error("Unclosed tag at "+j.pos);if(T=[C,$,k,j.pos],f.push(T),"#"===C||"^"===C)p.push(T);else if("/"===C){if(E=p.pop(),!E)throw new Error('Unopened section "'+$+'" at '+k);if(E[1]!==$)throw new Error('Unclosed section "'+E[1]+'" at '+k)}else"name"===C||"{"===C||"&"===C?v=!0:"="===C&&o($)}if(E=p.pop())throw new Error('Unclosed section "'+E[1]+'" at '+j.pos);return c(d(f))}function d(t){for(var e,i,n=[],a=0,o=t.length;a<o;++a)e=t[a],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],a=n,o=[],l=0,s=t.length;l<s;++l)switch(e=t[l],e[0]){case"#":case"^":a.push(e),o.push(e),a=e[4]=[];break;case"/":i=o.pop(),i[5]=e[2],a=o.length>0?o[o.length-1][4]:n;break;default:a.push(e)}return n}function u(t){this.string=t,this.tail=t,this.pos=0}function h(t,e){this.view=t,this.cache={".":this.view,"@each":function(){var t=[];for(var e in this)t.push({"@key":e,"@value":this[e]});return t}},this.parent=e}function p(){this.cache={}}var f=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===f.call(t)},m=RegExp.prototype.test,x=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=/\s*/,y=/\s+/,w=/\s*=/,_=/\s*\}/,I=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},u.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},h.prototype.push=function(t){return new h(t,this)},h.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var o,l,s=this,r=!1;s;){if(t.indexOf(".")>0)for(i=s.view,o=t.split("."),l=0;null!=i&&l<o.length;)l===o.length-1&&(r=a(i,o[l])),i=i[o[l++]];else i=s.view[t],r=a(s.view,t);if(r)break;s=s.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=r(t,e)),n},p.prototype.render=function(t,e,i){var n=this.parse(t),a=e instanceof h?e:new h(e);return this.renderTokens(n,a,i,t)},p.prototype.renderTokens=function(t,e,i,n){for(var a,o,l,s="",r=0,d=t.length;r<d;++r)l=void 0,a=t[r],o=a[0],"#"===o?l=this.renderSection(a,e,i,n):"^"===o?l=this.renderInverted(a,e,i,n):">"===o?l=this.renderPartial(a,e,i,n):"&"===o?l=this.unescapedValue(a,e):"name"===o?l=this.escapedValue(a,e):"text"===o&&(l=this.rawValue(a)),void 0!==l&&(s+=l);return s},p.prototype.renderSection=function(t,i,n,a){function o(t){return l.render(t,i,n)}var l=this,s="",r=i.lookup(t[1]);if(r){if(g(r))for(var d=0,c=r.length;d<c;++d)r[d]&&(r[d]["@i"]=d,r[d]["@first"]=0===d,s+=this.renderTokens(t[4],i.push(r[d]),n,a));else if("object"===("undefined"==typeof r?"undefined":_typeof(r))||"string"==typeof r||"number"==typeof r)s+=this.renderTokens(t[4],i.push(r),n,a);else if(e(r)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");r=r.call(i.view,a.slice(t[3],t[5]),o),null!=r&&(s+=r)}else s+=this.renderTokens(t[4],i,n,a);return s}},p.prototype.renderInverted=function(t,e,i,n){var a=e.lookup(t[1]);if(!a||g(a)&&0===a.length)return this.renderTokens(t[4],e,i,n)},p.prototype.renderPartial=function(t,i,n){if(n){var a=e(n)?n(t[1]):n[t[1]];return null!=a?this.renderTokens(this.parse(a),i,n,a):void 0}},p.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);if(null!=i)return i},p.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);if(null!=n)return t.escape(n)},p.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.1.3",t.tags=["{{","}}"];var k=new p;t.clearCache=function(){return k.clearCache()},t.parse=function(t,e){return k.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(t,e,n)},t.to_html=function(i,n,a,o){var l=t.render(i,n,a);return e(o)?void o(l):l},t.escape=s,t.Scanner=u,t.Context=h,t.Writer=p}),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"dialog",version:"0.8.6"},function(){var n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={id:"ax5-dialog-"+this.instanceId,clickEventName:"click",theme:"default",width:300,title:"",msg:"",lang:{ok:"ok",cancel:"cancel"},animateTime:150},this.activeDialog=null,n=this.config;var o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),e=null,!0},l=function(e,i){var a={dialogId:e,title:i.title||n.title||"",msg:(i.msg||n.msg||"").replace(/\n/g,"<br/>"),input:i.input,btns:i.btns,_crlf:function(){return this.replace(/\n/g,"<br/>")}};try{return t.tmpl.get.call(this,"dialogDisplay",a)}finally{a=null}},s=function(t,e){var i,a={};t.id=t.id||n.id,i={width:t.width},jQuery(document.body).append(l.call(this,t.id,t)),this.activeDialog=jQuery("#"+t.id),this.activeDialog.css({width:i.width}),t.height=i.height=this.activeDialog.height(),"undefined"==typeof t.position||"center"===t.position?(a.top=jQuery(window).height()/2-i.height/2,a.left=jQuery(window).width()/2-i.width/2):(a.left=t.position.left||0,a.top=t.position.top||0),n.zIndex&&(a["z-index"]=n.zIndex),this.activeDialog.css(a),"prompt"===t.dialogType?this.activeDialog.find("[data-dialog-prompt]").get(0).focus():this.activeDialog.find("[data-dialog-btn]").get(0).focus(),this.activeDialog.find("[data-dialog-btn]").on(n.clickEventName,function(i){d.call(this,i||window.event,t,e)}.bind(this)),jQuery(window).bind("keydown.ax5dialog",function(i){c.call(this,i||window.event,t,e)}.bind(this)),jQuery(window).bind("resize.ax5dialog",function(t){r.call(this,t||window.event)}.bind(this)),o.call(this,t,{self:this,state:"open"}),a=null,i=null},r=function(t){if(!this.activeDialog)return this;var e=a.dialogConfig,i={width:e.width,height:e.height};return"undefined"==typeof e.position||"center"===e.position?(i.top=window.innerHeight/2-i.height/2,i.left=window.innerWidth/2-i.width/2):(i.left=e.position.left||0,i.top=e.position.top||0),i.left<0&&(i.left=0),i.top<0&&(i.top=0),this.activeDialog.css(i),e=null,i=null,this},d=function(t,e,n,a,o){var l;if(t.srcElement&&(t.target=t.srcElement),a=i.findParentNode(t.target,function(t){if(t.getAttribute("data-dialog-btn"))return!0})){if(o=a.getAttribute("data-dialog-btn"),l={self:this,key:o,value:e.btns[o],dialogId:e.id,btnTarget:a},"prompt"===e.dialogType){var s=null;for(var r in e.input)if(l[r]=this.activeDialog.find("[data-dialog-prompt="+r+"]").val(),""==l[r]||null==l[r]){s=r;break}}if(e.btns[o].onClick)e.btns[o].onClick.call(l,o);else if("alert"===e.dialogType)n&&n.call(l,o),this.close();else if("confirm"===e.dialogType)n&&n.call(l,o),this.close();else if("prompt"===e.dialogType){if("ok"===o&&s)return this.activeDialog.find('[data-dialog-prompt="'+s+'"]').get(0).focus(),!1;n&&n.call(l,o),this.close()}}l=null,e=null,n=null,a=null,o=null},c=function(t,e,i,n,a){var o,l=null;if(t.keyCode==ax5.info.eventKeys.ESC&&this.close(),"prompt"===e.dialogType&&t.keyCode==ax5.info.eventKeys.RETURN){o={self:this,key:a,value:e.btns[a],dialogId:e.id,btnTarget:n};for(var s in e.input)if(o[s]=this.activeDialog.find("[data-dialog-prompt="+s+"]").val(),""==o[s]||null==o[s]){l=s;break}if(l)return o=null,l=null,!1;i&&i.call(o,a),this.close()}o=null,l=null,e=null,i=null,n=null,a=null};this.init=function(){this.onStateChanged=n.onStateChanged},this.alert=function(t,e,o){return i.isString(t)&&(t={title:n.title,msg:t}),this.activeDialog?(o?console.log(ax5.info.getError("ax5dialog","501","alert")):setTimeout(function(){this.alert(t,e,1)}.bind(this),Number(n.animateTime)+100),this):(a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,t.dialogType="alert","undefined"==typeof t.btns&&(t.btns={ok:{label:n.lang.ok,theme:t.theme}}),s.call(this,t,e),t=null,e=null,this)},this.confirm=function(t,e,o){return i.isString(t)&&(t={title:n.title,msg:t}),this.activeDialog?(o?console.log(ax5.info.getError("ax5dialog","501","confirm")):setTimeout(function(){this.confirm(t,e,1)}.bind(this),Number(n.animateTime)+100),this):(a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,t.dialogType="confirm",t.theme=t.theme||n.theme||"","undefined"==typeof t.btns&&(t.btns={ok:{label:n.lang.ok,theme:t.theme},cancel:{label:n.lang.cancel}}),s.call(this,t,e),t=null,e=null,this)},this.prompt=function(t,e,o){return i.isString(t)&&(t={title:n.title,msg:t}),this.activeDialog?(o?console.log(ax5.info.getError("ax5dialog","501","prompt")):setTimeout(function(){this.prompt(t,e,1)}.bind(this),Number(n.animateTime)+100),
this):(a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,t.dialogType="prompt",t.theme=t.theme||n.theme||"","undefined"==typeof t.input&&(t.input={value:{label:""}}),"undefined"==typeof t.btns&&(t.btns={ok:{label:n.lang.ok,theme:t.theme},cancel:{label:n.lang.cancel}}),s.call(this,t,e),t=null,e=null,this)},this.close=function(t,e){return this.activeDialog&&(t=a.dialogConfig,this.activeDialog.addClass("destroy"),jQuery(window).unbind("keydown.ax5dialog"),jQuery(window).unbind("resize.ax5dialog"),setTimeout(function(){this.activeDialog.remove(),this.activeDialog=null,e={self:this,state:"close"},t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null}.bind(this),n.animateTime)),this},this.main=function(){e.dialog_instance=e.dialog_instance||[],e.dialog_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.dialog}(),function(){var t=ax5.ui.dialog,e=function(t){return' \n        <div id="{{dialogId}}" data-ax5-ui="dialog" class="ax5-ui-dialog {{theme}}">\n            <div class="ax-dialog-header">\n                {{{title}}}\n            </div>\n            <div class="ax-dialog-body">\n                <div class="ax-dialog-msg">{{{msg}}}</div>\n                \n                {{#input}}\n                <div class="ax-dialog-prompt">\n                    {{#@each}}\n                    <div class="form-group">\n                    {{#@value.label}}\n                    <label>{{#_crlf}}{{{.}}}{{/_crlf}}</label>\n                    {{/@value.label}}\n                    <input type="{{@value.type}}" placeholder="{{@value.placeholder}}" class="form-control {{@value.theme}}" data-dialog-prompt="{{@key}}" style="width:100%;" value="{{@value.value}}" />\n                    {{#@value.help}}\n                    <p class="help-block">{{#_crlf}}{{.}}{{/_crlf}}</p>\n                    {{/@value.help}}\n                    </div>\n                    {{/@each}}\n                </div>\n                {{/input}}\n                \n                <div class="ax-dialog-buttons">\n                    <div class="ax-button-wrap">\n                    {{#btns}}\n                        {{#@each}}\n                        <button type="button" data-dialog-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{@value.label}}</button>\n                        {{/@each}}\n                    {{/btns}}\n                    </div>\n                </div>\n            </div>\n        </div>  \n        '};t.tmpl={dialogDisplay:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"mask",version:"0.7.5"},function(){var n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={theme:"",target:jQuery(document.body).get(0)},this.maskContent="",this.status="off",n=this.config;var o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null,!0},l=function(e){return t.tmpl.get.call(this,"defaultMask",e)},s=function(t){this.maskContent=t};this.init=function(){this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.config.content&&s.call(this,this.config.content)},this.open=function(t){"on"===this.status&&this.close(),t&&t.content&&s.call(this,t.content),a.maskConfig={},jQuery.extend(!0,a.maskConfig,this.config,t);var e,i=a.maskConfig,n=i.target,r=jQuery(n),d="ax-mask-"+ax5.getGuid(),c={},u={},h=l({theme:i.theme,maskId:d,body:this.maskContent});return jQuery(document.body).append(h),n&&n!==jQuery(document.body).get(0)&&(c={position:i.position||"absolute",left:r.offset().left,top:r.offset().top,width:r.outerWidth(),height:r.outerHeight()},"undefined"!=typeof a.maskConfig.zIndex&&(c["z-index"]=a.maskConfig.zIndex),r.addClass("ax-masking")),this.$mask=e=jQuery("#"+d),this.$target=r,this.status="on",e.css(c),i.onClick&&e.on("click",function(t){u={self:a,state:"open",type:"click"},a.maskConfig.onClick.call(u,u)}),o.call(this,null,{self:this,state:"open"}),t=null,i=null,n=null,r=null,d=null,e=null,c=null,u=null,h=null,this},this.close=function(t){if(this.$mask){var e=function(){this.status="off",this.$mask.remove(),this.$target.removeClass("ax-masking"),o.call(this,null,{self:this,state:"close"})};t?setTimeout(function(){e.call(this)}.bind(this),t):e.call(this)}return this},this.main=function(){e.mask_instance=e.mask_instance||[],e.mask_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.mask}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"toast",version:"0.4.1"},function(){var n=function(){var n,a=this,o=0,l=null;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",width:300,icon:"",closeIcon:"",msg:"",lang:{ok:"ok",cancel:"cancel"},displayTime:3e3,animateTime:250,containerPosition:"bottom-left"},this.toastContainer=null,this.queue=[],n=this.config;var s=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null,!0},r=function(e,i){var n={toastId:e,theme:i.theme,icon:i.icon,msg:(i.msg||"").replace(/\n/g,"<br/>"),btns:i.btns,closeIcon:i.closeIcon};try{return t.tmpl.get.call(this,"toastDisplay",n)}finally{e=null,n=null}},d=function(t,e){l&&clearTimeout(l);var d,u={width:t.width};return t.id="ax5-toast-"+a.containerId+"-"+ ++o,jQuery("#"+t.id).get(0)?this:("bottom"==i.left(n.containerPosition,"-")?this.toastContainer.append(r(t.id,t)):this.toastContainer.prepend(r(t.id,t)),d=jQuery("#"+t.id),d.css({width:u.width}),t.toastBox=d,this.queue.push(t),s.call(this,t,{self:this,state:"open",toastId:t.id}),"push"===t.toastType?(setTimeout(function(){this.close(t,e)}.bind(this),n.displayTime),d.find("[data-ax-toast-btn]").on(n.clickEventName,function(i){c.call(this,i||window.event,t,d,e)}.bind(this))):"confirm"===t.toastType&&d.find("[data-ax-toast-btn]").on(n.clickEventName,function(i){c.call(this,i||window.event,t,d,e)}.bind(this)),void(u=null))},c=function(t,e,n,a,o,l){if(o=i.findParentNode(t.target,function(t){if(t.getAttribute("data-ax-toast-btn"))return!0})){l=o.getAttribute("data-ax-toast-btn");var s={key:l,value:e.btns?e.btns[l]:l,toastId:e.id,btn_target:o};e.btns&&e.btns[l].onClick?e.btns[l].onClick.call(s,l):"push"===e.toastType?(a&&a.call(s,l),this.close(e,a)):"confirm"===e.toastType&&(a&&a.call(s,l),this.close(e,a))}t=null,e=null,n=null,a=null,o=null,l=null};this.init=function(){this.onStateChanged=n.onStateChanged,a.containerId=ax5.getGuid();var t=[];n.zIndex&&t.push("z-index:"+n.zIndex),jQuery(document.body).append('<div class="ax5-ui-toast-container '+n.containerPosition+'" data-toast-container="'+a.containerId+'" style="'+t.join(";")+'"></div>'),this.toastContainer=jQuery('[data-toast-container="'+a.containerId+'"]')},this.push=function(t,e){return a.containerId||this.init(),i.isString(t)&&(t={title:n.title,msg:t}),t.toastType="push",a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,d.call(this,t,e),t=null,e=null,this},this.confirm=function(t,e){return a.containerId||this.init(),i.isString(t)&&(t={title:n.title,msg:t}),t.toastType="confirm",a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,"undefined"==typeof t.btns&&(t.btns={ok:{label:n.lang.ok,theme:t.theme}}),d.call(this,t,e),t=null,e=null,this},this.close=function(t,e){"undefined"==typeof t&&(t=i.last(this.queue));var a=t.toastBox;return a.addClass("push"==t.toastType?"removed":"destroy"),this.queue=i.filter(this.queue,function(){return t.id!=this.id}),setTimeout(function(){var i={toastId:t.id};a.remove(),e&&e.call(i),i={self:this,state:"close",toastId:t.id},s.call(this,t,i),0===this.queue.length&&(l&&clearTimeout(l),l=setTimeout(function(){0===this.queue.length&&(o=0)}.bind(this),3e3)),i=null,t=null,e=null,a=null}.bind(this),n.animateTime),this},this.main=function(){e.toast_instance=e.toast_instance||[],e.toast_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.toast}(),function(){var t=ax5.ui.toast,e=function(t){return'\n        <div id="{{toastId}}" data-ax5-ui="toast" class="ax5-ui-toast {{theme}}">\n            {{#icon}}\n            <div class="ax-toast-icon">{{{.}}}</div>\n            {{/icon}}\n            <div class="ax-toast-body">{{{msg}}}</div>\n            {{#btns}}\n            <div class="ax-toast-buttons">\n                <div class="ax-button-wrap">\n                    {{#@each}}\n                    <button type="button" data-ax-toast-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{{@value.label}}}</button>\n                    {{/@each}}\n                </div>\n            </div>\n            {{/btns}}\n            {{^btns}}\n                <a class="ax-toast-close" data-ax-toast-btn="ok">{{{closeIcon}}}</a>\n            {{/btns}}\n            <div style="clear:both;"></div>\n        </div>'};t.tmpl={toastDisplay:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"modal",version:"0.7.9"},function(){var n=function(){var n,a=this,o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},l=function(t){var e=t;return"changedTouches"in t&&(e=t.changedTouches[0]),{clientX:e.clientX,clientY:e.clientY}};this.instanceId=ax5.getGuid(),this.config={id:"ax5-modal-"+this.instanceId,position:{left:"center",top:"middle",margin:10},minimizePosition:"bottom-right",clickEventName:"mousedown",theme:"default",width:300,height:400,closeToEsc:!0,animateTime:250},this.activeModal=null,this.$={},n=this.config;var s=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},r=function(e,i){var n={modalId:e,theme:i.theme,header:i.header,fullScreen:i.fullScreen?"fullscreen":"",styles:[],iframe:i.iframe,iframeLoadingMsg:i.iframeLoadingMsg};return i.zIndex&&n.styles.push("z-index:"+i.zIndex),n.iframe&&"string"==typeof n.iframe.param&&(n.iframe.param=ax5.util.param(n.iframe.param)),t.tmpl.get.call(this,"content",n,{})},d=function(t,e){var d;jQuery(document.body).append(r.call(this,t.id,t)),this.activeModal=jQuery("#"+t.id),this.$={root:this.activeModal.find('[data-modal-els="root"]'),header:this.activeModal.find('[data-modal-els="header"]'),body:this.activeModal.find('[data-modal-els="body"]')},t.iframe&&(this.$["iframe-wrap"]=this.activeModal.find('[data-modal-els="iframe-wrap"]'),this.$.iframe=this.activeModal.find('[data-modal-els="iframe"]'),this.$["iframe-form"]=this.activeModal.find('[data-modal-els="iframe-form"]'),this.$["iframe-loading"]=this.activeModal.find('[data-modal-els="iframe-loading"]')),this.align(),d={self:this,id:t.id,theme:t.theme,width:t.width,height:t.height,state:"open",$:this.$},t.iframe&&(this.$["iframe-wrap"].css({height:t.height}),this.$.iframe.css({height:t.height}),this.$["iframe-form"].attr({method:t.iframe.method}),this.$["iframe-form"].attr({target:t.id+"-frame"}),this.$["iframe-form"].attr({action:t.iframe.url}),this.$.iframe.on("load",function(){d.state="load",t.iframeLoadingMsg&&this.$["iframe-loading"].hide(),s.call(this,t,d)}.bind(this)),t.iframeLoadingMsg||this.$.iframe.show(),this.$["iframe-form"].submit()),e&&e.call(d),s.call(this,t,d),t.closeToEsc&&jQuery(window).bind("keydown.ax-modal",function(t){u.call(this,t||window.event)}.bind(this)),jQuery(window).bind("resize.ax-modal",function(t){this.align(null,t||window.event)}.bind(this)),this.activeModal.find("[data-modal-header-btn]").on(n.clickEventName,function(e){c.call(this,e||window.event,t)}.bind(this)),this.$.header.bind(o.mousedown,function(t){a.mousePosition=l(t),p.on.call(a)}).bind("dragstart",function(t){return i.stopEvent(t),!1})},c=function(t,e,n,a,o){var l;t.srcElement&&(t.target=t.srcElement),a=i.findParentNode(t.target,function(t){if(t.getAttribute("data-modal-header-btn"))return!0}),a&&(o=a.getAttribute("data-modal-header-btn"),l={self:this,key:o,value:e.header.btns[o],dialogId:e.id,btnTarget:a},e.header.btns[o].onClick&&e.header.btns[o].onClick.call(l,o)),l=null,e=null,n=null,a=null,o=null},u=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()},h={"top-left":function(){this.align({left:"left",top:"top"})},"top-right":function(){this.align({left:"right",top:"top"})},"bottom-left":function(){this.align({left:"left",top:"bottom"})},"bottom-right":function(){this.align({left:"right",top:"bottom"})},"center-middle":function(){this.align({left:"center",top:"middle"})}},p={on:function(){var t=this.activeModal.position(),e={width:this.activeModal.outerWidth(),height:this.activeModal.outerHeight()},i={width:jQuery(window).width(),height:jQuery(window).height()},l=function(n){a.__dx=n.clientX-a.mousePosition.clientX,a.__dy=n.clientY-a.mousePosition.clientY;var o=0,l=i.width-e.width,s=0,r=i.height-e.height;return o>t.left+a.__dx?a.__dx=-t.left:l<t.left+a.__dx&&(a.__dx=l-t.left),s>t.top+a.__dy?a.__dy=-t.top:r<t.top+a.__dy&&(a.__dy=r-t.top),{left:t.left+a.__dx+$(document).scrollLeft(),top:t.top+a.__dy+$(document).scrollTop()}};a.__dx=0,a.__dy=0,jQuery(document.body).bind(o.mousemove+".ax5modal-"+n.id,function(i){a.resizer||(a.resizerBg=jQuery('<div class="ax5modal-resizer-background" ondragstart="return false;"></div>'),a.resizer=jQuery('<div class="ax5modal-resizer" ondragstart="return false;"></div>'),a.resizer.css({left:t.left,top:t.top,width:e.width,height:e.height}),jQuery(document.body).append(a.resizerBg).append(a.resizer),a.activeModal.addClass("draged")),a.resizer.css(l(i))}).bind(o.mouseup+".ax5layout-"+this.instanceId,function(t){p.off.call(a)}).bind("mouseleave.ax5layout-"+this.instanceId,function(t){p.off.call(a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){var t=function(){var t=this.activeModal.offset();t.left+=this.__dx-$(document).scrollLeft(),t.top+=this.__dy-$(document).scrollTop(),this.activeModal.css(t)};this.resizer&&(this.activeModal.removeClass("draged"),this.resizer.remove(),this.resizer=null,this.resizerBg.remove(),this.resizerBg=null,t.call(this)),jQuery(document.body).unbind(o.mousemove+".ax5modal-"+n.id).unbind(o.mouseup+".ax5modal-"+n.id).unbind("mouseleave.ax5modal-"+n.id),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}};this.init=function(){this.onStateChanged=n.onStateChanged},this.open=function(t,e){return this.activeModal||(t=a.modalConfig=jQuery.extend(!0,{},n,t),d.call(this,t,e)),this},this.close=function(t){return this.activeModal&&(t=a.modalConfig,this.activeModal.addClass("destroy"),jQuery(window).unbind("keydown.ax-modal"),jQuery(window).unbind("resize.ax-modal"),setTimeout(function(){this.activeModal&&(this.activeModal.remove(),this.activeModal=null),s.call(this,t,{self:this,state:"close"})}.bind(this),n.animateTime)),this.minimized=!1,this},this.minimize=function(){return function(t){if(this.minimized!==!0){var e=a.modalConfig;"undefined"==typeof t&&(t=n.minimizePosition),this.minimized=!0,this.$.body.hide(),a.modalConfig.originalHeight=e.height,a.modalConfig.height=0,h[t].call(this),s.call(this,e,{self:this,state:"minimize"})}return this}}(),this.maximize=function(){var t=a.modalConfig;return this.minimized&&(this.minimized=!1,this.$.body.show(),a.modalConfig.height=a.modalConfig.originalHeight,a.modalConfig.originalHeight=void 0,this.align({left:"center",top:"middle"}),s.call(this,t,{self:this,state:"restore"})),this},this.css=function(t){return this.activeModal&&!a.fullScreen&&(this.activeModal.css(t),t.width&&(a.modalConfig.width=this.activeModal.width()),t.height&&(a.modalConfig.height=this.activeModal.height(),this.$.iframe&&(this.$["iframe-wrap"].css({height:a.modalConfig.height}),this.$.iframe.css({height:a.modalConfig.height})))),this},this.setModalConfig=function(t){return a.modalConfig=jQuery.extend({},a.modalConfig,t),this.align(),this},this.align=function(){return function(t,e){if(!this.activeModal)return this;var n=a.modalConfig,o={width:n.width,height:n.height},l=function(t){return"undefined"!=typeof t&&(i.isFunction(t)?t():void 0)}(n.fullScreen);return l?(n.header&&this.$.header.hide(),o.width=jQuery(window).width(),o.height=n.height,o.left=0,o.top=0):(n.header&&this.$.header.show(),t&&jQuery.extend(!0,n.position,t),n.header&&(o.height+=this.$.header.outerHeight()),"left"==n.position.left?o.left=n.position.margin||0:"right"==n.position.left?o.left=jQuery(window).width()-o.width-(n.position.margin||0):"center"==n.position.left?o.left=jQuery(window).width()/2-o.width/2:o.left=n.position.left||0,"top"==n.position.top?o.top=n.position.margin||0:"bottom"==n.position.top?o.top=jQuery(window).height()-o.height-(n.position.margin||0):"middle"==n.position.top?o.top=jQuery(window).height()/2-o.height/2:o.top=n.position.top||0,o.left<0&&(o.left=0),o.top<0&&(o.top=0)),this.activeModal.css(o),n.iframe&&(this.$["iframe-wrap"].css({height:o.height}),this.$.iframe.css({height:o.height})),this}}(),this.main=function(){e.modal_instance=e.modal_instance||[],e.modal_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.modal}(),function(){var t=ax5.ui.modal,e=function(){return' \n        <div id="{{modalId}}" data-modal-els="root" class="ax5modal {{theme}} {{fullscreen}}" style="{{styles}}">\n            {{#header}}\n            <div class="ax-modal-header" data-modal-els="header">\n                {{{title}}}\n                {{#btns}}\n                    <div class="ax-modal-header-addon">\n                    {{#@each}}\n                    <a tabindex="-1" data-modal-header-btn="{{@key}}" class="{{@value.theme}}">{{{@value.label}}}</a>\n                    {{/@each}}\n                    </div>\n                {{/btns}}\n            </div>\n            {{/header}}\n            <div class="ax-modal-body" data-modal-els="body">\n            {{#iframe}}\n            \n                <div data-modal-els="iframe-wrap" style="-webkit-overflow-scrolling: touch; overflow: auto;position: relative;">\n                    <table data-modal-els="iframe-loading" style="width:100%;height:100%;"><tr><td style="text-align: center;vertical-align: middle">{{{iframeLoadingMsg}}}</td></tr></table>\n                    <iframe name="{{modalId}}-frame" src="" width="100%" height="100%" frameborder="0" data-modal-els="iframe" style="position: absolute;left:0;top:0;"></iframe>\n                </div>\n                <form name="{{modalId}}-form" data-modal-els="iframe-form">\n                <input type="hidden" name="modalId" value="{{modalId}}" />\n                {{#param}}\n                {{#@each}}\n                <input type="hidden" name="{{@key}}" value="{{@value}}" />\n                {{/@each}}\n                {{/param}}\n                </form>\n            {{/iframe}}\n            </div>\n        </div>\n        '};t.tmpl={content:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"calendar",version:"0.9.0"},function(){var n=function(){var n,a=this,o=1;this.instanceId=ax5.getGuid(),this.target=null,this.selection=[],this.selectionMap={},this.selectableMap={},this.markerMap={},this.printedDay={start:"",end:""},this.config={clickEventName:"click",theme:"default",mode:"day",dateFormat:"yyyy-MM-dd",displayDate:new Date,animateTime:250,dimensions:{controlHeight:"40",controlButtonWidth:"40",colHeadHeight:"30",itemPadding:2},lang:{yearHeading:"Choose the year",monthHeading:"Choose the month",yearTmpl:"%s",months:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],dayTmpl:"%s"},multipleSelect:!1,selectMode:"day",defaultMarkerTheme:"holiday",defaultPeriodTheme:"period"},n=this.config;var l=function(t,e){t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),e=null},s=function(){var e=jQuery.extend(!0,{},n,{controlCSS:{},controlButtonCSS:{}});e.controlButtonCSS.height=e.controlCSS.height=i.cssNumber(n.dimensions.controlHeight),e.controlButtonCSS["line-height"]=e.controlCSS["line-height"]=i.cssNumber(n.dimensions.controlHeight),e.controlButtonCSS.width=i.cssNumber(n.dimensions.controlHeight),e.controlCSS=i.css(e.controlCSS),e.controlButtonCSS=i.css(e.controlButtonCSS);try{return t.tmpl.get.call(this,"frameTmpl",e)}finally{e=null}},r=function(){var t,e,a=i.date(n.displayDate),o="",l="";return n.control&&("day"==n.mode||"d"==n.mode?(o=n.control.yearTmpl?n.control.yearTmpl.replace("%s",a.getFullYear()):a.getFullYear(),l=n.control.monthTmpl?n.control.monthTmpl.replace("%s",n.lang.months[a.getMonth()]):n.lang.months[a.getMonth()],this.$["control-display"].html(function(){return n.control.yearFirst?'<span data-calendar-display="year">'+o+'</span><span data-calendar-display="month">'+l+"</span>":'<span data-calendar-display="month">'+l+'</span><span data-calendar-display="year">'+o+"</span>"}())):"month"==n.mode||"m"==n.mode?(o=n.control.yearTmpl?n.control.yearTmpl.replace("%s",a.getFullYear()):a.getFullYear(),this.$["control-display"].html('<span data-calendar-display="year">'+o+"</span>")):"year"!=n.mode&&"y"!=n.mode||(t=n.control.yearTmpl?n.control.yearTmpl.replace("%s",a.getFullYear()-10):a.getFullYear()-10,e=n.control.yearTmpl?n.control.yearTmpl.replace("%s",Number(a.getFullYear())+9):Number(a.getFullYear())+9,this.$["control-display"].html(t+" ~ "+e)),this.$["control-display"].find("[data-calendar-display]").on(n.clickEventName,function(t){var e,n=i.findParentNode(t.target,function(t){if(t.getAttribute("data-calendar-display"))return!0});n&&(e=n.getAttribute("data-calendar-display"),this.changeMode(e)),n=null,e=null}.bind(this))),a=null,o=null,l=null,t=null,e=null,this},d=function(e){var o,s,d,c,u,p=i.date(e),f=new Date(p.getFullYear(),p.getMonth(),1,12),g=n.displayDate,m=function(){var t=f.getDay();0==t&&(t=7);try{return i.date(f,{add:{d:-t}})}finally{t=null}}(),x=p.getMonth(),v={},b=this.$.body.width(),y=Math.floor(b*(6/7));for(n.dimensions.height&&(y=i.number(n.dimensions.height)-i.number(n.dimensions.colHeadHeight)),v.height=Math.floor(y/6)-2*i.number(n.dimensions.itemPadding)+"px",v["line-height"]=v.height,v.padding=i.cssNumber(n.dimensions.itemPadding),c={weekNames:[].concat(ax5.info.weekNames),list:[]},c.weekNames.forEach(function(t){t.colHeadHeight=i.cssNumber(n.dimensions.colHeadHeight)}),o=m,s=0;s<6;){for(d=0;d<7;){var w=""+i.date(o,{"return":n.dateFormat}),_={row:s,col:d,isStartOfWeek:0==d,thisDate:""+w,thisDataLabel:n.lang.dayTmpl.replace("%s",o.getDate()),itemStyles:i.css(v),addClass:function(){return n.selectable?a.selectableMap[w]?o.getMonth()==x?"live":"":"disable":o.getMonth()==x?w==i.date(g,{"return":"yyyyMMdd"})?"focus":"live":""}()+" "+function(){return a.markerMap[w]?a.markerMap[w].theme||n.defaultMarkerTheme:""}()+" "+function(){return a.selectionMap[w]?"selected-day":""}()};c.list.push(_),d++,o=i.date(o,{add:{d:1}}),w=null,_=null}s++}u=t.tmpl.get.call(this,"dayTmpl",c),this.$.body.html(u),this.$.body.find("[data-calendar-item-date]").on(n.clickEventName,function(t){t=t||window.event,h.call(a,t,"date"),i.stopEvent(t)}),this.printedDay={start:m,end:o},l.call(this,null,{self:this,action:"printDay",printedDay:this.printedDay}),r.call(this),p=null,f=null,g=null,m=null,o=null,x=null,v=null,s=null,d=null,b=null,y=null,c=null,u=null},c=function(e){var o,s,d,c,u,p,f=i.date(e),g=f.getMonth(),m={},x=this.$.body.width(),v=Math.floor(x*(6/7));for(n.dimensions.height&&(v=i.number(n.dimensions.height)-i.number(n.dimensions.colHeadHeight)),m.height=Math.floor(v/4)-2*i.number(n.dimensions.itemPadding)+"px",m["line-height"]=m.height,m.padding=i.cssNumber(n.dimensions.itemPadding),u={colHeadHeight:i.cssNumber(n.dimensions.colHeadHeight),colHeadLabel:n.lang.monthHeading,list:[]},c=0,d=0,o=0;o<4;){for(s=0;s<3;){var b={row:o,col:s,isStartOfRow:0==s,thisMonth:f.getFullYear()+"-"+i.setDigit(d+1,2)+"-"+i.setDigit(f.getDate(),2),thisMonthLabel:n.lang.months[d],itemStyles:i.css(m),addClass:function(){return n.selectable?a.selectableMap[d]?"live":"disable":"live"}()+" "+function(){return d==g?"focus":""}()+" "+function(){return a.markerMap[d]?a.markerMap[d].theme||n.defaultMarkerTheme:""}()};u.list.push(b),d++,s++,b=null}o++}p=t.tmpl.get.call(this,"monthTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-month]").on(n.clickEventName,function(t){t=t||window.event,h.call(a,t,"month"),i.stopEvent(t)}),this.printedDay={start:f.getFullYear()+"-"+i.setDigit(c+1,2),end:f.getFullYear()+"-"+i.setDigit(d,2)},l.call(this,null,{self:this,action:"printMonth",printedDay:this.printedDay}),r.call(this),f=null,g=null,m=null,o=null,s=null,d=null,c=null,x=null,v=null,u=null,p=null},u=function(e){var o,s,d,c,u,p,f=i.date(e),g=f.getFullYear(),m={},x=this.$.body.width(),v=Math.floor(x*(6/7));for(n.dimensions.height&&(v=i.number(n.dimensions.height)-i.number(n.dimensions.colHeadHeight)),m.height=Math.floor(v/5)-2*i.number(n.dimensions.itemPadding)+"px",m["line-height"]=m.height,m.padding=i.cssNumber(n.dimensions.itemPadding),u={colHeadHeight:i.cssNumber(n.dimensions.colHeadHeight),colHeadLabel:n.lang.yearHeading,list:[]},c=g-10,d=g-10,o=0;o<5;){for(s=0;s<4;){var b={row:o,col:s,isStartOfRow:0==s,thisYear:d+"-"+i.setDigit(f.getMonth()+1,2)+"-"+i.setDigit(f.getDate(),2),thisYearLabel:n.lang.yearTmpl.replace("%s",d),itemStyles:i.css(m),addClass:function(){return n.selectable?a.selectableMap[d]?"live":"disable":"live"}()+" "+function(){return d==g?"focus":""}()+" "+function(){return a.selectableMap[d]?a.selectableMap[d].theme||n.defaultMarkerTheme:""}()};u.list.push(b),d++,s++,b=null}o++}p=t.tmpl.get.call(this,"yearTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-year]").on(n.clickEventName,function(t){t=t||window.event,h.call(this,t,"year"),i.stopEvent(t)}),this.printedDay={start:c,end:d-1},l.call(this,null,{self:this,action:"printYear",printedDay:this.printedDay}),r.call(this),f=null,g=null,m=null,o=null,s=null,d=null,c=null,x=null,v=null,u=null,p=null},h=function(t,e,l,s){var r,d,c;e=e||"date",l=i.findParentNode(t.target,function(t){if(t.getAttribute("data-calendar-item-"+e))return!0}),l&&(s=l.getAttribute("data-calendar-item-"+e),d=i.date(s,{"return":n.dateFormat}),c=!0,o=n.multipleSelect?i.isNumber(n.multipleSelect)?n.multipleSelect:2:1,n.selectable&&(a.selectableMap[d]||(c=!1)),"date"==e?c&&(a.selection.length>=o&&(r=a.selection.splice(0,a.selection.length-(o-1)),r.forEach(function(t){a.$.body.find('[data-calendar-item-date="'+i.date(t,{"return":n.dateFormat})+'"]').removeClass("selected-day")})),jQuery(l).addClass("selected-day"),a.selection.push(s),a.onClick&&a.onClick.call({self:this,date:s,target:this.target,dateElement:l})):"month"==e?"month"==n.selectMode?c&&(a.selection.length>=o&&(r=a.selection.splice(0,a.selection.length-(o-1)),r.forEach(function(t){a.$.body.find('[data-calendar-item-month="'+i.date(t,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-month")})),jQuery(l).addClass("selected-month"),a.selection.push(s),a.onClick&&a.onClick.call({self:this,date:s,target:this.target,dateElement:l})):a.changeMode("day",s):"year"==e&&("year"==n.selectMode?c&&(a.selection.length>=o&&(r=a.selection.splice(0,a.selection.length-(o-1)),r.forEach(function(t){a.$.body.find('[data-calendar-item-year="'+i.date(t,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-year")})),jQuery(l).addClass("selected-year"),a.selection.push(s),a.onClick&&a.onClick.call({self:this,date:s,target:this.target,dateElement:l})):a.changeMode("month",s))),e=null,l=null,s=null,r=null,d=null,c=null},p=function(t,e,a){e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-calendar-move"))return!0}),e&&(a=e.getAttribute("data-calendar-move"),"day"==n.mode?("left"==a?n.displayDate=i.date(n.displayDate,{add:{m:-1}}):n.displayDate=i.date(n.displayDate,{add:{m:1}}),d.call(this,n.displayDate)):"month"==n.mode?("left"==a?n.displayDate=i.date(n.displayDate,{add:{y:-1}}):n.displayDate=i.date(n.displayDate,{add:{y:1}}),c.call(this,n.displayDate)):"year"==n.mode&&("left"==a?n.displayDate=i.date(n.displayDate,{add:{y:-10}}):n.displayDate=i.date(n.displayDate,{add:{y:10}}),u.call(this,n.displayDate))),e=null,a=null},f=function(){setTimeout(function(){if("day"===n.mode||"d"===n.mode)for(var t in this.markerMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.markerMap[t].theme||n.defaultMarkerTheme)}.bind(this))},g=function(){setTimeout(function(){for(var t in this.selectionMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass("selected-day")}.bind(this))},m=function(){setTimeout(function(){if("day"===n.mode||"d"===n.mode)for(var t in this.periodMap)this.periodMap[t].label&&this.$.body.find('[data-calendar-item-date="'+t+'"]').find(".addon-footer").html(this.periodMap[t].label),this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.periodMap[t].theme)}.bind(this))},x=function(){if("day"===n.mode||"d"===n.mode)for(var t in this.periodMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').find(".addon-footer").empty(),this.$.body.find('[data-calendar-item-date="'+t+'"]').removeClass(this.periodMap[t].theme)};this.init=function(){this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,n.target||console.log(ax5.info.getError("ax5calendar","401","setConfig")),this.target=jQuery(n.target),n.displayDate=i.date(n.displayDate),this.target.html(s.call(this)),this.$={root:this.target.find('[data-calendar-els="root"]'),control:this.target.find('[data-calendar-els="control"]'),"control-display":this.target.find('[data-calendar-els="control-display"]'),body:this.target.find('[data-calendar-els="body"]')},n.control&&this.$.control.find("[data-calendar-move]").on(n.clickEventName,function(t){p.call(this,t||window.event)}.bind(this)),n.selection&&this.setSelection(n.selection,!1),n.selectable&&this.setSelectable(n.selectable,!1),n.marker&&this.setMarker(n.marker,!1),setTimeout(function(){"day"===n.mode||"d"===n.mode?d.call(this,n.displayDate):"month"===n.mode||"m"===n.mode?c.call(this,n.displayDate):"year"!==n.mode&&"y"!==n.mode||u.call(this,n.displayDate)}.bind(this))},this.changeMode=function(t,e){return"undefined"!=typeof e&&(n.displayDate=e),t&&(n.mode=t),this.$.body.removeClass("fadein").addClass("fadeout"),setTimeout(function(){"day"==n.mode||"d"==n.mode?d.call(this,n.displayDate):"month"==n.mode||"m"==n.mode?c.call(this,n.displayDate):"year"!=n.mode&&"y"!=n.mode||u.call(this,n.displayDate),this.$.body.removeClass("fadeout").addClass("fadein")}.bind(this),n.animateTime),this},this.setSelection=function(){a.selectionMap={};var t={arr:function(t,e,o){return e={},i.isArray(t)?(a.selection=t=t.splice(0,o),t.forEach(function(t){i.isDate(t)&&(t=i.date(t,{"return":n.dateFormat})),e[t]=!0}),e):e}};return function(e,a){var l={};if(o=n.multipleSelect?i.isNumber(n.multipleSelect)?n.multipleSelect:2:1,n.selection=e){if(!i.isArray(e))return this;l=t.arr(e,{},o)}return this.selectionMap=jQuery.extend({},l),a!==!1&&g.call(this),l=null,this}}(),this.getSelection=function(){return this.selection},this.setSelectable=function(){a.selectableMap={};var t={arr:function(t,e){return e={},i.isArray(t)?(t.forEach(function(t){i.isDate(t)&&(t=i.date(t,{"return":n.dateFormat})),e[t]=!0}),e):e},obj:function(t,e){if(e={},i.isArray(t))return e;if(t.range)return e;for(var n in t)e[n]=t[n];return e},range:function(t,e){return e={},i.isArray(t)?e:t.range?(t.range.forEach(function(t){if(i.isDateFormat(t.from)&&i.isDateFormat(t.to))for(var a=i.date(t.from);a<=i.date(t.to);a.setDate(a.getDate()+1))e[i.date(a,{"return":n.dateFormat})]=!0;else for(var o=t.from;o<=t.to;o++)e[o]=!0}),e):e}};return function(e,a){var o,l={};if(n.selectable=e)if(i.isArray(e))l=t.arr(e);else{for(o in t)if(e[o]){l=t[o](e);break}0===Object.keys(l).length&&(l=t.obj(e));
}return this.selectableMap=l,a!==!1&&this.changeMode(),this}}(),this.setMarker=function(){a.markerMap={};var t={obj:function(t,e){if(e={},i.isArray(t))return e;if(t.range)return e;for(var n in t)e[n]=t[n];return t=null,e},range:function(t,e){return e={},i.isArray(t)?e:t.range?(t.range.forEach(function(t){if(i.isDateFormat(t.from)&&i.isDateFormat(t.to))for(var a=i.date(t.from);a<=i.date(t.to);a.setDate(a.getDate()+1))e[i.date(a,{"return":n.dateFormat})]={theme:t.theme,label:t.label};else for(var o=t.from;o<=t.to;o++)e[o]={theme:t.theme,label:t.label}}),t=null,e):e}};return function(e,i){var a,o={};if(n.marker=e){for(a in t)if(e[a]){o=t[a](e);break}0===Object.keys(o).length&&(o=t.obj(e))}return this.markerMap=o,i!==!1&&f.call(this),this}}(),this.setPeriod=function(){a.periodMap={};var t={range:function(t,e){return e={},i.isArray(t)?e:t.range?(t.range.forEach(function(t){if(i.isDateFormat(t.from)&&i.isDateFormat(t.to))for(var a=new Date(i.date(t.from));a<=i.date(t.to);a.setDate(a.getDate()+1))a.getTime()==i.date(t.from).getTime()?e[i.date(a,{"return":n.dateFormat})]={theme:t.theme||n.defaultPeriodTheme,label:t.fromLabel}:a.getTime()==i.date(t.to).getTime()?e[i.date(a,{"return":n.dateFormat})]={theme:t.theme||n.defaultPeriodTheme,label:t.toLabel}:e[i.date(a,{"return":n.dateFormat})]={theme:t.theme||n.defaultPeriodTheme}}),t=null,e):e}};return function(e,i){var a={};return i!==!1&&x.call(this),(n.period=e)&&(a=t.range(e)),this.periodMap=a,i!==!1&&m.call(this),this}}(),this.main=function(){e.calendar_instance=e.calendar_instance||[],e.calendar_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.calendar}(),function(){var t=ax5.ui.calendar,e=function(t){return'\n                <div class="ax5-ui-calendar {{theme}}" data-calendar-els="root" onselectstart="return false;">\n                    {{#control}}\n                    <div class="calendar-control" data-calendar-els="control" style="{{controlCSS}}">\n                        <a class="date-move-left" data-calendar-move="left" style="{{controlButtonCSS}}">{{{left}}}</a>\n                        <div class="date-display" data-calendar-els="control-display" style="{{controlCSS}}"></div>\n                        <a class="date-move-right" data-calendar-move="right" style="{{controlButtonCSS}}">{{{right}}}</a>\n                    </div>\n                    {{/control}}\n                    <div class="calendar-body" data-calendar-els="body"></div>\n                </div>\n                '},i=function(t){return'\n                <table data-calendar-table="day" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                        {{#weekNames}}\n                            <td class="calendar-col-{{col}}" style="height: {{colHeadHeight}}">\n                            {{label}}\n                            </td>\n                        {{/weekNames}}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfWeek}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfWeek}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-day {{addClass}}" data-calendar-item-date="{{thisDate}}">\n                                    <span class="addon addon-header"></span>\n                                    {{thisDataLabel}}\n                                    <span class="addon addon-footer"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},n=function(t){return'\n                <table data-calendar-table="month" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="3" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-month {{addClass}}" data-calendar-item-month="{{thisMonth}}">\n                                    <span class="addon"></span>\n                                    {{thisMonthLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},a=function(t){return'\n                <table data-calendar-table="year" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="4" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-year {{addClass}}" data-calendar-item-year="{{thisYear}}">\n                                    <span class="addon"></span>\n                                    {{thisYearLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '};t.tmpl={frameTmpl:e,dayTmpl:i,monthTmpl:n,yearTmpl:a,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"picker",version:"0.8.0"},function(){var e=function(){var e,n=this;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:100,calendar:{control:{left:ax5.def.picker.date_leftArrow||"&#x02190",yearTmpl:ax5.def.picker.date_yearTmpl||"%s",monthTmpl:ax5.def.picker.date_monthTmpl||"%s",right:ax5.def.picker.date_rightArrow||"&#x02192",yearFirst:!0}}},this.queue=[],this.activePicker=null,this.activePickerQueueIndex=-1,this.openTimer=null,this.closeTimer=null,e=this.config;var a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},o=function(){var t={focus:function(t,e){this.open(t)},click:function(t,e){this.open(t)}},n={"@fn":function(t,i){var n=this.queue[t],a=i.length,o={inputLength:a||1};a>1&&(o.btns={ok:{label:e.lang.ok,theme:e.theme}}),this.queue[t]=jQuery.extend(!0,o,n),o=null,a=null},date:function(t,i){var n=this.queue[t],a=n.content?n.content.width||270:270,o=n.content?n.content.margin||5:5,l=i.length,s={contentWidth:a*l+(l-1)*o,content:{width:a,margin:o},inputLength:l||1};l>1&&!n.btns&&(s.btns={ok:{label:e.lang.ok,theme:e.theme}}),this.queue[t]=jQuery.extend(!0,s,n),a=null,o=null,s=null,l=null},"secure-num":function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=jQuery.extend(!0,a,i),a=null,n=null},keyboard:function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=jQuery.extend(!0,a,i),a=null,n=null},numpad:function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=jQuery.extend(!0,a,i),a=null,n=null}};return function(e){var a,o=this.queue[e];if(!o.content)return console.log(ax5.info.getError("ax5picker","501","bind")),this;if(a="INPUT"==o.$target.get(0).tagName.toUpperCase()?o.$target:o.$target.find("input[type]"),i.isFunction(o.content))n["@fn"].call(this,e,a);else for(var l in n)if(o.content.type==l){n[l].call(this,e,a);break}return a.unbind("focus.ax5picker").unbind("click.ax5picker").bind("focus.ax5picker",t.focus.bind(this,e)).bind("click.ax5picker",t.click.bind(this,e)),o.$target.find(".input-group-addon").unbind("click.ax5picker").bind("click.ax5picker",t.click.bind(this,e)),o.content.formatter&&ax5.ui.formatter&&a.ax5formatter(o.content.formatter),a=null,o=null,e=null,this}}(),l=function(t){if(!this.activePicker)return this;var e=function(e){var i,n=jQuery(window),a=jQuery(document.body),o={},l=12,s={},r={};o=e.$target.offset(),s={width:e.$target.outerWidth(),height:e.$target.outerHeight()},r={winWidth:Math.max(n.width(),a.width()),winHeight:Math.max(n.height(),a.height()),width:this.activePicker.outerWidth(),height:this.activePicker.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction?i=e.direction:(i="top",o.top-r.height-l<0?i="top":o.top+s.height+r.height+l>r.winHeight&&(i="bottom")),t&&this.activePicker.addClass("direction-"+i);var d=function(){var t={left:0,top:0};switch(i){case"top":t.left=o.left+s.width/2-r.width/2,t.top=o.top+s.height+l;break;case"bottom":t.left=o.left+s.width/2-r.width/2,t.top=o.top-r.height-l;break;case"left":t.left=o.left+s.width+l,t.top=o.top-r.height/2+s.height/2;break;case"right":t.left=o.left-r.width-l,t.top=o.top-r.height/2+s.height/2}return t}();(function(){"top"!=i&&"bottom"!=i||(d.left<0?(d.left=l,this.activePickerArrow.css({left:o.left+s.width/2-d.left})):d.left+r.width>r.winWidth&&(d.left=r.winWidth-r.width-l,this.activePickerArrow.css({left:o.left+s.width/2-d.left})))}).call(this),this.activePicker.css(d)},i=this.queue[this.activePickerQueueIndex];t&&jQuery(document.body).append(this.activePicker),setTimeout(function(){e.call(this,i)}.bind(this))},s=function(t,e){if(!this.activePicker)return this;var n=this.queue[this.activePickerQueueIndex];return e=i.findParentNode(t.target,function(t){return!!t.getAttribute("data-picker-els")||(n.$target.get(0)==t||void 0)}),e?this:(this.close(),this)},r=function(t,e){if(t.srcElement&&(t.target=t.srcElement),e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-picker-btn"))return!0})){var n=this.queue[this.activePickerQueueIndex],a=e.getAttribute("data-picker-btn");if(n.btns&&n.btns[a].onClick){var o={key:a,value:n.btns[a],self:this,item:n};n.btns[a].onClick.call(o,a)}else this.close()}},d=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()},c=function(t){return i.isString(t)||(t=jQuery(t).data("data-axpicker-id")),i.isString(t)?i.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5picker","402","getQueIdx"))};this.init=function(){this.onStateChanged=e.onStateChanged},this.bind=function(t){var n,a={};return t=jQuery.extend(!0,a,e,t),t.target?(t.$target=jQuery(t.target),t.$target.get(0)?(t.id||(t.id=t.$target.data("data-axpicker-id")),t.id||(t.id="ax5-picker-"+ax5.getGuid(),t.$target.data("data-axpicker-id",t.id)),n=i.search(this.queue,function(){return this.id==t.id}),n===-1?(this.queue.push(t),o.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],t),o.call(this,n)),a=null,n=null,this):(console.log(ax5.info.getError("ax5picker","401","bind")),this)):(console.log(ax5.info.getError("ax5picker","401","bind")),this)},this.setContentValue=function(t,e,o){var l,s=i.isNumber(t)?t:c.call(this,t),r=this.queue[s];return r&&(l="INPUT"==r.$target.get(0).tagName.toUpperCase()?r.$target:jQuery(r.$target.find("input[type]").get(e)),l.val(o),a.call(this,r,{self:n,state:"changeValue",item:r,value:o}),1==r.inputLength&&this.close()),r=null,t=null,e=null,o=null,this},this.open=function(){var o={"@fn":function(t,e){var i=this.queue[t];return i.content.call(i,function(t){e(t)}),!0},date:function(t){for(var a=this.queue[t],o=[],l=0;l<a.inputLength;l++)o.push('<div style="width:'+i.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-calendar-target="'+l+'"></div>'),l<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join(""));var s=jQuery.extend({},e.calendar,{displayDate:new Date}),r="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:a.$target.find("input[type]");a.pickerContent.find("[data-calendar-target]").each(function(){var t=this.getAttribute("data-calendar-target"),e=r.get(t).value,i=ax5.util.date(e);s.displayDate=i,e&&(s.selection=[i]),s=jQuery.extend(!0,s,a.content.config||{}),s.target=this,s.onClick=function(){n.setContentValue(a.id,t,this.date)},new ax5.ui.calendar(s)})},"secure-num":function(t){for(var e=this.queue[t],o=[],l=0;l<e.inputLength;l++)o.push('<div style="width:'+i.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-secure-num-target="'+l+'"></div>'),l<e.inputLength-1&&o.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),e.pickerContent.html(o.join("")),e.pickerContent.find("[data-secure-num-target]").each(function(){var t=this.getAttribute("data-secure-num-target"),i=[],o=function(t){var e,i,n;for(n=t.length;n;n-=1)e=Math.floor(Math.random()*n),i=t[n-1],t[n-1]=t[e],t[e]=i;return t}([0,1,2,3,4,5,6,7,8,9]),l=[{label:"&#x02190",fn:"back"},{label:"C",fn:"clear"}];o.forEach(function(t){i.push('<div style="float:left;'+e.content.config.btnWrapStyle+'">'),i.push('<button class="btn btn-default btn-'+e.content.config.btnTheme+'" style="'+e.content.config.btnStyle+'" data-secure-num-value="'+t+'">'+t+"</button>"),i.push("</div>")}),l.forEach(function(t){i.push('<div style="float:left;'+e.content.config.btnWrapStyle+'">'),i.push('<button class="btn btn-default btn-'+e.content.config.specialBtnTheme+'" style="'+e.content.config.btnStyle+'" data-secure-num-value="'+t.fn+'">'+t.label+"</button>"),i.push("</div>")}),i.push('<div style="clear:both;"></div>'),$(this).html(i.join("")).on("click","[data-secure-num-value]",function(){var i=this.getAttribute("data-secure-num-value"),o="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:jQuery(e.$target.find("input[type]").get(t)),l=o.val();"back"==i?o.val(l.substring(0,l.length-1)):"clear"==i?o.val(""):o.val(l+i),a.call(this,e,{self:n,state:"changeValue",item:e,value:o.val()})})})},keyboard:function(t){for(var e=this.queue[t],o=[],l=0;l<e.inputLength;l++)o.push('<div style="width:'+i.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-keyboard-target="'+l+'"></div>'),l<e.inputLength-1&&o.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),e.pickerContent.html(o.join(""));var s=[[{value:"`",shiftValue:"~"},{value:"1",shiftValue:"!"},{value:"2",shiftValue:"@"},{value:"3",shiftValue:"#"},{value:"4",shiftValue:"$"},{value:"5",shiftValue:"%"},{value:"6",shiftValue:"^"},{value:"7",shiftValue:"&"},{value:"8",shiftValue:"*"},{value:"9",shiftValue:"("},{value:"0",shiftValue:")"},{value:"-",shiftValue:"_"},{value:"=",shiftValue:"+"},{label:"&#x02190",fn:"back"}],[{value:"q",shiftValue:"Q"},{value:"w",shiftValue:"W"},{value:"e",shiftValue:"E"},{value:"r",shiftValue:"R"},{value:"t",shiftValue:"T"},{value:"y",shiftValue:"Y"},{value:"u",shiftValue:"U"},{value:"i",shiftValue:"I"},{value:"o",shiftValue:"O"},{value:"p",shiftValue:"P"},{value:"[",shiftValue:"{"},{value:"]",shiftValue:"}"},{value:"\\",shiftValue:"|"}],[{label:"Clear",fn:"clear"},{value:"a",shiftValue:"A"},{value:"s",shiftValue:"S"},{value:"d",shiftValue:"D"},{value:"f",shiftValue:"F"},{value:"g",shiftValue:"G"},{value:"h",shiftValue:"H"},{value:"j",shiftValue:"J"},{value:"k",shiftValue:"K"},{value:"l",shiftValue:"L"},{value:";",shiftValue:":"},{value:"'",shiftValue:'"'}],[{label:"Shift",fn:"shift"},{value:"z",shiftValue:"Z"},{value:"x",shiftValue:"X"},{value:"c",shiftValue:"C"},{value:"v",shiftValue:"V"},{value:"b",shiftValue:"B"},{value:"n",shiftValue:"N"},{value:"m",shiftValue:"M"},{value:",",shiftValue:"<"},{value:".",shiftValue:">"},{value:"/",shiftValue:"?"},{label:"Close",fn:"close"}]],r=function(t){var i=[];return s.forEach(function(n){i.push('<div style="display: table;margin:0 auto;">'),n.forEach(function(n){var a,o,l,s,r;n.fn?(a=n.fn,o=n.label,l=e.content.config.specialBtnWrapStyle,s=e.content.config.specialBtnTheme,r=e.content.config.specialBtnStyle):(o=a=t?n.shiftValue:n.value,l=e.content.config.btnWrapStyle,s=e.content.config.btnTheme,r=e.content.config.btnStyle),i.push('<div style="display: table-cell;'+l+'">'),i.push('<button class="btn btn-default btn-'+s+'" style="'+r+'" data-keyboard-value="'+a+'">'+o+"</button>"),i.push("</div>")}),i.push("</div>")}),i.join("")};e.pickerContent.find("[data-keyboard-target]").each(function(){var t=this.getAttribute("data-keyboard-target"),i=$(this),o=!1,l=function(){o=!o,i.html(r(o))};i.html(r(o)).on("mousedown","[data-keyboard-value]",function(){var i=this.getAttribute("data-keyboard-value"),o="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:jQuery(e.$target.find("input[type]").get(t)),s=o.val();switch(i){case"back":o.val(s.substring(0,s.length-1));break;case"clear":o.val("");break;case"shift":return l(),!1;case"close":return n.close(),!1;default:o.val(s+i)}a.call(this,e,{self:n,state:"changeValue",item:e,value:o.val()})})})},numpad:function(t){for(var e=this.queue[t],o=[],l=0;l<e.inputLength;l++)o.push('<div style="width:'+i.cssNumber(e.content.width)+';float:left;" class="ax-picker-content-box" data-numpad-target="'+l+'"></div>'),l<e.inputLength-1&&o.push('<div style="width:'+e.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),e.pickerContent.html(o.join("")),e.pickerContent.find("[data-numpad-target]").each(function(){var t=this.getAttribute("data-numpad-target"),i=[],o=e.content.config.keyArray||[{value:"7"},{value:"8"},{value:"9"},{label:"BS",fn:"back"},{value:"4"},{value:"5"},{value:"6"},{label:"CLS",fn:"clear"},{value:"1"},{value:"2"},{value:"3"},{value:""},{value:"."},{value:"0"},{value:""},{label:"OK",fn:"enter"}];o.forEach(function(t){var n,a,o,l,s;t.fn?(n=t.fn,a=t.label,l=e.content.config.specialBtnTheme,o=e.content.config.specialBtnWrapStyle,s=e.content.config.specialBtnStyle):(a=n=t.value,l=n?e.content.config.btnTheme:"",o=e.content.config.btnWrapStyle,s=e.content.config.btnStyle),i.push('<div style="float:left;'+o+'">'),i.push('<button class="btn btn-default btn-'+l+'" style="'+s+'" data-numpad-value="'+n+'">'+(a||"&nbsp;")+"</button>"),i.push("</div>")}),i.push('<div style="clear:both;"></div>'),$(this).html(i.join("")).on("mousedown","[data-numpad-value]",function(){var i=this.getAttribute("data-numpad-value"),o="INPUT"==e.$target.get(0).tagName.toUpperCase()?e.$target:jQuery(e.$target.find("input[type]").get(t)),l=o.val(),s="";switch(i){case"back":s="changeValue",o.val(l.substring(0,l.length-1));break;case"clear":s="changeValue",o.val("");break;case"enter":return n.close(e,"enter"),!1;case"close":return n.close(),!1;default:s="changeValue",o.val(l+i)}a.call(this,e,{self:n,state:s,item:e,value:o.val()})})})}};return function(n,u){var h=i.isNumber(n)?n:c.call(this,n),p=this.queue[h];return this.openTimer&&clearTimeout(this.openTimer),this.activePicker?this.activePickerQueueIndex==h?this:u>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(u||0)+1)}.bind(this),e.animateTime),this):(this.activePicker=jQuery(t.tmpl.get.call(this,"pickerTmpl",p)),this.activePickerArrow=this.activePicker.find(".ax-picker-arrow"),this.activePickerQueueIndex=h,p.pickerContent=this.activePicker.find('[data-picker-els="content"]'),i.isFunction(p.content)?(p.pickerContent.html("Loading.."),o["@fn"].call(this,h,function(t){p.pickerContent.html(t)})):p.content.type in o&&o[p.content.type].call(this,h),this.activePicker.find("[data-picker-btn]").on(e.clickEventName,function(t){r.call(this,t||window.event,h)}.bind(this)),l.call(this,"append"),jQuery(window).bind("resize.ax5picker",function(){l.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5picker",function(t){t=t||window.event,d.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5picker",function(t){t=t||window.event,s.call(this,t),i.stopEvent(t)}.bind(this)),a.call(this,p,{self:this,state:"open",item:p}),this)}}(),this.close=function(t,i){return this.closeTimer&&clearTimeout(this.closeTimer),this.activePicker?(t=this.queue[this.activePickerQueueIndex],this.activePicker.addClass("destroy"),jQuery(window).unbind("resize.ax5picker"),jQuery(window).unbind("click.ax5picker"),jQuery(window).unbind("keyup.ax5picker"),this.closeTimer=setTimeout(function(){this.activePicker&&this.activePicker.remove(),this.activePicker=null,this.activePickerQueueIndex=-1,a.call(this,t,{self:this,state:i||"close"})}.bind(this),e.animateTime),this):this},this.main=function(){arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return e}()),t=ax5.ui.picker}(),ax5.ui.picker_instance=new ax5.ui.picker,jQuery.fn.ax5picker=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.picker_instance.open(this);case"close":return ax5.ui.picker_instance.close(this);case"setValue":return ax5.ui.picker_instance.setContentValue(this,arguments[1],arguments[2]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend(!0,t,e),ax5.ui.picker_instance.bind(t)});return this}}(),function(){var t=ax5.ui.picker,e=(ax5.util,function(){return'\n<div class="ax5-ui-picker {{theme}}" id="{{id}}" data-picker-els="root">\n    {{#title}}\n        <div class="ax-picker-heading">{{title}}</div>\n    {{/title}}\n    <div class="ax-picker-body">\n        <div class="ax-picker-content" data-picker-els="content" style="width:{{contentWidth}}px;"></div>\n        {{#btns}}\n            <div class="ax-picker-buttons">\n            {{#btns}}\n                {{#@each}}\n                <button data-picker-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                {{/@each}}\n            {{/btns}}\n            </div>\n        {{/btns}}\n    </div>\n    <div class="ax-picker-arrow"></div>\n</div>\n'});t.tmpl={pickerTmpl:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"formatter",version:"0.6.1"},function(){var e=(new Date,function(t,e){if("undefined"==typeof e&&(e=t.value.length),t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}else t.selectionStart&&(t.focus(),t.selectionStart=e,t.selectionEnd=e)}),n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={animateTime:250},this.queue=[],this.openTimer=null,this.closeTimer=null,n=this.config;var o={focus:function(t,e,i){t.$input.data("__originValue__")||t.$input.data("__originValue__",t.$input.val())},keydown:function(t,e,i){var n=!1;t.enterableKeyCodes&&(i.which&&t.enterableKeyCodes[i.which]||i.metaKey||i.ctrlKey||i.shiftKey||(n=!0)),n&&ax5.util.stopEvent(i)},keyup:function(i,n,a){var o,l,s,r,d,c=i.$input.get(0);"selectionStart"in c?o=c.selectionStart:document.selection&&(r=document.selection.createRange(),d=document.selection.createRange().text.length,r.moveStart("character",-c.value.length),o=r.text.length-d),l=c.value,s=i.pattern in t.formatter?t.formatter[i.pattern].getPatternValue.call(this,i,n,a,c.value):l,s!=l&&(i.$input.val(s).trigger("change"),e(c,o+s.length-l.length))},blur:function(e,i,n,a){var o,l,s=e.$input.get(0);e.$input.removeData("__originValue__"),o=s.value,l=e.pattern in t.formatter?t.formatter[e.pattern].getPatternValue.call(this,e,i,n,s.value,"blur"):o,a?e.$input.val(l):l!=o&&e.$input.val(l).trigger("change")}},l=function(e,i){if(!e.pattern&&("INPUT"==e.$target.get(0).tagName?e.pattern=e.$target.attr("data-ax5formatter"):e.pattern=e.$target.find('input[type="text"]').attr("data-ax5formatter"),!e.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(e.target),this;var n=/[^\(^\))]+/gi,a=e.pattern.match(n);return e.pattern=a[0],e.patternArgument=a[1]||"",e.pattern in t.formatter&&(e.enterableKeyCodes=t.formatter[e.pattern].getEnterableKeyCodes.call(this,e,i)),e.$input.unbind("focus.ax5formatter").bind("focus.ax5formatter",o.focus.bind(this,this.queue[i],i)),e.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",o.keydown.bind(this,this.queue[i],i)),e.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",o.keyup.bind(this,this.queue[i],i)),e.$input.unbind("blur.ax5formatter").bind("blur.ax5formatter",o.blur.bind(this,this.queue[i],i)),o.blur.call(this,this.queue[i],i),this},s=function(t){return i.isString(t)||(t=jQuery(t).data("data-formatter")),i.search(this.queue,function(){return this.id==t})};this.init=function(){},this.bind=function(t){var e,o={};if(jQuery.extend(!0,o,n),t&&jQuery.extend(!0,o,t),t=o,!t.target)return console.log(ax5.info.getError("ax5formatter","401","bind")),this;if(t.$target=jQuery(t.target),"INPUT"==t.$target.get(0).tagName)t.$input=t.$target;else if(t.$input=t.$target.find('input[type="text"]'),t.$input.length>1)return t.$input.each(function(){t.target=this,a.bind(t)}),this;return t.$input="INPUT"==t.$target.get(0).tagName?t.$target:t.$target.find('input[type="text"]'),t.id||(t.id=t.$input.data("ax5-formatter")),t.id||(t.id="ax5-formatter-"+ax5.getGuid(),t.$input.data("ax5-formatter",t.id)),e=i.search(this.queue,function(){return this.id==t.id}),e===-1?(this.queue.push(t),l.call(this,this.queue[this.queue.length-1],this.queue.length-1)):(this.queue[e]=t,l.call(this,this.queue[e],e)),this},this.formatting=function(t){var e=i.isNumber(t)?t:s.call(this,t);if(e===-1)for(var n=this.queue.length;n--;)o.blur.call(this,this.queue[n],n,null,!0);else o.blur.call(this,this.queue[e],e,null,!0);return this},this.unbind=function(){},this.main=function(){arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.formatter}(),ax5.ui.formatter_instance=new ax5.ui.formatter,jQuery.fn.ax5formatter=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"formatting":return ax5.ui.formatter_instance.formatting(this);case"unbind":return ax5.ui.formatter_instance.unbind(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.formatter_instance.bind(t)});return this}}(),function(){var t=ax5.ui.formatter,e=ax5.util,i={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},n={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},a={getEnterableKeyCodes:function(e){var i={188:","};return"int"==e.patternArgument||(i[190]="."),jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){a=a.replace(/[^0-9^\.^\-]/g,"");var l,s=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),r=a.split(".");r[0]+=".";do r[0]=r[0].replace(s,"$1,$2");while(s.test(r[0]));return l=r.length>1?e.isNumber(t.maxRound)?r[0]+e.left(r[1],t.maxRound):r.join(""):r[0].split(".")[0]}},o={getEnterableKeyCodes:function(e){var i={190:"."};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){a=a.replace(/[^0-9^\.^\-]/g,"");var l,s=a.split(".");return l=s.length>1?e.isNumber(t.maxRound)?s[0]+e.left(s[1],t.maxRound):s.join(""):s[0].split(".")[0]}},l={getEnterableKeyCodes:function(e){var i={189:"-",191:"/"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){if(a=a.replace(/\D/g,""),""==a)return a;var l=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})?.*$/;"time"==t.patternArgument&&(l=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})? ?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/);var s=a.match(l),r="",d=function(t,i,n,a){var o={Y:function(t){return"undefined"==typeof t&&(t=TODAY.getFullYear()),""!=t&&"0000"!=t||(t=TODAY.getFullYear()),t.length<4?e.setDigit(t,4):t},M:function(t){return"undefined"==typeof t&&(t=TODAY.getMonth()+1),t>12?12:0==t?"01":e.setDigit(t,2)},D:function(t){"undefined"==typeof t&&(t=TODAY.getDate()+1);var i=e.daysOfMonth(a[1],a[2]-1);return t>i?i:0==t?"01":e.setDigit(t,2)},h:function(t){return t||(t=0),t>23?23:e.setDigit(t,2)},m:function(t){return t||(t=0),t>59?59:e.setDigit(t,2)},s:function(t){return t||(t=0),t>59?59:e.setDigit(t,2)}};return n?o[i](t):t};return r=a.replace(l,function(e,i){var n=[d(arguments[1],"Y",o)];return(arguments[2]||o)&&n.push("-"+d(arguments[2],"M",o)),(arguments[3]||o)&&n.push("-"+d(arguments[3],"D",o,arguments)),"time"==t.patternArgument&&((arguments[4]||o)&&n.push(" "+d(arguments[4],"h",o)),(arguments[5]||o)&&n.push(":"+d(arguments[5],"m",o)),(arguments[6]||o)&&n.push(":"+d(arguments[6],"s",o))),n.join("")}),"blur"!=o||s?s||(r=r.length>4?e.left(r,4):r):r=function(){var e=[d(r,"Y",o)];return e.push("-"+d(0,"M",o)),e.push("-"+d(0,"D",o,arguments)),"time"==t.patternArgument&&(e.push(" "+d(0,"h",o)),e.push(":"+d(0,"m",o)),e.push(":"+d(0,"s",o))),e.join("")}(),r}},s={getEnterableKeyCodes:function(e){var i={186:":"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){a=a.replace(/\D/g,"");var l=/^([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/,s=a.match(l),r=a.replace(l,function(t,e){var i=[arguments[1]];return arguments[2]&&i.push(":"+arguments[2]),arguments[3]&&i.push(":"+arguments[3]),i.join("")});return s||(r=r.length>2?e.left(r,2):r),r}},r={getEnterableKeyCodes:function(e){var i={189:"-"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,i,n,a){n=n.replace(/\D/g,"");var o=/^([0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,5})?.*$/,l=n.replace(o,function(t,e){var i=[arguments[1]];return arguments[2]&&i.push(arguments[2]),arguments[3]&&i.push(arguments[3]),i.join("-")});return l}},d={getEnterableKeyCodes:function(e){var i={189:"-",188:","};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,i,n,a){n=n.replace(/\D/g,"");var o=/^([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/;"02"==n.substr(0,2)&&(o=/^([0-9]{2})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/);var l=n.replace(o,function(t,e){var i=[arguments[1]];return arguments[2]&&i.push(arguments[2]),arguments[3]&&i.push(arguments[3]),arguments[4]&&i.push(arguments[4]),arguments[5]&&i.push(arguments[5]),i.join("-")});return l}},c={getEnterableKeyCodes:function(e){var i={189:"-"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,i,n,a){n=n.replace(/\D/g,"").substring(0,16);var o=/^([0-9]{4})\-?([0-9]{4})?\-?([0-9]{4})?\-?([0-9]{4})?/,l=n.replace(o,function(t,e){
var i=[arguments[1]];return arguments[2]&&i.push(arguments[2]),arguments[3]&&i.push(arguments[3]),arguments[4]&&i.push(arguments[4]),i.join("-")});return l}},u={getEnterableKeyCodes:function(t){return t.getEnterableKeyCodes?t.getEnterableKeyCodes.call(t,{$input:t.$input}):null},getPatternValue:function(t,e,i,n,a){if(t.getPatternValue)return t.getPatternValue.call(t,{event:i,$input:t.$input,value:n})}};t.formatter={ctrlKeys:i,numKeys:n,money:a,number:o,date:l,time:s,bizno:r,phone:d,credit:c,custom:u}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"menu",version:"0.7.0"},function(){var n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",iconWidth:22,acceleratorWidth:100,menuBodyPadding:5,offset:{left:0,top:0},position:"fixed",animateTime:250,items:[],itemClickAndClose:!0,columnKeys:{label:"label",items:"items"}},this.openTimer=null,this.closeTimer=null,this.queue=[],this.menuBar={},this.state=void 0,n=this.config;var o=function(t){t?(jQuery(document).unbind("click.ax5menu-"+this.menuId).bind("click.ax5menu-"+this.menuId,d.bind(this)),jQuery(window).unbind("keydown.ax5menu-"+this.menuId).bind("keydown.ax5menu-"+this.menuId,function(t){t.which==ax5.info.eventKeys.ESC&&a.close()}),jQuery(window).unbind("resize.ax5menu-"+this.menuId).bind("resize.ax5menu-"+this.menuId,function(t){a.close()})):(jQuery(document).unbind("click.ax5menu-"+this.menuId),jQuery(window).unbind("keydown.ax5menu-"+this.menuId),jQuery(window).unbind("resize.ax5menu-"+this.menuId))},l=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),a.state=e.state,t=null,e=null,!0},s=function(t){return this.onLoad&&this.onLoad.call(t,t),t=null,!0},r=function u(e,i,o,r){var d,h,p=e;return p.theme=e.theme||n.theme,p.cfg={icons:jQuery.extend({},n.icons),iconWidth:e.iconWidth||n.iconWidth,acceleratorWidth:e.acceleratorWidth||n.acceleratorWidth},i.forEach(function(t){t.html||t.divide?(t["@isMenu"]=!1,t.html&&(t["@html"]=t.html.call({item:t,config:n,opt:e}))):t["@isMenu"]=!0}),p[n.columnKeys.items]=i,p["@depth"]=o,p["@path"]=r||"root",p["@hasChild"]=function(){return this[n.columnKeys.items]&&this[n.columnKeys.items].length>0},d=jQuery(t.tmpl.get.call(this,"tmpl",p,n.columnKeys)),jQuery(document.body).append(d),h=this.queue.splice(o),h.forEach(function(t){t.$target.remove()}),this.queue.push({$target:d,data:jQuery.extend({},p)}),d.find("[data-menu-item-index]").bind("mouseover",function(){var t,i,o,l,s,r,d=this.getAttribute("data-menu-item-depth"),c=this.getAttribute("data-menu-item-index"),h=this.getAttribute("data-menu-item-path");null!=d&&"undefined"!=typeof d&&(s=a.queue[d].data[n.columnKeys.items][c][n.columnKeys.items],r=a.queue[d].$target,r.find("[data-menu-item-index]").removeClass("hover"),jQuery(this).addClass("hover"),r.attr("data-selected-menu-item-index")!=c&&(r.attr("data-selected-menu-item-index",c),s&&s.length>0?(t=jQuery(this),i=t.offset(),o="fixed"==n.position?jQuery(document).scrollTop():0,l={"@parent":{left:i.left,top:i.top,width:t.outerWidth(),height:t.outerHeight()},left:i.left+t.outerWidth()-n.menuBodyPadding,top:i.top-n.menuBodyPadding-1-o},l=jQuery.extend(!0,e,l),u.call(a,l,s,Number(d)+1,h)):a.queue.splice(Number(d)+1).forEach(function(t){t.$target.remove()}))),d=null,c=null,h=null,t=null,i=null,o=null,l=null,s=null,r=null}),0==o&&(p.direction&&d.addClass("direction-"+p.direction),l.call(this,null,{self:this,items:i,parent:function(t){if(!t)return!1;var e=null;try{e=Function("","return this.config.items["+t.substring(5).replace(/\./g,"].items[")+"];").call(a)}catch(i){}return e}(p["@path"]),state:"popup"})),c.call(this,d,p),s.call(this,{self:this,items:i,element:d.get(0)}),p=null,d=null,h=null,e=null,i=null,o=null,r=null,this},d=function(t,e,o){if(e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-menu-item-index"))return!0})){if(o=function(t){if(!t)return!1;var e;try{e=Function("","return this.config.items["+t.substring(5).replace(/\./g,"]."+n.columnKeys.items+"[")+"];").call(a)}catch(i){console.log(ax5.info.getError("ax5menu","501","menuItemClick"))}try{return e}finally{e=null}}(e.getAttribute("data-menu-item-path")),!o)return this;o.check&&(function(t){var e={checkbox:function(t){this.checked=!t},radio:function(e){var i=this.name;t.forEach(function(t){t.check&&"radio"===t.check.type&&t.check.name==i&&(t.check.checked=!1)}),this.checked=!e}};e[this.type]&&e[this.type].call(this,this.checked),e=null}.call(o.check,n.items),n.itemClickAndClose||a.queue.forEach(function(t){t.$target.find("[data-menu-item-index]").each(function(){var e=t.data[n.columnKeys.items][this.getAttribute("data-menu-item-index")];e.check&&jQuery(this).find(".item-checkbox-wrap").attr("data-item-checked",e.check.checked)})})),a.onClick&&a.onClick.call(o,o),o[n.columnKeys.items]&&0!=o[n.columnKeys.items].length||!n.itemClickAndClose||a.close()}else a.close();return e=null,o=null,this},c=function(t,e){var i=jQuery(window),a=jQuery(document),o="fixed"==n.position?i.height():a.height(),l=i.width(),s=t.outerHeight(),r=t.outerWidth(),d=e.left,c=e.top,u=n.position||"fixed";return d+r>l&&(d=e["@parent"]?e["@parent"].left-r+n.menuBodyPadding:l-r),c+s>o&&(c=o-s),t.css({left:d,top:c,position:u}),t=null,e=null,i=null,a=null,o=null,l=null,s=null,r=null,d=null,c=null,u=null,this};this.init=function(){a.menuId=ax5.getGuid(),this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.onLoad=n.onLoad,l.call(this,null,{self:this,state:"init"})},this.popup=function(){var t={event:function(t,e){t={left:t.clientX,top:"fixed"==n.position?t.clientY:t.pageY,width:n.width,theme:n.theme},n.offset&&(n.offset.left&&(t.left+=n.offset.left),n.offset.top&&(t.top+=n.offset.top)),e=jQuery.extend(!0,t,e);try{return e}finally{t=null}},object:function(t,e){t={left:t.left,top:t.top,width:t.width||n.width,theme:t.theme||n.theme},n.offset&&(n.offset.left&&(t.left+=n.offset.left),n.offset.top&&(t.top+=n.offset.top)),e=jQuery.extend(!0,t,e);try{return e}finally{t=null}}},e=function(t){t&&(n.theme=t)};return function(i,a){if(!i)return this;a=t["undefined"==typeof i.clientX?"object":"event"].call(this,i,a),e(a.theme);var l=[].concat(n.items);if(a.filter){var s=function d(t){var e=[];return t.forEach(function(t){t.items&&t.items.length>0&&(t.items=d(t.items)),a.filter.call(t)&&e.push(t)}),e};l=s(l)}return r.call(this,a,l,0),o.call(this,!0),i=null,this}}(),this.attach=function(){var e={object:function(t,e){t={left:t.left,top:t.top,width:t.width||n.width,theme:t.theme||n.theme,direction:t.direction||n.direction},e=jQuery.extend(!0,e,t);try{return e}finally{t=null,e=null}}},l=function(t,i,l){var s=jQuery(t),d=s.offset(),c=s.outerHeight(),u=Number(t.getAttribute("data-menu-item-index")),h="fixed"==n.position?jQuery(document).scrollTop():0;return a.menuBar.openedIndex==u?("click"==l&&a.close(),!1):(a.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),a.menuBar.opened=!0,a.menuBar.openedIndex=u,s.attr("data-menu-item-opened","true"),s.addClass("hover"),n.offset&&(n.offset.left&&(d.left+=n.offset.left),n.offset.top&&(d.top+=n.offset.top)),i=e.object.call(this,{left:d.left,top:d.top+c-h},i),n.items&&n.items[u][n.columnKeys.items]&&n.items[u][n.columnKeys.items].length&&(r.call(a,i,n.items[u][n.columnKeys.items],0,"root."+t.getAttribute("data-menu-item-index")),o.call(a,!0)),t=null,i=null,s=null,d=null,c=null,u=null,void(h=null))};return function(e,o){var s,r={},d=n.items;return"undefined"==typeof o&&(o={}),r.theme=o.theme||n.theme,r.cfg={icons:jQuery.extend({},n.icons),iconWidth:o.iconWidth||n.iconWidth,acceleratorWidth:o.acceleratorWidth||n.acceleratorWidth},d.forEach(function(t){t.html||t.divide?(t["@isMenu"]=!1,t.html&&(t["@html"]=t.html.call({item:t,config:n,opt:o}))):t["@isMenu"]=!0}),r[n.columnKeys.items]=d,s=jQuery(t.tmpl.get.call(this,"tmplMenubar",r,n.columnKeys)),a.menuBar={target:jQuery(e),opened:!1},a.menuBar.target.html(s),a.menuBar.target.bind("click",function(t){if(!t)return this;var e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-menu-item-index"))return!0});e&&l(e,o,"click"),e=null}),a.menuBar.target.bind("mouseover",function(t){if(!a.menuBar.opened)return!1;var e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-menu-item-index"))return!0});e&&l(e,o,"mouseover"),e=null}),e=null,o=null,r=null,d=null,s=null,this}}(),this.close=function(){return a.menuBar&&a.menuBar.target&&(a.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),a.menuBar.opened=!1,a.menuBar.openedIndex=null),o.call(this,!1),this.queue.forEach(function(t){t.$target.remove()}),this.queue=[],l.call(this,null,{self:this,state:"close"}),this},this.getCheckValue=function(){var t={},e=function(n){for(var a=n.length;a--;)n[a].check&&n[a].check.checked&&(t[n[a].check.name]?(i.isString(t[n[a].check.name])&&(t[n[a].check.name]=[t[n[a].check.name]]),t[n[a].check.name].push(n[a].check.value)):t[n[a].check.name]=n[a].check.value),n[a].items&&n[a].items.length>0&&e(n[a].items)};e(n.items);try{return t}finally{t=null,e=null}},this.main=function(){e.menu_instance=e.menu_instance||[],e.menu_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.menu}(),function(){var t=ax5.ui.menu,e=function(t){return'\n        <div class="ax5-ui-menu {{theme}}" {{#width}}style="width:{{width}}px;"{{/width}}>\n            <div class="ax-menu-body">\n                {{#'+t.items+'}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class="ax-menu-item" data-menu-item-depth="{{@depth}}" data-menu-item-index="{{@i}}" data-menu-item-path="{{@path}}.{{@i}}">\n                        <span class="ax-menu-item-cell ax-menu-item-checkbox">\n                            {{#check}}\n                            <span class="item-checkbox-wrap useCheckBox" {{#checked}}data-item-checked="true"{{/checked}}></span>\n                            {{/check}}\n                            {{^check}}\n                            <span class="item-checkbox-wrap"></span>\n                            {{/check}}\n                        </span>\n                        {{#icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                        {{/icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{'+t.label+'}}}</span>\n                        {{#accelerator}}\n                        <span class="ax-menu-item-cell ax-menu-item-accelerator" style="width:{{cfg.acceleratorWidth}}px;"><span class="item-wrap">{{.}}</span></span>\n                        {{/accelerator}}\n                        {{#@hasChild}}\n                        <span class="ax-menu-item-cell ax-menu-item-handle">{{{cfg.icons.arrow}}}</span>\n                        {{/@hasChild}}\n                    </div>\n                    {{/@isMenu}}\n\n                {{/'+t.items+'}}\n            </div>\n            <div class="ax-menu-arrow"></div>\n        </div>\n        '},i=function(t){return'\n        <div class="ax5-ui-menubar {{theme}}">\n            <div class="ax-menu-body">\n                {{#'+t.items+'}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class="ax-menu-item" data-menu-item-index="{{@i}}">\n                        {{#icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                        {{/icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{'+t.label+"}}}</span>\n                    </div>\n                    {{/@isMenu}}\n                {{/"+t.items+"}}\n            </div>\n        </div>\n        "};t.tmpl={tmpl:e,tmplMenubar:i,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"select",version:"0.4.4"},function(){var e=function(){var e,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:100,lang:{noSelected:"",noOptions:"no options",loading:"now loading..",multipleLabel:'"{{label}}"외 {{length}}건'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,this.xvar={},e=this.config;var a={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},l=function(){for(var t,e=this.queue.length;e--;)this.queue[e].$display&&(t=Math.max(this.queue[e].$select.outerWidth(),i.number(this.queue[e].minWidth)),this.queue[e].$display.css({"min-width":t}),this.queue[e].reset&&this.queue[e].$display.find(".addon-icon-reset").css({"line-height":this.queue[e].$display.height()+"px"}));return e=null,t=null,this},s=function(t){if(!this.activeSelectOptionGroup)return this;var e=this.queue[this.activeSelectQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activeSelectOptionGroup),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activeSelectOptionGroup.addClass("direction-"+e.direction),this.activeSelectOptionGroup.css(function(){return"top"==e.direction?{left:i.left,top:i.top+n.height+1,width:n.width}:"bottom"==e.direction?{left:i.left,top:i.top-this.activeSelectOptionGroup.outerHeight()-1,width:n.width}:void 0}.call(this))},r=function(t,e){if(!this.activeSelectOptionGroup)return this;var n=this.queue[this.activeSelectQueueIndex],a="display";return(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(this.val(n.id,{index:{gindex:e.getAttribute("data-option-group-index"),index:e.getAttribute("data-option-index")}},void 0,"internal"),n.$display.focus(),n.multiple||this.close()),this):(this.close(),this)},d=function(t){if(t.keyCode==ax5.info.eventKeys.ESC)this.close();else if(t.which==ax5.info.eventKeys.RETURN)if(this.queue[this.activeSelectQueueIndex].optionFocusIndex>-1){var e=this.activeSelectOptionGroup.find('[data-option-focus-index="'+this.queue[this.activeSelectQueueIndex].optionFocusIndex+'"]');this.val(this.queue[this.activeSelectQueueIndex].id,{index:{gindex:e.attr("data-option-group-index"),index:e.attr("data-option-index")}},void 0,"internal"),this.queue[this.activeSelectQueueIndex].multiple||this.close()}else this.close()},c=function(t){var e=this.queue[t],n=[];return i.isArray(e.selected)&&e.selected.length>0?e.selected.forEach(function(t){t.selected&&n.push(t[e.columnKeys.optionText])}):!e.multiple&&e.options&&e.options[0]?e.options[0].optgroup?n[0]=e.options[0].options[0][e.columnKeys.optionText]:n[0]=e.options[0][e.columnKeys.optionText]:n[0]=e.lang.noSelected,function(){if(e.multiple&&n.length>1){var t={label:n[0],length:n.length-1};return ax5.mustache.render(e.lang.multipleLabel,t)}return n[0]}()},u=function(t){this.queue[t].$displayLabel.html(c.call(this,t))},h=function(t,e){var i,n=[],a=-1,o=this.queue[t].indexedOptions.length-1;if(e){for(;o-a++;){if(i=this.queue[t].indexedOptions[a],(""+i.value).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var l=(""+i.value).toLowerCase().search(e.toLowerCase());if(l>-1&&(n.push({"@findex":i["@findex"],optionsSort:l}),n.length>2))break;l=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0&&p.call(this,t,void 0,n[0]["@findex"]);try{return n}finally{n=null,a=null,o=null,i=null}},p=function(t,e,i){var n,a,o,l;if(this.activeSelectOptionGroup&&this.queue[t].options&&this.queue[t].options.length>0){"undefined"!=typeof i?n=i:(a=this.queue[t].optionFocusIndex==-1?this.queue[t].optionSelectedIndex||-1:this.queue[t].optionFocusIndex,a==-1?n=e>0?0:this.queue[t].optionItemLength-1:(n=a+e,n<0?n=0:n>this.queue[t].optionItemLength-1&&(n=this.queue[t].optionItemLength-1))),this.queue[t].optionFocusIndex=n,this.activeSelectOptionGroup.find("[data-option-focus-index]").removeClass("hover"),o=this.activeSelectOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),l=this.activeSelectOptionGroup.find('[data-els="content"]');var s=o.outerHeight(),r=l.innerHeight(),d=l.scrollTop(),c=o.position().top+l.scrollTop();r+d<c+s?l.scrollTop(c+s-r):d>c&&l.scrollTop(c)}},f=function(){var e=i.debounce(function(t,e){h.call(n,e,t),n.queue[e].$displayInput.val("")},300),o={click:function(t,e){var a=i.findParentNode(e.target,function(t){if(t.getAttribute("data-selected-clear"))return!0});a?this.val(t,{clear:!0}):n.activeSelectQueueIndex==t?this.queue[t].optionFocusIndex==-1&&n.close():(n.open(t),i.stopEvent(e))},keyUp:function(t,i){i.which==ax5.info.eventKeys.SPACE?o.click.call(this,t,i):a[i.which]||e(this.queue[t].$displayInput.val(),t)},keyDown:function(t,e){e.which==ax5.info.eventKeys.DOWN?(p.call(this,t,1),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP&&(p.call(this,t,-1),i.stopEvent(e))},blur:function(t,e){},selectChange:function(t,e){this.val(t,this.queue[t].$select.val(),!0)}};return function(e){var i=this.queue[e],n={};return i.selected=[],i.$display?(i.$displayLabel.html(c.call(this,e)),i.options=g.call(this,e,i.options),l.call(this)):(n.instanceId=this.instanceId,n.id=i.id,n.name=i.name,n.theme=i.theme,n.tabIndex=i.tabIndex,n.multiple=i.multiple,n.reset=i.reset,n.label=c.call(this,e),n.formSize=function(){return i.size?"input-"+i.size:""}(),i.$display=t.tmpl.get.call(this,"tmpl",n),i.$displayLabel=i.$display.find('[data-ax5select-display="label"]'),i.$target.find("select").get(0)?(i.$select=i.$target.find("select"),i.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&i.$select.attr("name","name"),n.multiple&&i.$select.attr("multiple","multiple")):(i.$select=t.tmpl.get.call(this,"selectTmpl",n),i.$target.append(i.$select)),i.$target.append(i.$display),i.$displayInput=i.$display.find('[data-ax5select-display="input"]'),i.options=g.call(this,e,i.options),l.call(this),i.$displayInput.unbind("blur.ax5select").bind("blur.ax5select",o.blur.bind(this,e)).unbind("keyup.ax5select").bind("keyup.ax5select",o.keyUp.bind(this,e)).unbind("keydown.ax5select").bind("keydown.ax5select",o.keyDown.bind(this,e))),i.$display.unbind("click.ax5select").bind("click.ax5select",o.click.bind(this,e)).unbind("keyup.ax5select").bind("keyup.ax5select",o.keyUp.bind(this,e)),i.$select.unbind("change.ax5select").bind("change.ax5select",o.selectChange.bind(this,e)),n=null,i=null,e=null,this}}(),g=function(){var t=function(t,e){e?this.queue[t].multiple?this.queue[t].selected.push(jQuery.extend({},e)):this.queue[t].selected[0]=jQuery.extend({},e):this.queue[t].selected=[]};return function(e,a){var o,l,s,r=this.queue[e],d=0;return t.call(this,e,!1),a?(r.options=a,r.indexedOptions=[],o=[],r.options.forEach(function(i,a){i.optgroup?(i["@gindex"]=a,i.options.forEach(function(i,a){i["@index"]=a,i["@findex"]=d,o.push('<option value="'+i[r.columnKeys.optionValue]+'" '+(i[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[r.columnKeys.optionText]+"</option>"),i[r.columnKeys.optionSelected]&&t.call(n,e,i),r.indexedOptions.push({"@findex":d,value:i[r.columnKeys.optionValue],text:i[r.columnKeys.optionText]}),d++})):(i["@index"]=a,i["@findex"]=d,o.push('<option value="'+i[r.columnKeys.optionValue]+'" '+(i[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[r.columnKeys.optionText]+"</option>"),i[r.columnKeys.optionSelected]&&t.call(n,e,i),r.indexedOptions.push({"@findex":d,value:i[r.columnKeys.optionValue],text:i[r.columnKeys.optionText]}),d++)}),r.optionItemLength=d,r.$select.html(o.join(""))):(l=i.toArray(r.$select.get(0).options),s=[],l.forEach(function(i,a){var o={};o[r.columnKeys.optionValue]=i.value,o[r.columnKeys.optionText]=i.text,o[r.columnKeys.optionSelected]=i.selected,o["@index"]=a,o["@findex"]=a,i.selected&&t.call(n,e,o),s.push(o),o=null}),r.options=s,r.indexedOptions=s),!r.multiple&&0==r.selected.length&&r.options&&r.options[0]&&(r.options[0].optgroup?(r.options[0].options[0][r.columnKeys.optionSelected]=!0,r.selected.push(jQuery.extend({},r.options[0].options[0]))):(r.options[0][r.columnKeys.optionSelected]=!0,r.selected.push(jQuery.extend({},r.options[0])))),o=null,l=null,s=null,r.options}}(),m=function(t){return i.isString(t)||(t=jQuery(t).data("data-ax5select-id")),i.isString(t)?i.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5select","402","getQueIdx"))};this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5select-display-"+this.instanceId,function(){l.call(this)}.bind(this))},this.bind=function(t){var n,a={};return t=jQuery.extend(!0,a,e,t),t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("data-ax5select-id")),t.id||(t.id="ax5select-"+ax5.getGuid(),t.$target.data("data-ax5select-id",t.id)),t.name=t.$target.attr("data-ax5select"),t.options&&(t.options=JSON.parse(JSON.stringify(t.options))),function(e){i.isObject(e)&&!e.error&&(t=jQuery.extend(!0,t,e))}(i.parseJson(t.$target.attr("data-ax5select-config"),!0)),n=i.search(this.queue,function(){return this.id==t.id}),n===-1?(this.queue.push(t),f.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],t),f.call(this,n)),a=null,n=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var n=function(e){e.onExpand.call({self:this,item:e},function(e){if(this.waitOptionsCallback){var n={},a=this.queue[this.activeSelectQueueIndex];!function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,e),a.$displayLabel.html(c.call(this,this.activeSelectQueueIndex)),a.options=g.call(this,this.activeSelectQueueIndex,e.options),l.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5select-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,this.activeSelectOptionGroup.find('[data-els="content"]').html(t.tmpl.get.call(this,"optionsTmpl",n))}}.bind(this))};return function(a,l){this.waitOptionsCallback=null;var c,u,h=i.isNumber(a)?a:m.call(this,a),p=this.queue[h],f={};return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==h?this:l>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(l||0)+1)}.bind(this),e.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),f.id=p.id,f.theme=p.theme,f.size="ax5select-option-group-"+p.size,f.multiple=p.multiple,f.lang=p.lang,p.$display.attr("data-select-option-group-opened","true"),p.onExpand&&(f.waitOptions=!0),f.options=p.options,this.activeSelectOptionGroup=t.tmpl.get.call(this,"optionGroupTmpl",f),this.activeSelectOptionGroup.find('[data-els="content"]').html(t.tmpl.get.call(this,"optionGroupTmpl",f)),this.activeSelectQueueIndex=h,s.call(this,"append"),jQuery(window).bind("resize.ax5select-"+this.instanceId,function(){s.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(u=this.activeSelectOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),u.get(0)&&(c=u.position().top-this.activeSelectOptionGroup.height()/3,this.activeSelectOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:c},p.animateTime,"swing",function(){}))),p.$displayInput.val(""),setTimeout(function(){p.$displayInput.trigger("focus"),jQuery(window).bind("keyup.ax5select-"+this.instanceId,function(t){t=t||window.event,d.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5select-"+this.instanceId,function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this))}.bind(this),300),o.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,n.call(this,p)),f=null,c=null,u=null,this))}}(),this.update=function(t){return this.bind(t),this},this.val=function(){var t=function(t,e,i){return"undefined"==typeof i?!t.multiple||!e:i},e=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},a={index:function(e,a,o){var l=this.queue[e];i.isString(a.index.gindex)?(l.options[a.index.gindex].options[a.index.index][l.columnKeys.optionSelected]=t(l,l.options[a.index.gindex].options[a.index.index][l.columnKeys.optionSelected],o),n.activeSelectOptionGroup.find('[data-option-group-index="'+a.index.gindex+'"][data-option-index="'+a.index.index+'"]').attr("data-option-selected",l.options[a.index.gindex].options[a.index.index][l.columnKeys.optionSelected].toString())):(l.options[a.index.index][l.columnKeys.optionSelected]=t(l,l.options[a.index.index][l.columnKeys.optionSelected],o),n.activeSelectOptionGroup.find('[data-option-index="'+a.index.index+'"]').attr("data-option-selected",l.options[a.index.index][l.columnKeys.optionSelected].toString())),g.call(this,e,l.options),u.call(this,e),s.call(this)},arr:function(t,e,o){e.forEach(function(e){if(i.isString(e)||i.isNumber(e))a.value.call(n,t,e,o);else for(var l in a)if(e[l]){a[l].call(n,t,e,o);break}})},value:function(e,n,a){var o=this.queue[e],l=i.search(o.options,function(){return this[o.columnKeys.optionValue]==n});return l>-1?(o.options[l][o.columnKeys.optionSelected]=t(o,o.options[l][o.columnKeys.optionSelected],a),g.call(this,e,o.options),void u.call(this,e)):void console.log(ax5.info.getError("ax5select","501","val"))},text:function(e,n,a){var o=this.queue[e],l=i.search(o.options,function(){return this[o.columnKeys.optionText]==n});return l>-1?(o.options[l][o.columnKeys.optionSelected]=t(o,o.options[l][o.columnKeys.optionSelected],a),g.call(this,e,o.options),void u.call(this,e)):void console.log(ax5.info.getError("ax5select","501","val"))},clear:function(t){e.call(this,t),g.call(this,t,this.queue[t].options),u.call(this,t),this.activeSelectOptionGroup&&this.activeSelectOptionGroup.find("[data-option-index]").attr("data-option-selected","false")}};return function(t,n,l,s){var r=i.isNumber(t)?t:m.call(this,t);if(r===-1)return void console.log(ax5.info.getError("ax5select","402","val"));if("undefined"==typeof n||this.queue[r].multiple||e.call(this,r),"undefined"==typeof n)return this.queue[r].selected;if(i.isArray(n))a.arr.call(this,r,n,l);else if(i.isString(n)||i.isNumber(n))a.value.call(this,r,n,l);else if(null===n)a.clear.call(this,r);else for(var d in a)if(n[d]){a[d].call(this,r,n,l);break}return"undefined"!=typeof n&&o.call(this,this.queue[r],{self:this,item:this.queue[r],state:s?"changeValue":"setValue",value:this.queue[r].selected,internal:s}),t=null,this}}(),this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(t=this.queue[this.activeSelectQueueIndex],t.optionFocusIndex=-1,t.$displayInput.val("").trigger("blur"),t.$display.removeAttr("data-select-option-group-opened").trigger("focus"),this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select-"+this.instanceId).unbind("click.ax5select-"+this.instanceId).unbind("keyup.ax5select-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1;var e={self:this,item:t,value:t.selected,state:"close"};o.call(this,t,e),t.onClose&&t.onClose.call(e)}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(t){var e=m.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$select.removeAttr("disabled"),o.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=m.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$select.attr("disabled","disabled"),o.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}()),t=ax5.ui.select}(),ax5.ui.select_instance=new ax5.ui.select,jQuery.fn.ax5select=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.select_instance.val(this);case"enable":return ax5.ui.select_instance.enable(this);case"disable":return ax5.ui.select_instance.disable(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.select_instance.bind(t)});return this}}(),function(){var t=ax5.ui.select,e=function(t){return'\n                    <div class="ax5select-option-group {{theme}} {{size}}" data-ax5select-option-group="{{id}}">\n                        <div class="ax-select-body">\n                            <div class="ax-select-option-group-content" data-els="content"></div>\n                        </div>\n                        <div class="ax-select-arrow"></div> \n                    </div>\n                    '},i=function(t){return'\n                    <a {{^tabIndex}}href="#ax5select-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}class="form-control {{formSize}} ax5select-display {{theme}}" \n                    data-ax5select-display="{{id}}" data-ax5select-instance="{{instanceId}}">\n                        <div class="ax5select-display-table" data-els="display-table">\n                            <div data-ax5select-display="label">{{label}}</div>\n                            <div data-ax5select-display="addon"> \n                                {{#multiple}}{{#reset}}\n                                <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n                                {{/reset}}{{/multiple}}\n                                {{#icons}}\n                                <span class="addon-icon-closed">{{clesed}}</span>\n                                <span class="addon-icon-opened">{{opened}}</span>\n                                {{/icons}}\n                                {{^icons}}\n                                <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                                <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                                {{/icons}}\n                            </div>\n                        </div>\n                        <input type="text" tabindex="-1" data-ax5select-display="input" \n                        style="position:absolute;z-index:0;left:0px;top:0px;font-size:1px;opacity: 0;width:1px;border: 0px none;color : transparent;text-indent: -9999em;" />\n                    </a>\n                    ';
},n=function(t){return'\n                    <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n                    '},a=function(t){return'\n                    {{#waitOptions}}\n                        <div class="ax-select-option-item">\n                                <div class="ax-select-option-item-holder">\n                                    <span class="ax-select-option-item-cell ax-select-option-item-label">\n                                        {{{lang.loading}}}\n                                    </span>\n                                </div>\n                            </div>\n                    {{/waitOptions}}\n                    {{^waitOptions}}\n                        {{#options}}\n                            {{#optgroup}}\n                                <div class="ax-select-option-group">\n                                    <div class="ax-select-option-item-holder">\n                                        <span class="ax-select-option-group-label">\n                                            {{{.}}}\n                                        </span>\n                                    </div>\n                                    {{#options}}\n                                    <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                                    data-option-value="{{'+t.optionValue+'}}" \n                                    {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                                        <div class="ax-select-option-item-holder">\n                                            {{#multiple}}\n                                            <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                                                <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                            </span>\n                                            {{/multiple}}\n                                            <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+t.optionText+'}}</span>\n                                        </div>\n                                    </div>\n                                    {{/options}}\n                                </div>                            \n                            {{/optgroup}}\n                            {{^optgroup}}\n                            <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                                <div class="ax-select-option-item-holder">\n                                    {{#multiple}}\n                                    <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                                        <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                    </span>\n                                    {{/multiple}}\n                                    <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+t.optionText+'}}</span>\n                                </div>\n                            </div>\n                            {{/optgroup}}\n                        {{/options}}\n                        {{^options}}\n                            <div class="ax-select-option-item">\n                                <div class="ax-select-option-item-holder">\n                                    <span class="ax-select-option-item-cell ax-select-option-item-label">\n                                        {{{lang.noOptions}}}\n                                    </span>\n                                </div>\n                            </div>\n                        {{/options}}\n                    {{/waitOptions}}\n                    '};t.tmpl={optionGroupTmpl:e,tmpl:i,selectTmpl:n,optionsTmpl:a,get:function(e,i,n){return jQuery(ax5.mustache.render(t.tmpl[e].call(this,n),i))}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"grid",version:"0.2.21"},function(){var n=function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!1,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,header:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__"}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.page={},this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,n=this.config;var o=function(){var e={instanceId:this.id};return this.$target.html(t.tmpl.get("main",e)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height}),this},l=function(e){this.columns=i.deepCopy(e),this.headerTable=t.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=n.frozenColumnIndex>this.columns.length?this.columns.length:n.frozenColumnIndex,this.bodyRowTable=t.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=t.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var a={},o=0,l=this.headerTable.rows.length;o<l;o++)for(var s=this.headerTable.rows[o],r=0,d=s.cols.length;r<d;r++)a[s.cols[r].colIndex]=jQuery.extend({},s.cols[r]);this.colGroup=[];for(var c in a)this.colGroup.push(a[c]);return this},s=function(){l.call(this,this.config.columns),r.call(this),this.config.footSum&&(d.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&c.call(this,this.config.body.grouping),u.call(this,!0),t.header.repaint.call(this,!0),t.body.repaint.call(this,!0),t.scroller.resize.call(this)},r=function(){var t,e,n,a=this.$.container.root.width(),o=0,l=[],s=this.colGroup;for(e=0,n=s.length;e<n;e++)i.isNumber(s[e].width)?o+=s[e]._width=s[e].width:"*"===s[e].width?l.push(e):"%"===i.right(s[e].width,1)&&(o+=s[e]._width=a*i.left(s[e].width,"%")/100);if(l.length>0)for(t=(a-o)/l.length,e=0,n=l.length;e<n;e++)s[l[e]]._width=t},d=function(e){i.isArray(e)?this.footSumTable=t.util.makeFootSumTable.call(this,this.footSumColumns=e):(this.footSumColumns=[],this.footSumTable={})},c=function(e){var i=jQuery.extend({},e);"by"in i&&"columns"in i?(this.bodyGrouping={by:i.by,columns:i.columns},this.bodyGroupingTable=t.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},e=0,i=this.bodyGrouping.by.length;e<i;e++){t[this.bodyGrouping.by[e]]={orderBy:"asc",seq:e,fixed:!0};for(var n=0,a=this.colGroup.length;n<a;n++)this.colGroup[n].key===this.bodyGrouping.by[e]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):n.body.grouping=!1},u=function(t){var e,i,a=this.$.container.root.width(),o=this.$.container.root.height(),l=a,s=o,r=n.asidePanelWidth=function(){var t=0;return n.showLineNumber&&(t+=n.lineNumberColumnWidth),n.showRowSelector&&(t+=n.rowSelectorColumnWidth),t}(),d=n.frozenPanelWidth=function(t,e){for(var i=0,n=0,a=e;n<a;n++)i+=t[n]._width;return i}(this.colGroup,n.frozenColumnIndex),c=0,u=function(t){return n.frozenRowIndex*t}(this.xvar.bodyTrHeight),h=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),p=this.headerTable.rows.length*n.header.columnHeight,f=n.page.display?n.page.height:0;(function(){e=o-p-f-h<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,i=function(){for(var t=0,i=a-r-e,n=0,o=this.colGroup.length;n<o;n++)t+=this.colGroup[n]._width;return t>i?this.config.scroller.size:0}.call(this),i>0&&(e=o-p-f-h-i<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),l=a-e,s=o-f-i;var g=s-p,m=function(t,e,i,a){var o={},s=!1;switch(i){case"aside":0===r?s=!0:(o.left=0,o.width=r);break;case"left":0===n.frozenColumnIndex?s=!0:(o.left=r,o.width=d);break;case"right":n.rightSum||(s=!0);break;default:"page"!==a&&(0===n.frozenColumnIndex?o.left=r:o.left=d+r,o.width=l-r-d-c)}if(s)return t.hide(),this;if("body"===a)switch(e){case"top":0==n.frozenRowIndex?s=!0:(o.top=0,o.height=u);break;case"bottom":n.footSum?(o.top=g-h,o.height=h):s=!0;break;default:o.top=u,o.height=g-u-h}else"header"===a?o.height=p:"page"===a&&(0==f?s=!0:o.height=f);return s?(t.hide(),this):(t.css(o),this)},x=function(t,e,i,n){var a={},o=!1;switch(n){case"vertical":e>0?(a.width=e,a.height=s,a.bottom=i+f):o=!0;break;case"horizontal":i>0?(a.width=l,a.height=i,a.right=e,a.bottom=f):o=!0;break;case"corner":e>0&&i>0?(a.width=e,a.height=i,a.bottom=f):o=!0}return o?(t.hide(),this):void t.show().css(a)};this.$.container.header.css({height:p}),this.$.container.body.css({height:g}),m.call(this,this.$.panel["aside-header"],"","aside","header"),m.call(this,this.$.panel["left-header"],"","left","header"),m.call(this,this.$.panel.header,"","","header"),m.call(this,this.$.panel["right-header"],"","right","header"),m.call(this,this.$.panel["top-aside-body"],"top","aside","body"),m.call(this,this.$.panel["top-left-body"],"top","left","body"),m.call(this,this.$.panel["top-body"],"top","","body"),m.call(this,this.$.panel["top-right-body"],"top","right","body"),m.call(this,this.$.panel["aside-body"],"","aside","body"),m.call(this,this.$.panel["left-body"],"","left","body"),m.call(this,this.$.panel.body,"","","body"),m.call(this,this.$.panel["right-body"],"","right","body"),m.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),m.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),m.call(this,this.$.panel["bottom-body"],"bottom","","body"),m.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),x.call(this,this.$.scroller.vertical,e,i,"vertical"),x.call(this,this.$.scroller.horizontal,e,i,"horizontal"),x.call(this,this.$.scroller.corner,e,i,"corner"),m.call(this,this.$.container.page,"","","page")},h=function(e){t.header.repaint.call(this),this.config.body.grouping?this.list=t.data.initData.call(this,t.data.sort.call(this,e,t.data.clearGroupingData.call(this,this.list))):this.list=t.data.sort.call(this,e,t.data.clearGroupingData.call(this,this.list)),t.body.repaint.call(this,!0),t.scroller.resize.call(this)};this.init=function(e){if(this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,n=jQuery.extend(!0,{},n,e),!n.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.$target=jQuery(n.target),function(t){i.isObject(t)&&!t.error&&(n=jQuery.extend(!0,n,t))}.call(this,i.parseJson(this.$target.attr("data-ax5grid-config"),!0));var s=this.config=n;this.config.height||(this.config.height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",s.id)),o.call(this),l.call(this,s.columns),r.call(this),s.footSum&&d.call(this,s.footSum),s.body.grouping&&c.call(this,s.body.grouping),u.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.instanceId,function(){u.call(this),t.scroller.resize.call(this)}.bind(this)),jQuery(document.body).on("click.ax5grid-"+this.instanceId,function(e){var n=!1,o=i.findParentNode(e.target,function(t){return!!(n=t.getAttribute("data-ax5grid-inline-edit-picker"))||t.getAttribute("data-ax5grid-container")});o?a.focused=!0:(a.focused=!1,t.body.blur.call(a))});var h={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};return jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(e){a.focused&&(a.isInlineEditing?e.which==ax5.info.eventKeys.ESC?a.keyDown("ESC",e.originalEvent):e.which==ax5.info.eventKeys.RETURN?a.keyDown("RETURN",e.originalEvent):e.which==ax5.info.eventKeys.TAB?(a.keyDown("TAB",e.originalEvent),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP?a.keyDown("RETURN",{shiftKey:!0}):e.which==ax5.info.eventKeys.DOWN&&a.keyDown("RETURN",{}):e.metaKey||e.ctrlKey?67==e.which&&a.copySelect():h[e.which]?(a.keyDown(h[e.which],e.originalEvent),i.stopEvent(e)):e.which==ax5.info.eventKeys.ESC?a.focused&&t.body.blur.call(a):e.which==ax5.info.eventKeys.RETURN?a.keyDown("RETURN",e.originalEvent):e.which==ax5.info.eventKeys.TAB?a.keyDown("RETURN",e.originalEvent):e.which!=ax5.info.eventKeys.SPACE&&Object.keys(a.focusedColumn).length&&a.keyDown("INLINE_EDIT",e.originalEvent))}),this},this.align=function(){return u.call(this),t.scroller.resize.call(this),this},this.keyDown=function(){var e={KEY_UP:function(){t.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){t.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){t.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){t.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){t.body.moveFocus.call(this,"HOME")},KEY_END:function(){t.body.moveFocus.call(this,"END")},INLINE_EDIT:function(e){t.body.inlineEdit.active.call(this,this.focusedColumn,e),/[0-9a-zA-Z]/.test(e.key)||i.stopEvent(e)},ESC:function(e){t.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(e){var i=0;for(var n in this.inlineEditing)i++,t.body.inlineEdit.keydown.call(this,"RETURN",n),1==i&&t.body.moveFocus.call(this,e.shiftKey?"UP":"DOWN")&&t.body.inlineEdit.keydown.call(this,"RETURN");0==i&&t.body.inlineEdit.keydown.call(this,"RETURN")},TAB:function(e){var i=0;for(var n in this.inlineEditing)i++,t.body.inlineEdit.keydown.call(this,"RETURN",n),1==i&&t.body.moveFocus.call(this,e.shiftKey?"LEFT":"RIGHT")&&t.body.inlineEdit.keydown.call(this,"RETURN")}};return function(t,i){return t in e&&e[t].call(this,i),this}}(),this.copySelect=function(){var t,e,i,n,a=this.$.form.clipboard,o=[],l="",s=0;for(var r in this.selectedColumn){var d=this.selectedColumn[r];if(d){"undefined"==typeof n&&(n=d.dindex,e=d.rowIndex,i=d.rowIndex),n==d.dindex&&e==d.rowIndex||s++,o[s]||(o[s]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?this.list[d.dindex].__isGrouping?o[s].push(this.list[d.dindex][d.colIndex]):o[s].push(this.list[d.dindex][c.key]):o[s].push(""),n=d.dindex,e=d.rowIndex}}o.forEach(function(t){l+=t.join("\t")+"\n"}),a.get(0).innerText=l,a.select();try{t=document.execCommand("copy")}catch(u){t=!1}return t},this.setData=function(e){return t.data.set.call(this,e),u.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),t.page.navigationUpdate.call(this),t.body.scrollTo.call(this,{top:0}),this},this.getList=function(e){return t.data.getList.call(this,e)},this.setHeight=function(e){return"100%"==e&&(e=this.$target.offsetParent().innerHeight()),this.$target.css({height:e}),this.$.container.root.css({height:e}),u.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.addRow=function(e,i){return t.data.add.call(this,e,i),u.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),t.scroller.resize.call(this),this},this.removeRow=function(e){return t.data.remove.call(this,e),u.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),t.scroller.resize.call(this),this},this.updateRow=function(e,i){return t.data.update.call(this,e,i),u.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":i),t.scroller.resize.call(this),this},this.deleteRow=function(e){return t.data.deleteRow.call(this,e),u.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(e,n){if("undefined"==typeof e)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,e);else{if(!i.isNumber(n))throw"invalid argument _cindex";this.config.columns.splice(n,[].concat(e))}return s.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(e){if("undefined"==typeof e&&(e="last"),e in t)t[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _cindex";this.config.columns.splice(e,1)}return s.call(this),this}}(),this.updateColumn=function(t,e){if(!i.isNumber(e))throw"invalid argument _cindex";return this.config.columns.splice(e,1,t),s.call(this),this},this.setColumnWidth=function(e,i){return this.colGroup[this.xvar.columnResizerIndex]._width=e,this.needToPaintSum=!0,t.header.repaint.call(this),t.body.repaint.call(this,!0),t.scroller.resize.call(this),u.call(this),this},this.getColumnSort=function(){return{}},this.setColumnSort=function(e){return"undefined"!=typeof e&&(this.sortInfo=e,t.header.applySortStatus.call(this,e)),h.call(this,e||this.sortInfo),this},this.select=function(e){if(i.isNumber(e)){var n=e;this.config.multipleSelect||(t.body.updateRowState.call(this,["selectedClear"]),t.data.clearSelect.call(this)),t.data.select.call(this,n),t.body.updateRowState.call(this,["selected"],n)}return this},this.main=function(){e.grid_instance=e.grid_instance||[],e.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.grid}(),function(){var t=ax5.ui.grid,e=ax5.util,i={focusClear:function(){var t=this;for(var e in t.focusedColumn){var i=t.focusedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-focused")}t.focusedColumn={}},clear:function(){var t=this;for(var e in t.selectedColumn){var i=t.selectedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-selected")}t.selectedColumn={}},init:function(e){var n=this;if(this.isInlineEditing)for(var a in this.inlineEditing)if(a==e.dindex+"_"+e.colIndex+"_"+e.rowIndex)return this;i.focusClear.call(n),n.focusedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]={panelName:e.panelName,dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan},i.clear.call(n),n.xvar.selectedRange={start:[e.dindex,e.rowIndex,e.colIndex,e.colspan-1],end:null},n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]=function(t){return!t&&{panelName:e.panelName,dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan}}(n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]),this.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&t.body.inlineEdit.deActive.call(this,"RETURN")},update:function(t){var e,n,a,o,l=this;l.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],i.clear.call(l);var s={r:{s:Math.min(l.xvar.selectedRange.start[0],l.xvar.selectedRange.end[0]),e:Math.max(l.xvar.selectedRange.start[0],l.xvar.selectedRange.end[0])},c:{s:Math.min(l.xvar.selectedRange.start[2],l.xvar.selectedRange.end[2]),e:Math.max(l.xvar.selectedRange.start[2]+l.xvar.selectedRange.start[3],l.xvar.selectedRange.end[2]+l.xvar.selectedRange.end[3])}};for(e=s.r.s;e<=s.r.e;e++)for(o=this.bodyRowTable.rows.length,a=0;a<o;a++)for(n=s.c.s;n<=s.c.e;n++){var r=[],d="";l.xvar.frozenRowIndex>e&&r.push("top"),l.xvar.frozenColumnIndex>n&&r.push("left"),r.push("body"),"top"!==r[0]&&r.push("scroll"),d=r.join("-"),l.selectedColumn[e+"_"+n+"_"+a]={panelName:d,dindex:e,rowIndex:a,colIndex:n,colspan:t.colspan},r=null,d=null}e=null,n=null,a=null;for(var c in l.selectedColumn){var u=l.selectedColumn[c];u&&l.$.panel[u.panelName].find('[data-ax5grid-tr-data-index="'+u.dindex+'"]').find('[data-ax5grid-column-rowindex="'+u.rowIndex+'"][data-ax5grid-column-colindex="'+u.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},n={on:function(t){var a=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(i.init.call(a,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&(i.update.call(a,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),e.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){n.off.call(a)}).on("mouseleave.ax5grid-"+this.instanceId,function(){n.off.call(a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a=function(t,e,i){var n=this,a=this.config,o={selected:function(t){for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[t][a.columnKeys.selected])},selectedClear:function(){for(var t=this.selectedDataIndexs.length;t--;)for(var e=this.selectedDataIndexs[t],i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+e+'"]').attr("data-ax5grid-selected",!1),this.list[e][a.columnKeys.selected]=!1},cellChecked:function(t,e){var i=(e.key,e.rowIndex),n=e.colIndex,a=function(){var e=[];return this.xvar.frozenRowIndex>t&&e.push("top"),this.xvar.frozenColumnIndex>n&&e.push("left"),e.push("body"),"top"!==e[0]&&e.push("scroll"),e.join("-")}.call(this);this.$.panel[a].find('[data-ax5grid-tr-data-index="'+t+'"]').find('[data-ax5grid-column-rowIndex="'+i+'"][data-ax5grid-column-colIndex="'+n+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+e.checked)}};t.forEach(function(t){if(!o[t])throw"invaild state name";o[t].call(n,e,i)})},o=function(){var i=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(e){var n,o,l,s,r,d,c,u={"default":function(e){var n=i.bodyRowMap[e.rowIndex+"_"+e.colIndex],o={self:i,page:i.page,list:i.list,item:i.list[e.dindex],dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,column:n,value:i.list[e.dindex][n.key]};if(n.editor&&"checkbox"==n.editor.type){var l,s,r=t.data.getValue.call(i,e.dindex,n.key);s=n.editor.config&&n.editor.config.trueValue?(l=!(r==n.editor.config.trueValue))?n.editor.config.trueValue:n.editor.config.falseValue:l=0==r||"false"==r||r<"1"?"true":"false",t.data.setValue.call(i,e.dindex,n.key,s),a.call(i,["cellChecked"],e.dindex,{key:n.key,rowIndex:e.rowIndex,colIndex:e.colIndex,editorConfig:n.editor.config,checked:l})}else i.config.body.onClick&&i.config.body.onClick.call(o)},rowSelector:function(e){t.data.select.call(i,e.dindex),a.call(i,["selected"],e.dindex)},lineNumber:function(t){}};n=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),s=Number(this.getAttribute("data-ax5grid-column-col")),d=Number(this.getAttribute("data-ax5grid-column-rowIndex")),c=Number(this.getAttribute("data-ax5grid-column-colIndex")),r=Number(this.getAttribute("data-ax5grid-data-index")),o in u&&u[o]({panelName:n,attr:o,row:l,col:s,dindex:r,rowIndex:d,colIndex:c})}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(e){var n,a,o,l,s,r,d,c={"default":function(n){if(this.isInlineEditing)for(var a in this.inlineEditing)if(a==n.dindex+"_"+n.colIndex+"_"+n.rowIndex)return this;var o=i.bodyRowMap[n.rowIndex+"_"+n.colIndex],l="";o&&(i.list[s].__isGrouping||(l=t.data.getValue.call(i,s,o.key))),t.body.inlineEdit.active.call(i,i.focusedColumn,e,l)},rowSelector:function(t){},lineNumber:function(t){}};n=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),o=Number(this.getAttribute("data-ax5grid-column-row")),l=Number(this.getAttribute("data-ax5grid-column-col")),r=Number(this.getAttribute("data-ax5grid-column-rowIndex")),d=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),a in c&&c[a]({panelName:n,attr:a,row:o,col:l,dindex:s,rowIndex:r,colIndex:d})}),this.$.container.body.on("mouseover","tr",function(){return}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&n.on.call(i,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("dragstart",function(t){return e.stopEvent(t),!1}),l.call(this)},l=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var i={rows:[]},n=0,a=t.rows.length;n<a;n++)if(i.rows[n]={cols:[]},0===n){var o={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},o,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},o,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(l))}return i}.call(this,this.bodyRowTable),this.leftBodyRowData=i.leftData,this.bodyRowData=i.rightData,e.body.grouping){var n=t.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(t){for(var i={rows:[]},n=0,a=t.rows.length;n<a;n++)if(i.rows[n]={cols:[]},0===n){var o={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},o,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},o,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(l))}return i}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=n.leftData,this.bodyGroupingData=n.rightData}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var a=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=a.leftData,this.footSumData=a.rightData}},s=function(i,n,a,o,l){var s=o.key;if("__d-index__"===s)return a+1;if("__d-checkbox__"===s)return'<div class="checkBox"></div>';if(o.editor&&function(e){return e.type in t.inlineEditor&&"inline"==t.inlineEditor[e.type].editMode}(o.editor))return l=l||t.data.getValue.call(this,a,s),e.isFunction(o.editor.disabled)&&o.editor.disabled.call({list:i,dindex:a,item:i[a],key:s,value:l})?l:t.inlineEditor[o.editor.type].getHtml(this,o.editor,l);if(o.formatter){var r={key:s,value:l||t.data.getValue.call(this,a,s),dindex:a,item:n,list:i};return e.isFunction(o.formatter)?o.formatter.call(r):t.formatter[o.formatter].call(r)}var d="&nbsp;";return"undefined"!=typeof l?d=l:(l=t.data.getValue.call(this,a,s),"undefined"!=typeof l&&(d=l)),d},r=function(i,n,a){var o,l,s=a.key,r=a.label;return"undefined"==typeof s?(l={key:s,list:i.__groupingList,groupBy:i.__groupingBy},o=e.isFunction(r)?r.call(l):r,i[a.colIndex]=o,o):"__d-index__"===s?n+1:"__d-checkbox__"===s?"&nbsp;":a.collector?(l={key:s,list:i.__groupingList
},o=e.isFunction(a.collector)?a.collector.call(l):t.collector[a.collector].call(l),i[a.colIndex]=o,a.formatter?(l.value=o,e.isFunction(a.formatter)?a.collector.call(l):t.formatter[a.formatter].call(l)):o):"&nbsp;"},d=function(i,n){var a=n.key,o=n.label;if("undefined"==typeof a)return o;if("__d-index__"===a||"__d-checkbox__"===a)return"&nbsp;";if(n.collector){var l,s={key:a,list:i};return l=e.isFunction(n.collector)?n.collector.call(s):t.collector[n.collector].call(s),n.formatter?(s.value=l,e.isFunction(n.formatter)?n.collector.call(s):t.formatter[n.formatter].call(s)):l}return"&nbsp;"},c=function(i){var n=this.config,a=this.list;i&&(l.call(this),this.xvar.paintStartRowIndex=void 0);var o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex;if(this.xvar.dataRowCount===a.length&&this.xvar.paintStartRowIndex===o)return this;var c="undefined"==typeof this.xvar.paintStartRowIndex,u=this.asideBodyRowData,h=this.leftBodyRowData,p=this.bodyRowData,f=this.leftFootSumData,g=this.footSumData,m=this.asideBodyGroupingData,x=this.leftBodyGroupingData,v=this.bodyGroupingData,b=n.body.align,y=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1;this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.list.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var w=function(t,i,a,o,l,d){var u=this.$.panel[t];if(!c&&!d)return this.$.livePanelKeys.push(t),!1;var h,p,f,g,m,x,v,y,w,_,I,k=[],C=function(){return"undefined"!=typeof d&&"undefined"!=typeof d.paintStartRowIndex||(d={paintStartRowIndex:0,paintRowCount:l.length},!1)}();for(k.push('<table border="0" cellpadding="0" cellspacing="0">'),k.push("<colgroup>"),h=0,p=i.length;h<p;h++)k.push('<col style="width:'+i[h]._width+'px;"  />');for(k.push("<col  />"),k.push("</colgroup>"),f=d.paintStartRowIndex,g=function(){var t;return t=l.length,d.paintRowCount+d.paintStartRowIndex<t&&(t=d.paintRowCount+d.paintStartRowIndex),t}();f<g;f++){var $,S=!1;o&&"__isGrouping"in l[f]?($=o,S=!0):$=a;for(m=0,x=$.rows.length;m<x;m++){for(k.push('<tr class="tr-'+f%4+'"',S?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-selected="'+(l[f][n.columnKeys.selected]||"false")+'">'),v=0,y=$.rows[m].cols.length;v<y;v++)w=$.rows[m].cols[v],_=n.body.columnHeight*w.rowspan-n.body.columnBorderWidth,I=w.align||b,k.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-row="'+m+'" ','data-ax5grid-column-col="'+v+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[f],index:f})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),v==y-1&&(i+="isLastColumn "),i}.call(this,w)+'" ','style="height: '+_+'px;min-height: 1px;">'),k.push(function(t){var e=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return w.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(I?'data-ax5grid-text-align="'+I+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(_),S?r.call(this,l[f],f,w):s.call(this,l,l[f],f,w),"</span>"),k.push("</td>");k.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),k.push("</tr>")}}return k.push("</table>"),C&&u.css({paddingTop:(d.paintStartRowIndex-this.xvar.frozenRowIndex)*d.bodyTrHeight}),u.html(k.join("")),this.$.livePanelKeys.push(t),!0},_=function(t,i,a,o,l){var s=this.$.panel[t];if(!c&&!l)return this.$.livePanelKeys.push(t),!1;var r,u,h,p,f,g,m,x,v,y=[];for(y.push('<table border="0" cellpadding="0" cellspacing="0">'),y.push("<colgroup>"),r=0,u=i.length;r<u;r++)y.push('<col style="width:'+i[r]._width+'px;"  />');for(y.push("<col  />"),y.push("</colgroup>"),h=0,p=a.rows.length;h<p;h++){for(y.push('<tr class="tr-sum">'),f=0,g=a.rows[h].cols.length;f<g;f++)m=a.rows[h].cols[f],x=n.body.columnHeight*m.rowspan-n.body.columnBorderWidth,v=m.align||b,y.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+m.colIndex+"_"+h],this.selectedColumn["sum_"+m.colIndex+"_"+h]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),f==g-1&&(i+="isLastColumn "),i}.call(this,m)+'" ','style="height: '+x+'px;min-height: 1px;">'),y.push(function(t){var e=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return m.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(x),d.call(this,o,m),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),y.push("</tr>")}return y.push("</table>"),s.html(y.join("")),this.$.livePanelKeys.push(t),!0},I={paintStartRowIndex:o,paintRowCount:y,bodyTrHeight:this.xvar.bodyTrHeight};n.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&w.call(this,"top-aside-body",this.asideColGroup,u,m,a.slice(0,this.xvar.frozenRowIndex)),w.call(this,"aside-body-scroll",this.asideColGroup,u,m,a,I),n.footSum),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&w.call(this,"top-left-body",this.leftHeaderColGroup,h,x,a.slice(0,this.xvar.frozenRowIndex)),w.call(this,"left-body-scroll",this.leftHeaderColGroup,h,x,a,I),n.footSum&&this.needToPaintSum&&_.call(this,"bottom-left-body",this.leftHeaderColGroup,f,a)),this.xvar.frozenRowIndex>0&&w.call(this,"top-body-scroll",this.headerColGroup,p,v,a.slice(0,this.xvar.frozenRowIndex)),w.call(this,"body-scroll",this.headerColGroup,p,v,a,I),n.footSum&&this.needToPaintSum&&_.call(this,"bottom-body-scroll",this.headerColGroup,g,a,I),n.rightSum,this.xvar.paintStartRowIndex=o,this.xvar.paintRowCount=y,this.xvar.dataRowCount=a.length,this.needToPaintSum=!1,t.page.statusUpdate.call(this)},u=function(i,n,a,o,l){var c=this,u=this.config,h=this.list,p=this.$.panel[i].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+a+'"][data-ax5grid-column-colindex="'+o+'"]').find("[data-ax5grid-cellholder]"),f=this.colGroup,g=f[o];p.html(s.call(this,h,h[n],n,g)),g.editor&&g.editor.updateWith&&g.editor.updateWith.forEach(function(e){f.forEach(function(i){if(i.key==e){var a=i.rowIndex,o=i.colIndex,l=t.util.findPanelByColumnIndex.call(c,n,o,a).panelName,r=c.$.panel[l].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+a+'"][data-ax5grid-column-colindex="'+o+'"]').find("[data-ax5grid-cellholder]");r.html(s.call(c,h,h[n],n,i))}})});var m=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,x=this.leftFootSumData,v=this.footSumData,b=(this.asideBodyGroupingData,this.leftBodyGroupingData),y=this.bodyGroupingData,w=u.body.align,_=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,I={paintStartRowIndex:m,paintRowCount:_,bodyTrHeight:this.xvar.bodyTrHeight},k=function(t,i,n,a,o){var l,s,r,c,h,p,f,g,m,x=this.$.panel[t],v=[];for(v.push('<table border="0" cellpadding="0" cellspacing="0">'),v.push("<colgroup>"),l=0,s=i.length;l<s;l++)v.push('<col style="width:'+i[l]._width+'px;"  />');for(v.push("<col  />"),v.push("</colgroup>"),r=0,c=n.rows.length;r<c;r++){for(v.push('<tr class="tr-sum">'),h=0,p=n.rows[r].cols.length;h<p;h++)f=n.rows[r].cols[h],g=u.body.columnHeight*f.rowspan-u.body.columnBorderWidth,m=f.align||w,v.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+r+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+r+'" ','data-ax5grid-column-colIndex="'+f.colIndex+'" ','data-ax5grid-column-attr="'+(f.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+f.colIndex+"_"+r],this.selectedColumn["sum_"+f.colIndex+"_"+r]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),u.body.columnBorderWidth&&(i+="hasBorder "),h==p-1&&(i+="isLastColumn "),i}.call(this,f)+'" ','style="height: '+g+'px;min-height: 1px;">'),v.push(function(t){var e=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return f.multiLine||(t=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(g),d.call(this,a,f),"</span>"),v.push("</td>");v.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>"),v.push("</tr>")}return v.push("</table>"),x.html(v.join("")),!0},C=function(t,i,n,a,o){var l,s,d,c,h,p,f,g,m,x=this.$.panel[t],v=[];for(l=o.paintStartRowIndex,s=function(){var t;return t=a.length,o.paintRowCount+o.paintStartRowIndex<t&&(t=o.paintRowCount+o.paintStartRowIndex),t}();l<s;l++)if(n&&"__isGrouping"in a[l]){var b=n;for(v=[],d=0,c=b.rows.length;d<c;d++){for(h=0,p=b.rows[d].cols.length;h<p;h++)f=b.rows[d].cols[h],g=u.body.columnHeight*f.rowspan-u.body.columnBorderWidth,m=f.align||w,v.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+f.rowIndex+'" ','data-ax5grid-column-colIndex="'+f.colIndex+'" ','data-ax5grid-column-attr="'+(f.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[l+"_"+f.colIndex+"_"+f.rowIndex],this.selectedColumn[l+"_"+f.colIndex+"_"+f.rowIndex]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[l],index:l})+" ":t.styleClass+" "),u.body.columnBorderWidth&&(i+="hasBorder "),h==p-1&&(i+="isLastColumn "),i}.call(this,f)+'" ','style="height: '+g+'px;min-height: 1px;">'),v.push(function(t){var e=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return f.multiLine||(t=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(g),r.call(this,a[l],l,f),"</span>"),v.push("</td>");v.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>")}x.find('tr[data-ax5grid-tr-data-index="'+l+'"]').html(v.join(""))}};u.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&C.call(this,"top-left-body",this.leftHeaderColGroup,b,h.slice(0,this.xvar.frozenRowIndex)),C.call(this,"left-body-scroll",this.leftHeaderColGroup,b,h,I)),this.xvar.frozenRowIndex>0&&C.call(this,"top-body-scroll",this.headerColGroup,y,h.slice(0,this.xvar.frozenRowIndex)),C.call(this,"body-scroll",this.headerColGroup,y,h,I)),this.xvar.frozenColumnIndex>0&&u.footSum&&this.needToPaintSum&&k.call(this,"bottom-left-body",this.leftHeaderColGroup,x,h),u.footSum&&this.needToPaintSum&&k.call(this,"bottom-body-scroll",this.headerColGroup,v,h,I)},h=function(t,e){var i=this.config;i.asidePanelWidth>0&&"top"in t&&this.$.panel["aside-body-scroll"].css({top:t.top}),this.xvar.frozenColumnIndex>0&&"top"in t&&this.$.panel["left-body-scroll"].css({top:t.top}),this.xvar.frozenRowIndex>0&&"left"in t&&this.$.panel["top-body-scroll"].css({left:t.left}),this.$.panel["body-scroll"].css(t),i.footSum&&"left"in t&&this.$.panel["bottom-body-scroll"].css({left:t.left}),!e&&"top"in t&&c.call(this)},p=function(){i.focusClear.call(this),i.clear.call(this),this.isInlineEditing&&g.deActive.call(this)},f=function(e){var n={UD:function(e){var n,a,o,l=!0;for(var s in this.focusedColumn){n=jQuery.extend({},this.focusedColumn[s],!0);break}for(a=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],i.focusClear.call(this),i.clear.call(this),e>0?n.rowIndex+(a.rowspan-1)+e>this.bodyRowTable.rows.length-1?(n.dindex=n.dindex+e,n.rowIndex=0,n.dindex>this.list.length-1&&(n.dindex=this.list.length-1,l=!1)):n.rowIndex=n.rowIndex+e:n.rowIndex+e<0?(n.dindex=n.dindex+e,n.rowIndex=this.bodyRowTable.rows.length-1,n.dindex<0&&(n.dindex=0,l=!1)):n.rowIndex=n.rowIndex+e,o=0;"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex];){if(0==n.rowIndex||o%2==(e>0?0:1)?n.colIndex--:n.rowIndex--,n.rowIndex<=0&&n.colIndex<=0){l=!1;break}o++}var r=t.util.findPanelByColumnIndex.call(this,n.dindex,n.colIndex);return n.panelName=r.panelName,function(){n.dindex+1>this.xvar.frozenRowIndex&&(n.dindex<=this.xvar.paintStartRowIndex?(h.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):n.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(h.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[n.dindex+"_"+n.colIndex+"_"+n.rowIndex]=n,this.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').attr("data-ax5grid-column-focused","true"),l},LR:function(e){var n,a,o=!0,l=0,s=!1,r="";for(var d in this.focusedColumn){n=jQuery.extend({},this.focusedColumn[d],!0);break}for(a=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],i.focusClear.call(this),i.clear.call(this),e<0?(n.colIndex=n.colIndex+e,n.colIndex<0&&(n.colIndex=0,o=!1)):(n.colIndex=n.colIndex+(a.colspan-1)+e,n.colIndex>this.colGroup.length-1&&(n.colIndex=this.colGroup.length-1,o=!1)),"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex]&&(n.rowIndex=0),l=0;"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex];){if(n.colIndex--,n.rowIndex<=0&&n.colIndex<=0){o=!1;break}l++}var c=t.util.findPanelByColumnIndex.call(this,n.dindex,n.colIndex);n.panelName=c.panelName,r=c.containerPanelName,s=c.isScrollPanel,this.focusedColumn[n.dindex+"_"+n.colIndex+"_"+n.rowIndex]=n;var u=this.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(u&&s){var p=function(){return u.position().left+u.outerWidth()>Math.abs(this.$.panel[n.panelName].position().left)+this.$.panel[r].width()?u.position().left+u.outerWidth()-this.$.panel[r].width():Math.abs(this.$.panel[n.panelName].position().left)>u.position().left?u.position().left:void 0}.call(this);"undefined"!=typeof p&&(t.header.scrollTo.call(this,{left:-p}),h.call(this,{left:-p}),t.scroller.resize.call(this))}return o},INDEX:function(e){var n,a,o,l=!0;for(var s in this.focusedColumn){n=jQuery.extend({},this.focusedColumn[s],!0);break}for(n||(n={rowIndex:0,colIndex:0}),a=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],i.focusClear.call(this),i.clear.call(this),"end"==e&&(e=this.list.length-1),n.dindex=e,n.rowIndex=0,o=0;"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex]&&(0==n.rowIndex||o%2==(_dy>0?0:1)?n.colIndex--:n.rowIndex--,!(n.rowIndex<=0&&n.colIndex<=0));)o++;var r=t.util.findPanelByColumnIndex.call(this,n.dindex,n.colIndex);return n.panelName=r.panelName,function(){n.dindex+1>this.xvar.frozenRowIndex&&(n.dindex<this.xvar.paintStartRowIndex?(h.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):n.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(h.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[n.dindex+"_"+n.colIndex+"_"+n.rowIndex]=n,this.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').attr("data-ax5grid-column-focused","true"),l}},a={UP:function(){return n.UD.call(this,-1)},DOWN:function(){return n.UD.call(this,1)},LEFT:function(){return n.LR.call(this,-1)},RIGHT:function(){return n.LR.call(this,1)},HOME:function(){return n.INDEX.call(this,0)},END:function(){return n.INDEX.call(this,"end")},position:function(t){return n.INDEX.call(this,t)}};return e in a?a[e].call(this):a.position.call(this,e)},g={active:function(i,n,o){var l,s,r,d,c,u,h,p=this;for(var f in i){if(d=i[f].panelName,l=i[f].dindex,s=i[f].colIndex,r=i[f].rowIndex,c=i[f].colspan,u=this.colGroup[s],!(h=u.editor))return this;if(e.isFunction(h.disabled)&&h.disabled.call({list:this.list,dindex:l,item:this.list[l],key:u.key,value:o}))return this;if(!function(e,i){if(e.type in t.inlineEditor)return"popup"==t.inlineEditor[e.type].editMode}(h)){if("checkbox"==h.type){var g,m;m=h.config&&h.config.trueValue?(g=!(o==h.config.trueValue))?h.config.trueValue:h.config.falseValue:g=0==o||"false"==o||o<"1"?"true":"false",t.data.setValue.call(p,l,u.key,m),a.call(p,["cellChecked"],l,{key:u.key,rowIndex:r,colIndex:s,editorConfig:u.editor.config,checked:g})}return this}if(this.list[l].__isGrouping)return!1;if(f in this.inlineEditing)return!1;this.inlineEditing[f]={panelName:d,columnKey:f,column:i[f],useReturnToSave:t.inlineEditor[h.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var x=function(t,i){return"money"==i.type?e.number(t,{money:!0}):t||""}.call(this,o,h);return this.inlineEditing[f].$inlineEditorCell=this.$.panel[d].find('[data-ax5grid-tr-data-index="'+l+'"]').find('[data-ax5grid-column-rowindex="'+r+'"][data-ax5grid-column-colindex="'+s+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[f].$inlineEditor=t.inlineEditor[h.type].init(this,f,h,this.inlineEditing[f].$inlineEditorCell,x),!0}},deActive:function(i,n,a){if(!this.inlineEditing[n])return this;var o=this.inlineEditing[n].panelName,l=this.inlineEditing[n].column.dindex,s=this.inlineEditing[n].column.rowIndex,r=this.inlineEditing[n].column.colIndex,d=this.bodyRowMap[this.inlineEditing[n].column.rowIndex+"_"+this.inlineEditing[n].column.colIndex],c=function(t){return"undefined"==typeof a?"SELECT"==t.get(0).tagName||"INPUT"==t.get(0).tagName||"TEXTAREA"==t.get(0).tagName?t.val():(i="CANCEL",!1):a}(this.inlineEditing[n].$inlineEditor),u=function(t,i){return"money"==i.type?e.number(t):t}.call(this,c,d.editor),h={CANCEL:function(t,e,i){h.__clear.call(this)},RETURN:function(e,i,n){t.data.setValue.call(this,e,i.key,n)?(h.__clear.call(this),t.body.repaintCell.call(this,o,l,s,r,n)):h.__clear.call(this)},__clear:function(){this.isInlineEditing=!1;var t=this.inlineEditing[n].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[n].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[n].$inlineEditor.ax5select("close"),this.inlineEditing[n].$inlineEditor.remove(),this.inlineEditing[n].$inlineEditor=null,this.inlineEditing[n].$inlineEditorCell=null,this.inlineEditing[n]=void 0,delete this.inlineEditing[n]}};i in h?h[i||"RETURN"].call(this,l,d,u):h.__clear.call(this)},keydown:function(e,i){var n={ESC:function(){for(var t in this.inlineEditing)g.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing)this.inlineEditing[i]&&this.inlineEditing[i].useReturnToSave&&g.deActive.call(this,"RETURN",i);else for(var e in this.focusedColumn){var n=this.focusedColumn[e],a=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],o=n.dindex,l="";a&&(this.list[o].__isGrouping||(l=t.data.getValue.call(this,o,a.key))),t.body.inlineEdit.active.call(this,this.focusedColumn,null,l)}}};e in n&&n[e].call(this,e)}};t.body={init:o,repaint:c,repaintCell:u,updateRowState:a,scrollTo:h,blur:p,moveFocus:f,inlineEdit:g}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){for(var t=0,i=this.list.length;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]));return t},n=function(){for(var t=0,i=this.list.length,n=0;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]),n++);return e.number(t/(n||1),{round:2})};t.collector={sum:i,avg:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){},n=function(t){for(var e=0,i=t.length,n=[];e<i;e++)t[e]&&!t[e].__isGrouping&&(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),n.push(jQuery.extend({},t[e])));return n},a=function(t){this.selectedDataIndexs=[];var i=0,n=t.length,a=[],o=0;if(this.config.body.grouping)for(var l,s,r=e.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),d=0,c=r.length,u=[];i<n+1;i++)if(d=0,t[i]&&t[i][this.config.columnKeys.deleted])this.deletedList.push(t[i]);else{for(l="",u=[];d<c;d++){if(t[i]&&(l+="$|$"+t[i][r[d].key]),o>0&&l!=r[d].compareString){for(var h={keys:[],labels:[],list:r[d].list},p=0;p<d+1;p++)h.keys.push(r[p].key),h.labels.push(t[i-1][r[p].key]);u.push(h),r[d].list=[]}r[d].list.push(t[i]),r[d].compareString=l}for(s=u.length;s--;)a.push({__isGrouping:!0,__groupingList:u[s].list,__groupingBy:{keys:u[s].keys,labels:u[s].labels}});t[i]&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),a.push(t[i]),o++)}else for(;i<n;i++)t[i]&&t[i][this.config.columnKeys.deleted]?this.deletedList.push(t[i]):t[i]&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),a.push(t[i]));return a},o=function(i){return e.isArray(i)?(this.page=null,this.list=a.call(this,Object.keys(this.sortInfo).length?m.call(this,this.sortInfo,i):i),this.deletedList=[]):"page"in i&&(this.page=jQuery.extend({},i.page),this.list=a.call(this,Object.keys(this.sortInfo).length?m.call(this,this.sortInfo,i.list):i.list),this.deletedList=[]),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this.config.body.grouping,this},l=function(t){return{list:this.list,page:this.page}},s=function(e){var i=[],n=0,a=this.list.length;switch(e){case"modified":for(;n<a;n++)this.list[n]&&!this.list[n].__isGrouping&&this.list[n][this.config.columnKeys.modified]&&i.push(jQuery.extend({},this.list[n]));break;case"selected":for(;n<a;n++)this.list[n]&&!this.list[n].__isGrouping&&this.list[n][this.config.columnKeys.selected]&&i.push(jQuery.extend({},this.list[n]));break;case"deleted":i=[].concat(this.deletedList);break;default:i=t.data.clearGroupingData.call(this,this.list)}return i},r=function(i,o){var l=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){l=[].concat(i).concat(l)},last:function(){l=l.concat([].concat(i))}};if("undefined"==typeof o&&(o="last"),o in s)i[this.config.columnKeys.modified]=!0,s[o].call(this,i);else{if(!e.isNumber(o))throw"invalid argument _dindex";l=l.splice(o,[].concat(i))}return this.config.body.grouping?l=a.call(this,m.call(this,this.sortInfo,l)):Object.keys(this.sortInfo).length&&(l=m.call(this,this.sortInfo,l)),this.list=l,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},d=function(i){var o=this.config.body.grouping?n.call(this,this.list):this.list,l={first:function(){o.splice(i,1)},last:function(){var t=o.length-1;o.splice(t,1)}};if("undefined"==typeof i&&(i="last"),i in l)l[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";o.splice(i,1)}return this.config.body.grouping?o=a.call(this,m.call(this,this.sortInfo,o)):Object.keys(this.sortInfo).length&&(o=m.call(this,this.sortInfo,o)),this.list=o,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},c=function(i){var o=this.config.body.grouping?n.call(this,this.list):this.list,l={first:function(){o[0][this.config.columnKeys.deleted]=!0},last:function(){o[o.length-1][this.config.columnKeys.deleted]=!0},selected:function(){for(var t=o.length;t--;)o[t][this.config.columnKeys.selected]&&(o[t][this.config.columnKeys.deleted]=!0)}};if("undefined"==typeof i&&(i="last"),i in l)l[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";o[i][this.config.columnKeys.deleted]=!0}return o=this.config.body.grouping?a.call(this,m.call(this,this.sortInfo,o)):Object.keys(this.sortInfo).length?a.call(this,m.call(this,this.sortInfo,o)):a.call(this,o),this.list=o,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},u=function(t,i){if(!e.isNumber(i))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(i,1,t),this.config.body.grouping&&(this.list=a.call(this,n.call(this,this.list)))},h=function(e,i,n){if(this.needToPaintSum=!0,/[\.\[\]]/.test(i))try{this.list[e][this.config.columnKeys.modified]=!0,Function("val","this"+t.util.getRealPathForDataItem(i)+" = val;").call(this.list[e],n)}catch(a){}else this.list[e][this.config.columnKeys.modified]=!0,this.list[e][i]=n;return!0},p=function(e,i,n){if(/[\.\[\]]/.test(i))try{n=Function("","return this"+t.util.getRealPathForDataItem(i)+";").call(this.list[e])}catch(a){}else n=this.list[e][i];return n},f=function(){this.selectedDataIndexs=[]},g=function(t,e){var i=this.config;return!this.list[t].__isGrouping&&("undefined"==typeof e?(this.list[t][i.columnKeys.selected]=!this.list[t][i.columnKeys.selected])&&this.selectedDataIndexs.push(t):(this.list[t][i.columnKeys.selected]=e)&&this.selectedDataIndexs.push(t),this.list[t][i.columnKeys.selected])},m=function(i,n){var a=n||this.list,o=[];for(var l in i)o[i[l].seq]={key:l,order:i[l].orderBy};o=e.filter(o,function(){return"undefined"!=typeof this});var s,r,d=0,c=o.length;return a.sort(function(t,e){for(d=0;d<c;d++){if(s=t[o[d].key],r=e[o[d].key],("undefined"==typeof s?"undefined":_typeof(s))!==("undefined"==typeof r?"undefined":_typeof(r))&&(s=""+s,r=""+r),s<r)return"asc"===o[d].order?-1:1;if(s>r)return"asc"===o[d].order?1:-1}}),n?a:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this)};t.data={init:i,set:o,get:l,getList:s,setValue:h,getValue:p,clearSelect:f,select:g,add:r,remove:d,deleteRow:c,update:u,sort:m,initData:a,clearGroupingData:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){return e.number(this.value,{money:!0})};t.formatter={money:i}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={on:function(n,a){var o=this,l=$(n),s=l.offset().left,r=o.$.container.root.offset().left;o.xvar.columnResizerIndex=a;var d={min:-o.colGroup[a]._width+2,max:o.colGroup[a+1]?o.colGroup[a+1]._width:o.$.container.root.width()-2};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var i=t.util.getMousePosition(e);o.xvar.__da=i.clientX-o.xvar.mousePosition.clientX,d.min>o.xvar.__da?o.xvar.__da=d.min:d.max<o.xvar.__da&&(o.xvar.__da=d.max),o.xvar.columnResizerLived||o.$.resizer.horizontal.addClass("live"),o.xvar.columnResizerLived=!0,o.$.resizer.horizontal.css({left:s+o.xvar.__da-r})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){i.off.call(o),e.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){i.off.call(o),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(){var n=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(e){var i=this.getAttribute("data-ax5grid-column-key"),a=this.getAttribute("data-ax5grid-column-colindex"),o=(this.getAttribute("data-ax5grid-column-rowindex"),n.colGroup[a]);i&&o&&(o.sortable!==!0&&n.config.sortable!==!0||o.sortable===!1||o.sortFixed||s.call(n,o.key)),t.body.blur.call(n)}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(a){var o=this.getAttribute("data-ax5grid-column-resizer");n.xvar.mousePosition=t.util.getMousePosition(a),i.on.call(n,this,Number(o)),e.stopEvent(a)}).on("dragstart",function(t){return e.stopEvent(t),!1}),a.call(this)},a=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex);this.asideHeaderData=function(t){for(var i=[],n={rows:[]},a=0,o=t.rows.length;a<o;a++)if(n.rows[a]={cols:[]},0===a){var l={label:"",colspan:1,rowspan:t.rows.length,key:"__dindex__",colIndex:null},s={};e.showLineNumber&&(s=jQuery.extend({},l,{label:"&nbsp;",width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth}),i.push(s),n.rows[a].cols.push(s)),e.showRowSelector&&(s=jQuery.extend({},l,{label:"",width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth}),i.push(s),n.rows[a].cols.push(s))}return this.asideColGroup=i,n}.call(this,this.headerTable),this.leftHeaderData=i.leftData,this.headerData=i.rightData},o=function(t){var i=this.config,n=this.colGroup;t&&(a.call(this),this.xvar.paintStartRowIndex=void 0);var o=this.asideHeaderData,l=this.leftHeaderData,s=this.headerData,r=i.header.align;this.leftHeaderColGroup=n.slice(0,this.config.frozenColumnIndex),this.headerColGroup=n.slice(this.config.frozenColumnIndex);var d=function(t,a,o){var l=0,s=[];s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>");for(var d=0,c=a.length;d<c;d++)s.push('<col style="width:'+a[d]._width+'px;"  />'),l+=a[d]._width;s.push("<col  />"),s.push("</colgroup>");for(var u=0,h=o.rows.length;u<h;u++){var p="";s.push('<tr class="'+p+'">');for(var f=0,g=o.rows[u].cols.length;f<g;f++){var m=o.rows[u].cols[f],x=i.header.columnHeight*m.rowspan-i.header.columnBorderWidth,v=r||m.align;s.push("<td ",'data-ax5grid-column-attr="'+(m.columnAttr||"default")+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ',function(){return"undefined"!=typeof m.key?'data-ax5grid-column-key="'+m.key+'" ':""}(),'data-ax5grid-column-colindex="'+m.colIndex+'" ','data-ax5grid-column-rowindex="'+m.rowIndex+'" ','colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){
var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key})+" ":t.styleClass+" "),i.header.columnBorderWidth&&(n+="hasBorder "),f==g-1&&(n+="isLastColumn "),n}.call(this,m)+'" ','style="height: '+x+'px;min-height: 1px;">'),s.push(function(){var t=i.header.columnHeight-2*i.header.columnPadding-i.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" '+(v?'data-ax5grid-text-align="'+v+'"':"")+' style="height: '+(i.header.columnHeight-i.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),function(){var t="";return e.isNothing(m.key)||e.isNothing(m.colIndex)||i.sortable!==!0&&m.sortable!==!0||m.sortable===!1||(t+='<span data-ax5grid-column-sort="'+m.colIndex+'" data-ax5grid-column-sort-order="'+(n[m.colIndex].sort||"")+'" />'),t}(),m.label||"&nbsp;","</span>"),e.isNothing(m.colIndex)||i.enableFilter&&s.push('<span data-ax5grid-column-filter="'+m.colIndex+'" data-ax5grid-column-filter-value=""  />'),s.push("</td>")}s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),t.html(s.join("")),function(){for(var n=i.header.columnHeight*o.rows.length-i.header.columnBorderWidth,l=0,s=[],r=0,d=a.length;r<d;r++){var c=a[r];e.isNothing(c.colIndex)||(l+=c._width,s.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+n+"px;left: "+(l-4)+'px;"  />'))}t.append(s)}.call(this),l};i.asidePanelWidth>0&&d(this.$.panel["aside-header"],this.asideColGroup,o),i.frozenColumnIndex>0&&d(this.$.panel["left-header"],this.leftHeaderColGroup,l),this.xvar.scrollContentWidth=d(this.$.panel["header-scroll"],this.headerColGroup,s),i.rightSum},l=function(t){return this.$.panel["header-scroll"].css(t),this},s=function(t){var e="",i={},n=0;for(var a in this.sortInfo)this.sortInfo[a].fixed&&(i[a]=this.sortInfo[a],n++);for(var o=0,l=this.colGroup.length;o<l;o++)this.colGroup[o].key==t?(""==e&&(e="undefined"==typeof this.colGroup[o].sort?"desc":"desc"===this.colGroup[o].sort?"asc":void 0),this.colGroup[o].sort=e):this.config.multiSort||(this.colGroup[o].sort=void 0),"undefined"!=typeof this.colGroup[o].sort&&(i[this.colGroup[o].key]||(i[this.colGroup[o].key]={seq:n++,orderBy:this.colGroup[o].sort}));return this.setColumnSort(i),this},r=function(t){for(var e=0,i=this.colGroup.length;e<i;e++)for(var n in t)this.colGroup[e].key==n&&(this.colGroup[e].sort=t[n].orderBy);return this};t.header={init:n,repaint:o,scrollTo:l,toggleSort:s,applySortStatus:r}}(),function(){var t=ax5.ui.grid,e={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="text" value="'+n+'" >'},init:function(e,i,n,a,o){var l;return a.append(l=jQuery(this.getHtml(e,i,n,o))),this.bindUI(e,i,l,n,a,o),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,a,o){i.focus().select()}},i={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="money" value="'+n+'" >'},init:function(e,i,n,a,o){var l;return a.append(l=jQuery(this.getHtml(e,i,n,o))),this.bindUI(e,i,l,n,a,o),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,a,o){i.data("binded-ax5ui","ax5formater"),i.ax5formatter({pattern:"money"}),i.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="number" value="'+n+'" >'},init:function(e,i,n,a,o){var l;return a.append(l=jQuery(this.getHtml(e,i,n,o))),this.bindUI(e,i,l,n,a,o),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,a,o){i.data("binded-ax5ui","ax5formater"),i.ax5formatter({pattern:"number"}),i.focus().select()}},a={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="calendar" value="'+n+'" >'},init:function(t,e,i,n,a){var o;return n.append(o=jQuery(this.getHtml(t,e,i,a))),this.bindUI(t,e,o,i,n,a),o},bindUI:function(e,i,n,a,o,l){var s=e;n.data("binded-ax5ui","ax5picker"),n.ax5picker({direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&t.body.inlineEdit.deActive.call(s,"RETURN",i)}}),n.focus().select()}},o={useReturnToSave:!1,editMode:"popup",getHtml:function(t,e,i,n){var a=[];return a.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),a.push("</div>"),a.join("")},init:function(t,e,i,n,a){var o;return n.append(o=jQuery(this.getHtml(t,e,i,a))),this.bindUI(t,e,o,i,n,a),o},bindUI:function(e,i,n,a,o,l){var s={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,s,a.config),s.options.forEach(function(t){t[s.columnKeys.optionValue]==l&&(t[s.columnKeys.optionSelected]=!0)});var r=e;n.data("binded-ax5ui","ax5select"),n.ax5select({columnKeys:s.columnKeys,options:s.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?t.body.inlineEdit.deActive.call(r,"RETURN",i,this.value[0][s.columnKeys.optionValue]):"close"==this.state&&t.body.inlineEdit.deActive.call(r,"ESC",i)}}),n.ax5select("open"),n.ax5select("setValue",l),n.find("a").focus()}},l={editMode:"inline",getHtml:function(t,e,i){var n,a=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=e.config&&e.config.trueValue?i==e.config.trueValue?"true":"false":0==i||"false"==i||i<"1"?"false":"true";var o={marginTop:2,height:a-4};return jQuery.extend(!0,o,e.config),o.marginTop=(a-o.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+n+'" style="height:'+o.height+"px;width:"+o.height+"px;margin-top:"+o.marginTop+'px;"></div>'}};t.inlineEditor={text:e,money:i,number:n,date:a,select:o,checkbox:l}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t){var e=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},i={first:function(){e.call(this,0)},prev:function(){var t=this.page.currentPage-1;t<0&&(t=0),e.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),e.call(this,t)},last:function(){e.call(this,this.page.totalPages-1)}};t in i?i[t].call(this):e.call(this,t-1)},n=function(){var e=this;if(this.page){var n={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},a=this.config.page.navigationItemCount;n["@paging"]=function(){var t=[],e=n.currentPage-Math.floor(a/2);e<0&&(e=0);var i=n.currentPage+a;i>n.totalPages&&(i=n.totalPages),i-e>a&&(i=e+a),i-e<a&&(e=i-a),e<0&&(e=0);for(var o=e,l=i;o<l;o++)t.push({pageNo:o+1,selected:n.currentPage==o});return t}(),n["@paging"].length>0&&(n.hasPage=!0),this.$.page.navigation.html(t.tmpl.get("page_navigation",n)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){var t=this.getAttribute("data-ax5grid-page-move");i.call(e,t)})}else this.$.page.navigation.empty()},a=function(){var i=this.xvar.paintStartRowIndex,n=this.xvar.paintStartRowIndex+this.xvar.paintRowCount-1,a=this.xvar.dataRowCount;n>a&&(n=a),this.$.page.status.html(t.tmpl.get("page_status",{fromRowIndex:e.number(i+1,{money:!0}),toRowIndex:e.number(n,{money:!0}),totalElements:e.number(a,{money:!0})}))};t.page={navigationUpdate:n,statusUpdate:a}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={vertical:function(t,e){var i=e._content_height-e._panel_height,n=e._vertical_scroller_height-e.verticalScrollBarHeight,a=i*t.top/n;return a<0?a=0:i<a&&(a=i),{top:-a}},horizontal:function(t,e){var i=e._content_width-e._panel_width,n=e._horizontal_scroller_width-e.horizontalScrollBarWidth,a=i*t.left/n;return a<0?a=0:i<a&&(a=i),{left:-a}}},n={vertical:function(e,n){var a="vertical",o=n._content_height-n._panel_height,l=n._vertical_scroller_height-n.verticalScrollBarHeight,s=l*e/o;if(-s>l){s=-l;var r=i[a].call(this,{top:-s},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth});t.body.scrollTo.call(this,r)}return-s},horizontal:function(e,n){var a="horizontal",o=n._content_width-n._panel_width,l=n._horizontal_scroller_width-n.horizontalScrollBarWidth,s=l*e/o;if(-s>l){s=-l;var r=i[a].call(this,{left:-s},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth});t.header.scrollTo.call(this,r),t.body.scrollTo.call(this,r)}return-s}},a={click:function(e,n,a,o){var l=this,s=e.offset(),r={width:n.outerWidth(),height:n.outerHeight()},d={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),u=l.$.panel.body.height(),h=l.$.scroller.horizontal.innerWidth(),p=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,g=l.xvar.scrollContentWidth,m=l.$.scroller["vertical-bar"].outerHeight(),x=l.$.scroller["horizontal-bar"].outerWidth(),v={vertical:function(e){var i=t.util.getMousePosition(e),n=i.clientY-s.top;return n<0?n=0:n+r.height>d.height&&(n=d.height-r.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e),n=i.clientX-s.left;return n<0?n=0:n+r.width>d.width&&(n=d.width-r.width),{left:n}}},b=v[a](o);n.css(b);var y=i[a].call(l,b,{_content_width:g,_content_height:f,_panel_width:p,_panel_height:u,_horizontal_scroller_width:h,_vertical_scroller_height:c,verticalScrollBarHeight:m,horizontalScrollBarWidth:x});"horizontal"===a&&t.header.scrollTo.call(l,y),t.body.scrollTo.call(l,y)},on:function(e,n,o){var l=this,s=n.position(),r={width:n.outerWidth(),height:n.outerHeight()},d={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),u=l.$.panel.body.height(),h=l.$.scroller.horizontal.innerWidth(),p=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,g=l.xvar.scrollContentWidth,m=l.$.scroller["vertical-bar"].outerHeight(),x=l.$.scroller["horizontal-bar"].outerWidth(),v={vertical:function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientY-l.xvar.mousePosition.clientY;var n=s.top+l.xvar.__da;return n<0?n=0:n+r.height>d.height&&(n=d.height-r.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientX-l.xvar.mousePosition.clientX;var n=s.left+l.xvar.__da;return n<0?n=0:n+r.width>d.width&&(n=d.width-r.width),{left:n}}};l.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var a=v[o](e);n.css(a);var s=i[o].call(l,a,{_content_width:g,_content_height:f,_panel_width:p,_panel_height:u,_horizontal_scroller_width:h,_vertical_scroller_height:c,verticalScrollBarHeight:m,horizontalScrollBarWidth:x});"horizontal"===o&&t.header.scrollTo.call(l,s),t.body.scrollTo.call(l,s)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){a.off.call(l)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){a.off.call(l)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o={wheel:function(e){var i,n,a=this,o=a.$.panel["body-scroll"].position(),l=a.$.panel.body.height(),r=a.$.panel.body.width(),d=a.xvar.scrollContentHeight,c=a.xvar.scrollContentWidth,u=!1,h=!1;return i=o.left-e.x,n=o.top-e.y,n>=0?(n=0,u=!0):n<=l-d?(n=l-d,n>=0&&(n=0),u=!0):0==e.y&&(u=!0),i>=0?(i=0,h=!0):i<=r-c?(i=r-c,i>=0&&(i=0),h=!0):0==e.x&&(h=!0),t.header.scrollTo.call(this,{left:i}),t.body.scrollTo.call(this,{left:i,top:n}),s.call(this),!u||!h},on:function(){var i=this,n=i.$.panel["body-scroll"].position(),a=i.$.panel.body.height(),l=i.$.panel.body.width(),r=i.xvar.scrollContentHeight,d=i.xvar.scrollContentWidth,c=function(e){var o,s,c=t.util.getMousePosition(e);return i.xvar.__x_da=c.clientX-i.xvar.mousePosition.clientX,i.xvar.__y_da=c.clientY-i.xvar.mousePosition.clientY,o=n.left+i.xvar.__x_da,s=n.top+i.xvar.__y_da,s>=0?s=0:s<=a-r&&(s=a-r,s>=0&&(s=0)),o>=0?o=0:o<=l-d&&(o=l-d,o>=0&&(o=0)),{left:o,top:s}};this.xvar.__x_da=0,this.xvar.__y_da=0,jQuery(document.body).bind("touchmove.ax5grid-"+this.instanceId,function(n){var a=c(n);t.header.scrollTo.call(i,{left:a.left}),t.body.scrollTo.call(i,a,"noRepaint"),s.call(i),e.stopEvent(n)}).bind("touchend.ax5grid-"+this.instanceId,function(n){var a=c(n);t.header.scrollTo.call(i,{left:a.left}),t.body.scrollTo.call(i,a),s.call(i),e.stopEvent(n),o.off.call(i)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind("touchmove.ax5grid-"+this.instanceId).unbind("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l=function(){var i=this,n=this.config.scroller.trackPadding;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(n+1),left:n/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(n+1),top:n/2}),this.$.scroller["vertical-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.vertical.bind("click",function(t){t.target&&"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&a.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.horizontal.bind("click",function(t){t.target&&"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&a.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.bind("mousewheel DOMMouseScroll",function(t){var i=t.originalEvent,n={x:0,y:0};i.detail?n.y=10*i.detail:"undefined"==typeof i.deltaY?(n.y=-i.wheelDelta,n.x=0):(n.y=i.deltaY,n.x=i.deltaX),o.wheel.call(this,n)&&e.stopEvent(t)}.bind(this)),document.addEventListener&&ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(e){i.xvar.mousePosition=t.util.getMousePosition(e),o.on.call(i)})},s=function(){var t=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),i=this.$.panel.body.height(),a=this.$.panel.body.width(),o=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,s=i*t/o,r=a*e/l;s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:n.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:l,_content_height:o,_panel_width:a,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:s,horizontalScrollBarWidth:r}),height:s}),this.$.scroller["horizontal-bar"].css({left:n.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:l,_content_height:o,_panel_width:a,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:s,horizontalScrollBarWidth:r}),width:r}),t=null,e=null,i=null,a=null,o=null,l=null,s=null,r=null};t.scroller={init:l,resize:s}}(),function(){var t=ax5.ui.grid,e=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},i=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},n=function(){return"<span>{{fromRowIndex}} - {{toRowIndex}} of {{totalElements}}</span>"};t.tmpl={main:e,page_navigation:i,page_status:n,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t,e){for(var i={rows:[]},n={rows:[]},a=0,o=t.rows.length;a<o;a++){var l=t.rows[a];i.rows[a]={cols:[]},n.rows[a]={cols:[]};for(var s=0,r=l.cols.length;s<r;s++){var d=jQuery.extend({},l.cols[s]),c=d.colIndex,u=d.colIndex+d.colspan;if(c<e)if(u<=e)i.rows[a].cols.push(d);else{var h=jQuery.extend({},d),p=jQuery.extend({},h);h.colspan=e-h.colIndex,p.colIndex=e,p.colspan=d.colspan-h.colspan,i.rows[a].cols.push(h),n.rows[a].cols.push(p)}else n.rows[a].cols.push(d)}}return{leftData:i,rightData:n}},n=function(t){var e,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},a={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},o=function(t){var i=e.deepCopy(t),n=this.config,a={rows:[]},o=0,l=function u(t,e,i){for(var l={cols:[]},s=0,r=t.length;s<r;s++){var d=t[s],c=1;d.hidden||(d.colspan=1,d.rowspan=1,d.rowIndex=e,d.colIndex=function(){return i?(o=i.colIndex+s+1,i.colIndex+s):o++}(),l.cols.push(d),"columns"in d?c=u(d.columns,e+1,d):d.width="width"in d?d.width:n.columnMinWidth,d.colspan=c)}return l.cols.length>0?(a.rows[e]||(a.rows[e]={cols:[]}),a.rows[e].cols=a.rows[e].cols.concat(l.cols),l.cols.length-1+c):c};l(i,0);for(var s=0,r=a.rows.length;s<r;s++)for(var d=0,c=a.rows[s].cols.length;d<c;d++)"columns"in a.rows[s].cols[d]||(a.rows[s].cols[d].rowspan=r-s);return a},l=function(t){var i=e.deepCopy(t),n={rows:[]},a=0,o=function l(t,e,i){for(var o={cols:[]},s=0,r=t.length,d=(function h(t){for(var n=0,s=t.length;n<s;n++){var r=t[n],d=1;r.hidden||("key"in r?(r.colspan=1,r.rowspan=1,r.rowIndex=e,r.colIndex=function(){return i?(a=i.colIndex+n+1,i.colIndex+n):a++}(),o.cols.push(r),"columns"in r&&(d=l(r.columns,e+1,r)),r.colspan=d):"columns"in r&&h(r.columns,e))}});s<r;s++){var c=t[s],u=1;c.hidden||("key"in c?(c.colspan=1,c.rowspan=1,c.rowIndex=e,c.colIndex=function(){return i?(a=i.colIndex+s+1,i.colIndex+s):a++}(),o.cols.push(c),"columns"in c&&(u=l(c.columns,e+1,c)),c.colspan=u):"columns"in c&&d(c.columns,e))}return o.cols.length>0?(n.rows[e]||(n.rows[e]={cols:[]}),n.rows[e].cols=n.rows[e].cols.concat(o.cols),o.cols.length-1+u):u};return o(i,0),function(t){for(var e=0,i=t.rows.length;e<i;e++)for(var n=t.rows[e],a=0,o=n.cols.length;a<o;a++){var l=n.cols[a];"columns"in l||(l.rowspan=i-e)}}(n),n},s=function(t){var e={};return t.rows.forEach(function(t){t.cols.forEach(function(t){e[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),e},r=function(t){for(var e={rows:[]},i=0,n=t.length;i<n;i++){var a=t[i];e.rows[i]={cols:[]};for(var o=0,l=0,s=a.length;l<s&&!(o>this.columns.length);l++){var r=a[l].colspan||1;a[l].label||a[l].key?e.rows[i].cols.push({colspan:r,rowspan:1,colIndex:o,columnAttr:"sum",align:a[l].align,label:a[l].label,key:a[l].key,collector:a[l].collector,formatter:a[l].formatter}):e.rows[i].cols.push({colIndex:o,colspan:r,rowspan:1,label:"&nbsp;"}),o+=r}if(o-=1,o<this.columns.length+1)for(var l=o;l<this.columns.length+1;l++)e.rows[i].cols.push({colIndex:l+1,colspan:1,rowspan:1,label:"&nbsp;"})}return e},d=function(t){var e={rows:[]},i=0;e.rows[i]={cols:[]};for(var n=0,a=0,o=t.length;a<o&&!(n>this.columns.length);a++){var l=t[a].colspan||1;t[a].label||t[a].key?e.rows[i].cols.push({colspan:l,rowspan:1,rowIndex:0,colIndex:n,columnAttr:"default",align:t[a].align,label:t[a].label,key:t[a].key,collector:t[a].collector,formatter:t[a].formatter}):e.rows[i].cols.push({rowIndex:0,colIndex:n,colspan:l,rowspan:1,label:"&nbsp;"}),n+=l}if(n-=1,n<this.columns.length+1)for(var a=n;a<this.columns.length+1;a++)e.rows[i].cols.push({rowIndex:0,colIndex:a+1,colspan:1,rowspan:1,label:"&nbsp;"});return e},c=function(t,e,i){var n,a=!1,o=[];return this.xvar.frozenRowIndex>t&&o.push("top"),this.xvar.frozenColumnIndex>e&&o.push("left"),o.push("body"),(this.xvar.frozenColumnIndex<=e||this.xvar.frozenRowIndex<=t)&&(n=o.join("-"),o.push("scroll"),a=!0),{panelName:o.join("-"),containerPanelName:n,isScrollPanel:a}},u=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};t.util={divideTableByFrozenColumnIndex:i,getMousePosition:n,ENM:a,makeHeaderTable:o,makeBodyRowTable:l,makeBodyRowMap:s,makeFootSumTable:r,makeBodyGroupingTable:d,findPanelByColumnIndex:c,getRealPathForDataItem:u}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"mediaViewer",version:"0.4.3"},function(){var n=function(){var n,a=this,o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},l=function(t){var e="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;return{clientX:e.clientX,clientY:e.clientY,time:(new Date).getTime()}};this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",animateTime:250,columnKeys:{src:"src",poster:"poster",html:"html"},loading:{icon:"",text:"Now Loading"},viewer:{prevHandle:!1,nextHandle:!1,ratio:16/9},media:{prevHandle:"<",nextHandle:">",width:36,height:36,list:[]}},this.queue=[],this.openTimer=null,this.closeTimer=null,this.selectedIndex=0,this.mousePosition={},n=this.config;var s=function(){var e=jQuery.extend(!0,{id:this.id},n);try{return t.tmpl.get.call(this,"frame",e,n.columnKeys)}finally{e=null}},r=function(t,e){var o,l="",s={thumbnail:function(t){this.select(t.getAttribute("data-media-thumbnail"))},prev:function(t){this.selectedIndex>0?this.select(this.selectedIndex-1):this.select(n.media.list.length-1)},next:function(t){this.selectedIndex<n.media.list.length-1?this.select(this.selectedIndex+1):this.select(0)},viewer:function(t){a.onClick&&a.onClick.call({media:n.media.list[this.selectedIndex]})}};if(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-media-thumbnail")?(l="thumbnail",!0):"media-list-prev-handle"==t.getAttribute("data-media-viewer-els")?(l="prev",!0):"media-list-next-handle"==t.getAttribute("data-media-viewer-els")?(l="next",!0):"viewer"==t.getAttribute("data-media-viewer-els")?(l="viewer",!0):a.target.get(0)==t||void 0})){for(var r in s)if(r==l){o=s[r].call(this,e);break}return this}return this},d=function(){if(n.media&&n.media.list&&n.media.list.length>0){for(var t=n.media.list.length,e=0;t--;)if(n.media.list[t].selected){e=t;break}0==e&&(n.media.list[0].selected=!0);try{return e}finally{t=null,e=null}}},c=function(){var t=this.$.list.find("[data-media-thumbnail="+this.selectedIndex+"]"),e=t.position(),i=t.outerWidth(),n=this.$.list.outerWidth(),a=this.$["list-table"].position().left,o=this.$["list-table"].outerWidth(),l=0;e.left+i+a>n?(l=n-(e.left+i),a!=l&&this.$["list-table"].css({left:a=l})):e.left+a<0&&(l=e.left,l>0&&(l=0),a!=l&&this.$["list-table"].css({left:a=l})),a!=l&&a+o<n&&(l=n-o,l>0&&(l=0),this.$["list-table"].css({left:l})),t=null,e=null,i=null,n=null,a=null,l=null},u={on:function(t){var e=function(e){var i=e;return"changedTouches"in e.originalEvent&&(i=e.originalEvent.changedTouches[0]),t.__dx=i.clientX-t.clientX,t.__dy=i.clientY-t.clientY,t.__time=(new Date).getTime(),Math.abs(t.__dx)>Math.abs(t.__dy)?{left:t.__dx}:{top:t.__dy}},l=this.$.viewer.width();jQuery(document.body).bind(o.mousemove+".ax5media-viewer-"+this.instanceId,function(t){var o=e(t);if("left"in o){if(a.$["viewer-holder"].css(o),Math.abs(a.mousePosition.__dx)>l/3){var s=0;a.mousePosition.__dx>0?s=a.selectedIndex>0?a.selectedIndex-1:n.media.list.length-1:a.selectedIndex<n.media.list.length-1&&(s=a.selectedIndex+1),a.select(s),u.off.call(a)}i.stopEvent(t)}}).bind(o.mouseup+".ax5media-viewer-"+this.instanceId,function(t){u.off.call(a)}).bind("mouseleave.ax5media-viewer-"+this.instanceId,function(t){u.off.call(a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){a.$["viewer-holder"].css({left:0}),jQuery(document.body).unbind(o.mousemove+".ax5media-viewer-"+this.instanceId).unbind(o.mouseup+".ax5media-viewer-"+this.instanceId).unbind("mouseleave.ax5media-viewer-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}};this.init=function(){this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.id="ax5-media-viewer-"+ax5.getGuid(),n.target&&n.media&&n.media.list&&n.media.list.length>0&&this.attach(n.target)},this.attach=function(t,e){return t||console.log(ax5.info.getError("ax5mediaViewer","401","setConfig")),"undefined"!=typeof e&&this.setConfig(e,!1),this.target=jQuery(t),this.target.html(s.call(this)),this.$={root:this.target.find("[data-ax5-ui-media-viewer]"),"viewer-holder":this.target.find('[data-media-viewer-els="viewer-holder"]'),viewer:this.target.find('[data-media-viewer-els="viewer"]'),"viewer-loading":this.target.find('[data-media-viewer-els="viewer-loading"]'),"list-holder":this.target.find('[data-media-viewer-els="media-list-holder"]'),"list-prev-handle":this.target.find('[data-media-viewer-els="media-list-prev-handle"]'),list:this.target.find('[data-media-viewer-els="media-list"]'),"list-table":this.target.find('[data-media-viewer-els="media-list-table"]'),"list-next-handle":this.target.find('[data-media-viewer-els="media-list-next-handle"]')},this.align(),jQuery(window).unbind("resize.ax5media-viewer-"+this.id).bind("resize.ax5media-viewer-"+this.id,function(){this.align(),c.call(this)}.bind(this)),this.target.unbind("click").bind("click",function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this)),this.$.viewer.unbind(o.mousedown).bind(o.mousedown,function(t){this.mousePosition=l(t),u.on.call(this,this.mousePosition)}.bind(this)).unbind("dragstart").bind("dragstart",function(t){return i.stopEvent(t),!1}),this.select(d.call(this)),this},this.align=function(){if(this.$["viewer-holder"].css({height:this.$.viewer.width()/n.viewer.ratio}),this.$.viewer.css({height:this.$.viewer.width()/n.viewer.ratio}),"image"==this.$.viewer.data("media-type")){var t=this.$.viewer.find("img");t.css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()}),setTimeout(function(t){t.css({left:(this.$.viewer.width()-t.width())/2})}.bind(this,t),1)}else"video"==this.$.viewer.data("media-type")&&this.$.viewer.find("iframe").css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()});this.$["viewer-loading"].css({height:this.$.viewer.height()});var e="%"==i.right(n.media.width,1)?i.number(n.media.width)/100*this.$.viewer.width():i.number(n.media.width),a="%"==i.right(n.media.height,1)?i.number(n.media.height)/100*this.$.viewer.width():i.number(n.media.height);return e=Math.floor(e),a=Math.floor(a),this.$["list-prev-handle"].css({width:1.5*e}),this.$["list-next-handle"].css({width:1.5*e}),this.$.list.css({height:a}),this.$["list-table"].find("[data-media-thumbnail]").css({width:e,height:a}),this.$["list-table"].find("[data-media-thumbnail-video]").css({width:e,height:a}),this},this.select=function(){var t={image:function(t,e){a.$["viewer-loading"].show();var i=[this.$.viewer.width(),this.$.viewer.height()],o=new Image;return o.src=t.image[n.columnKeys.src],o.onload=function(){a.$["viewer-loading"].fadeOut();var t=i[1],n=t*o.width/o.height;e(o,Math.floor(n),t)},o},video:function(t,e){a.$["viewer-loading"].show();var i=[this.$.viewer.width(),this.$.viewer.height()],o=jQuery(t.video[n.columnKeys.html]);e(o,i[0],i[1]),a.$["viewer-loading"].fadeOut();
}},e={image:function(t,e,i){t.width=e,t.height=i;var n=$(t);this.$.viewer.html(n),n.css({left:(this.$.viewer.width()-e)/2}),this.$.viewer.data("media-type","image"),this.$.viewer.data("img-ratio",e/i)},video:function(t,e,i){t.css({width:e,height:i}),this.$.viewer.html(t),this.$.viewer.data("media-type","video"),this.$.viewer.data("img-ratio",e/i)}},i=function(t){this.$.list.find("[data-media-thumbnail]").removeClass("selected"),this.$.list.find("[data-media-thumbnail="+t+"]").addClass("selected"),c.call(this)};return function(a){if("undefined"==typeof a)return this;this.selectedIndex=Number(a);var o=n.media.list[a];i.call(this,a);for(var l in t)if(o[l]){t[l].call(this,o,e[l].bind(this));break}return this}}(),this.setMediaList=function(t){return n.media.list=[].concat(t),this.attach(n.target),this},this.main=function(){e.mediaViewer_instance=e.mediaViewer_instance||[],e.mediaViewer_instance.push(this),arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return n}()),t=ax5.ui.mediaViewer}(),function(){var t=ax5.ui.mediaViewer,e=function(t){return'\n            <div data-ax5-ui-media-viewer="{{id}}" class="{{theme}}">\n                <div data-media-viewer-els="viewer-holder">\n                <div data-media-viewer-els="viewer"></div>\n                </div>\n                <div data-media-viewer-els="viewer-loading">\n                <div class="ax5-ui-media-viewer-loading-holder">\n                <div class="ax5-ui-media-viewer-loading-cell">\n                {{{loading.icon}}}\n            {{{loading.text}}}\n            </div>\n            </div>\n            </div>\n            {{#media}}\n            <div data-media-viewer-els="media-list-holder">\n                <div data-media-viewer-els="media-list-prev-handle">{{{prevHandle}}}</div>\n            <div data-media-viewer-els="media-list">\n                <div data-media-viewer-els="media-list-table">\n                {{#list}}\n            <div data-media-viewer-els="media-list-table-td">\n                {{#image}}\n            <div data-media-thumbnail="{{@i}}">\n                <img src="{{'+t.poster+'}}" data-media-thumbnail-image="{{@i}}" />\n                </div>\n                {{/image}}\n            {{#video}}\n            <div data-media-thumbnail="{{@i}}">{{#'+t.poster+'}}<img src="{{.}}" data-media-thumbnail-video="{{@i}}" />>{{/'+t.poster+"}}{{^"+t.poster+'}}<a data-media-thumbnail-video="{{@i}}">{{{media.'+t.poster+"}}}</a>{{/"+t.poster+'}}</div>\n            {{/video}}\n            </div>\n                {{/list}}\n            </div>\n                </div>\n                <div data-media-viewer-els="media-list-next-handle">{{{nextHandle}}}</div>\n                </div>\n                {{/media}}\n            </div>\n        '};t.tmpl={frame:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"uploader",version:"0.0.5"},function(){var i=function(){var i;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",file_types:"*/*"},this.queue=[],this.target=null,this.selectedFile=null,this.uploadedFile=null,i=this.config,this.init=function(){this.target=$(i.target),this.target.html(this.__get_layout()),this.els={container:this.target.find('[data-ui-els="container"]'),preview:this.target.find('[data-ui-els="preview"]'),"preview-img":this.target.find('[data-ui-els="preview-img"]'),"input-file":this.target.find('[data-ui-els="input-file"]'),progress:this.target.find('[data-ui-els="progress"]'),"progress-bar":this.target.find('[data-ui-els="progress-bar"]')},this.els.preview.bind("click",function(){this.__request_select_file()}.bind(this)),this.els["input-file"].bind("change",function(t){this.__on_select_file(t||window.event)}.bind(this)),function(){var t,e=this.els.container,i=this.els["preview-img"],n=this;e.get(0).addEventListener("dragover",function(n){n.stopPropagation(),n.preventDefault(),i.hide(),t&&clearTimeout(t),e.addClass("dragover")},!1),e.get(0).addEventListener("dragleave",function(n){n.stopPropagation(),n.preventDefault(),t&&clearTimeout(t),t=setTimeout(function(){i.show()},100),e.removeClass("dragover")},!1),e.get(0).addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),e.removeClass("dragover"),n.__on_select_file(t||window.event)},!1)}.call(this),setTimeout(function(){this.__set_size_layout()}.bind(this),1)},this.__get_layout=function(){var t=[],e="",n=i.file_types;return t.push('<div class="ax5-ui-single-uploader '+i.theme+'" data-ui-els="container">'),t.push('<div class="upload-preview" data-ui-els="preview">'),t.push('<img class="upload-preview-img" data-ui-els="preview-img" src="" style="display:none;width:100%;height:100%;" />'),t.push('<span class="empty-msg">'+i.empty_msg+"<span>"),t.push("</div>"),t.push('<div class="ax5-ui-progress '+(i.progress_theme||"")+'" data-ui-els="progress" style="display: none;"><div class="progress-bar" data-ui-els="progress-bar"></div></div>'),t.push('<input type="file" '+e+' accept="'+n+'" capture="camera" data-ui-els="input-file" />'),t.push("</div>"),t.join("")},this.__set_size_layout=this.align=function(){var t=20,e=this.els.progress.height(),i=this.els.container.width(),n=this.els.container.height();0!=i&&0!=n&&this.els.progress.css({left:t,top:n/2-e/2,width:i-2*t})},this.__request_select_file=function(){return!(i.before_select_file&&!i.before_select_file.call())&&void(window.imagePicker?window.imagePicker.getPictures(function(t){for(var e=0;e<t.length;e++)console.log("Image URI: "+t[e]);_this.__on_select_file(t)},function(t){console.log("Error: "+t)}):this.els["input-file"].trigger("click"))},this.__on_select_file=function(t){var e,n=this.target.id,a=this.els["preview-img"].get(0);if("dataTransfer"in t?e=t.dataTransfer.files[0]:"target"in t?e=t.target.files[0]:t&&(e=t[0]),!e)return!1;if(this.selected_file=e,function(t){function i(e,i,n){var a={},o=new Image;o.src=e.src,o.onload=function(){this.width>this.height?this.height>n?(a={width:this.width*(n/this.height),height:n},a.left=(i-a.width)/2):(a={width:this.width,height:this.height},a.top=(n-a.height)/2):this.width>i?(a={height:this.height*(i/this.width),width:i},a.top=(n-a.height)/2):(a={width:this.width,height:this.height},a.left=(i-a.width)/2),console.log(a),t.els["preview-img"].css(a)}}if(t.els["preview-img"].css({display:"block"}),window.imagePicker)a.src=e,i(a,t.els.container.width(),t.els.container.height());else{var o=new FileReader(n);o.onloadend=function(){try{a.src=o.result,i(a,t.els.container.width(),t.els.container.height())}catch(e){console.log(e)}},e&&o.readAsDataURL(e)}}(this),i.on_event){var o={action:"fileselect",file:e};i.on_event.call(o,o)}},this.upload=function(){var t=this;if(!this.selected_file){if(i.on_event){var n={action:"error",error:ax5.info.get_error("single-uploader","460","upload")};i.on_event.call(n,n)}return this}var a=new FormData,o=this.els["progress-bar"];this.els.progress.css({display:"block"}),o.css({width:"0%"}),window.imagePicker?a.append(i.upload_http.filename_param_key,this.selected_file):a.append(i.upload_http.filename_param_key,this.selected_file);for(var l in i.upload_http.data)a.append(l,i.upload_http.data[l]);this.xhr=new XMLHttpRequest,this.xhr.open(i.upload_http.method,i.upload_http.url,!0),this.xhr.onload=function(i){var n=i.target.response;try{"string"==typeof n&&(n=e.parseJson(n))}catch(i){return console.log(i),!1}return n.error?(console.log(n.error),!1):void t.upload_complete(n)},this.xhr.upload.onprogress=function(i){o.css({width:e.number(i.loaded/i.total*100,{round:2})+"%"}),i.lengthComputable&&i.loaded>=i.total&&setTimeout(function(){t.els.progress.css({display:"none"})},300)},this.xhr.send(a)},this.upload_complete=function(t){if(this.selected_file=null,this.uploaded_file=t,this.els.container.addClass("uploaded"),i.on_event){var e={action:"uploaded",file:t};i.on_event.call(e,e)}},this.set_uploaded_file=function(t){this.uploaded_file=t,this.uploaded_file?this.els.container.addClass("uploaded"):this.els.container.removeClass("uploaded")},this.set_preview_img=function(t){t?this.els["preview-img"].attr({src:t}).show():this.els["preview-img"].attr({src:null}).hide()},this.main=function(){t.uploader_instance=t.uploader_instance||[],t.uploader_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"combobox",version:"0.3.9"},function(){var e=function(){var e,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"now loading.."},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,e=this.config;var a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},o=function(){for(var t,e=this.queue.length;e--;){var n=this.queue[e];if(n.$display&&(t=Math.max(n.$select.outerWidth(),i.number(n.minWidth)),n.$display.css({"min-width":t}),n.reset&&n.$display.find(".addon-icon-reset").css({"line-height":this.queue[e].$display.height()+"px"}),n.multiple)){var a=function(){return i.number(n.$display.css("border-top-width"))+i.number(n.$display.css("border-bottom-width"))}.call(this);n.$target.height(""),n.$display.height("");var o=n.$displayTable.outerHeight();Math.abs(o-n.$target.height())>a&&(n.$target.css({height:o+a}),n.$display.css({height:o+a}))}}return e=null,t=null,this},l=function(t){if(!this.activecomboboxOptionGroup)return this;var e=this.queue[this.activecomboboxQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activecomboboxOptionGroup),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activecomboboxOptionGroup.addClass("direction-"+e.direction),this.activecomboboxOptionGroup.css(function(){return"top"==e.direction?{left:i.left,top:i.top+n.height+1,width:n.width}:"bottom"==e.direction?{left:i.left,top:i.top-this.activecomboboxOptionGroup.outerHeight()-1,width:n.width}:void 0}.call(this))},s=function(t,e){if(!this.activecomboboxOptionGroup)return this;var n=this.queue[this.activecomboboxQueueIndex],a="display";return(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(w.call(this,n.id,{index:{gindex:e.getAttribute("data-option-group-index"),index:e.getAttribute("data-option-index")}},void 0,!0),i.selectRange(n.$displayLabel,"end"),n.multiple||this.close()),this):(this.close(),this)},r=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)h.call(this,this.activecomboboxQueueIndex),this.close();else if(e.which==ax5.info.eventKeys.RETURN){for(var i=[],n=this.queue[this.activecomboboxQueueIndex],a=n.$displayLabel.get(0).childNodes,o=0,l=a.length;o<l;o++){var s=a[o];if(s.nodeType in t.util.nodeTypeProcessor){var r=t.util.nodeTypeProcessor[s.nodeType].call(this,this.activecomboboxQueueIndex,s);"undefined"!=typeof r&&i.push(r)}}w.call(this,n.id,i,!0,!0),u.call(this,this.activecomboboxQueueIndex),n.multiple||this.close()}},d=function(e){var i=this.queue[e],n={};n.id=i.id,n.theme=i.theme,n.size="ax5combobox-option-group-"+i.size,n.multiple=i.multiple,n.lang=i.lang,n.options=i.options,n.selected=i.selected,n.hasSelected=n.selected&&n.selected.length>0,n.removeIcon=i.removeIcon;try{return t.tmpl.get.call(this,"label",n,i.columnKeys)}finally{n=null}},c=function(t){var e,n=this.queue[t];if(n.$displayLabel.html(d.call(this,t)),n.$target.height(""),n.$display.height(""),n.$target.height()<(e=n.$displayTable.outerHeight())){var a=function(){return i.number(n.$display.css("border-top-width"))+i.number(n.$display.css("border-bottom-width"))}();n.$target.css({height:e+a}),n.$display.css({height:e+a})}},u=function(t){this.queue[t].$displayLabel.trigger("focus"),i.selectRange(this.queue[t].$displayLabel,"end")},h=function(t){this.queue[t].$displayLabel.trigger("blur")},p=function(e,n){this.queue[e].waitOptions=!0,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(t.tmpl.get.call(this,"option",this.queue[e],this.queue[e].columnKeys))),this.queue[e].onSearch.call({self:this,item:this.queue[e],searchWord:n},function(e){var n={},a=this.queue[this.activecomboboxQueueIndex];return!!a&&(function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,e),a.options=x.call(this,this.activecomboboxQueueIndex,e.options),o.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5combobox-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,void this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(t.tmpl.get.call(this,"options",n,a.columnKeys))))}.bind(this))},f=function(t,e){if(this.activecomboboxQueueIndex==-1)return this;var i,n=[],a=-1,o=this.queue[t].indexedOptions.length-1;if(""!=e){var l=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;if(e=e.replace(l,""),this.queue[t].onSearch){p.call(this,t,e);try{return n}finally{n=null,a=null,o=null,i=null}}for(;o-a++;){if(i=this.queue[t].indexedOptions[a],(""+i.text).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var s=(""+i.text).toLowerCase().search(e.toLowerCase());if(s>-1&&(n.push({"@findex":i["@findex"],optionsSort:s}),n.length>2))break;s=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0?m.call(this,t,void 0,n[0]["@findex"]):g.call(this,t);try{return n}finally{n=null,a=null,o=null,i=null}},g=function(t){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[t].optionFocusIndex=-1},m=function(t,e,n){var a,o,l,s,r=this.queue[t];if(this.activecomboboxOptionGroup&&r.options&&r.options.length>0){if("undefined"!=typeof n?a=n:(o=r.optionFocusIndex==-1?r.optionSelectedIndex||-1:r.optionFocusIndex,o==-1?a=0:(a=o+e,a<0?a=0:a>r.optionItemLength-1&&(a=r.optionItemLength-1))),r.optionFocusIndex=a,r.options[a]&&r.options[a].hide){if("undefined"==typeof e)return this;for(;r.options[a].hide;){if(a+=e,a<0){a=0;break}if(a>r.optionItemLength-1){a=r.optionItemLength-1;break}}}if("undefined"!=typeof a&&(this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover"),l=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+a+'"]').addClass("hover"),s=this.activecomboboxOptionGroup.find('[data-els="content"]'),l.get(0))){var d=l.outerHeight(),c=s.innerHeight(),u=s.scrollTop(),h=l.position().top+s.scrollTop();if(c+u<h+d?s.scrollTop(h+d-c):u>h&&s.scrollTop(h),"undefined"!=typeof e){var p=r.$displayLabel.get(0).childNodes,f=p[p.length-1];f&&"3"==f.nodeType?(f.nodeValue=r.indexedOptions[a].text,i.selectRange(r.$displayLabel,"end")):f&&"1"==f.nodeType&&(jQuery(f).after(r.indexedOptions[a].text),i.selectRange(r.$displayLabel,"end"))}}}},x=function(){var t=function(t,e){e?this.queue[t].selected.push(jQuery.extend({},e)):this.queue[t].selected=[]};return function(e,a){var o,l,s,r=this.queue[e],d=0;return t.call(this,e,!1),a?(r.options=a,r.indexedOptions=[],o=[],o.push('<option value=""></option>'),r.options.forEach(function(i,a){i.optgroup?(i["@gindex"]=a,i.options.forEach(function(i,l){i["@index"]=l,i["@findex"]=d,o.push('<option value="'+i[r.columnKeys.optionValue]+'" '+(i[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[r.columnKeys.optionText]+"</option>"),i[r.columnKeys.optionSelected]&&t.call(n,e,i),r.indexedOptions.push({"@gindex":a,"@index":l,"@findex":d,value:i[r.columnKeys.optionValue],text:i[r.columnKeys.optionText]}),d++})):(i["@index"]=a,i["@findex"]=d,o.push('<option value="'+i[r.columnKeys.optionValue]+'" '+(i[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[r.columnKeys.optionText]+"</option>"),i[r.columnKeys.optionSelected]&&t.call(n,e,i),r.indexedOptions.push({"@index":a,"@findex":d,value:i[r.columnKeys.optionValue],text:i[r.columnKeys.optionText]}),d++)}),r.optionItemLength=d,r.$select.html(o.join(""))):(r.$select.get(0).options&&r.$select.get(0).options.length&&(r.$select.get(0).options[0].selected=!1),l=i.toArray(r.$select.get(0).options),s=[],l.forEach(function(i,a){var o={};o[r.columnKeys.optionValue]=i.value,o[r.columnKeys.optionText]=i.text,o[r.columnKeys.optionSelected]=i.selected,o["@index"]=a,o["@findex"]=d,i.selected&&t.call(n,e,o),s.push(o),d++,o=null}),r.options=s,r.indexedOptions=s,r.$select.prepend('<option value=""></option>'),r.$select.get(0).options[0].selected=!0),o=null,l=null,s=null,r.options}}(),v=function(t){return t instanceof jQuery?t=t.data("data-ax5combobox-id"):i.isString(t)||(t=jQuery(t).data("data-ax5combobox-id")),i.isString(t)?i.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5combobox","402","getQueIdx"))},b=function(t,e,i){return"undefined"==typeof i?!t.multiple||!e:i},y=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},w=function(){var t={index:function(t,e,a,o){var s=this.queue[t];i.isString(e.index.gindex)?"undefined"!=typeof s.options[e.index.gindex]&&(s.options[e.index.gindex].options[e.index.index][s.columnKeys.optionSelected]=b(s,s.options[e.index.gindex].options[e.index.index][s.columnKeys.optionSelected],a),n.activecomboboxOptionGroup&&n.activecomboboxOptionGroup.find('[data-option-group-index="'+e.index.gindex+'"][data-option-index="'+e.index.index+'"]').attr("data-option-Selected",s.options[e.index.gindex].options[e.index.index][s.columnKeys.optionSelected].toString())):"undefined"!=typeof s.options[e.index.index]&&(s.options[e.index.index][s.columnKeys.optionSelected]=b(s,s.options[e.index.index][s.columnKeys.optionSelected],a),n.activecomboboxOptionGroup&&n.activecomboboxOptionGroup.find('[data-option-index="'+e.index.index+'"]').attr("data-option-Selected",s.options[e.index.index][s.columnKeys.optionSelected].toString())),"undefined"!=typeof o&&"justSetValue"===o||(x.call(this,t,s.options),c.call(this,t),l.call(this))},arr:function(e,a,o,s){a.forEach(function(a){if(i.isString(a)||i.isNumber(a))t.text.call(n,e,a,o,"justSetValue");else for(var l in t)if(a[l]){t[l].call(n,e,a,o,"justSetValue");break}}),x.call(this,e,this.queue[e].options),c.call(this,e),l.call(this)},value:function(t,e,n,a){var o,s=this.queue[t],r=i.search(s.options,function(){return this[s.columnKeys.optionValue]==e[s.columnKeys.optionValue]});r>-1?s.options[r][s.columnKeys.optionSelected]=b(s,s.options[r][s.columnKeys.optionSelected],n):(r=s.options.length,o={"@index":r,hide:!0,addedOption:!0},o[s.columnKeys.optionValue]=e,o[s.columnKeys.optionText]=e,s.options.push(o),s.options[r][s.columnKeys.optionSelected]=b(s,s.options[r][s.columnKeys.optionSelected],n)),"undefined"!=typeof a&&"justSetValue"===a||(x.call(this,t,this.queue[t].options),c.call(this,t),l.call(this))},text:function(t,e,n,a){var o,s=this.queue[t],r=i.search(s.options,function(){return this[s.columnKeys.optionText]==e});r>-1?s.options[r][s.columnKeys.optionSelected]=b(s,s.options[r][s.columnKeys.optionSelected],n):(r=s.options.length,o={"@index":r,hide:!0,addedOption:!0},o[s.columnKeys.optionValue]=e,o[s.columnKeys.optionText]=e,s.options.push(o),s.options[r][s.columnKeys.optionSelected]=b(s,s.options[r][s.columnKeys.optionSelected],n)),"undefined"!=typeof a&&"justSetValue"===a||(x.call(this,t,this.queue[t].options),c.call(this,t),l.call(this))},clear:function(t){y.call(this,t),x.call(this,t,this.queue[t].options),g.call(this,t),this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[t].optionSelectedIndex=-1}};return function(e,n,o,s){var r=i.isNumber(e)?e:v.call(this,e);if(r===-1)return void console.log(ax5.info.getError("ax5combobox","402","val"));if("undefined"==typeof n)throw"error not found value";if(i.isArray(n))t.clear.call(this,r),t.arr.call(this,r,this.queue[r].multiple||0==n.length?n:[n[n.length-1]],o);else if(i.isString(n)||i.isNumber(n))"undefined"==typeof n||null===n||this.queue[r].multiple||y.call(this,r),t.text.call(this,r,n,o,"justSetValue"),c.call(this,r);else if(null===n)t.clear.call(this,r),c.call(this,r);else{this.queue[r].multiple||y.call(this,r);for(var d in t)if(n[d]){t[d].call(this,r,n,o,"justSetValue");break}x.call(this,r,this.queue[r].options),c.call(this,r),l.call(this)}return"undefined"!=typeof n&&s&&!s.noStateChange&&a.call(this,this.queue[r],{self:this,item:this.queue[r],state:"changeValue",value:this.queue[r].selected}),e=null,this}}();this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5combobox-display-"+this.instanceId,function(){o.call(this)}.bind(this))},this.bind=function(a){var l,s=function(){var e=i.debounce(function(e){if(this.activecomboboxQueueIndex==-1)return this;for(var a=[],o="",l=this.queue[e],s=l.$displayLabel.get(0).childNodes,r=0,d=s.length;r<d;r++){var c=s[r];if(c.nodeType in t.util.nodeTypeProcessor){var u=t.util.nodeTypeProcessor[c.nodeType].call(this,this.activecomboboxQueueIndex,c,!0);"undefined"==typeof u||(i.isString(u)?(o=u,"1"==c.nodeType&&c.getAttribute("data-ax5combobox-selected-text")?o=!1:a.push(u)):a.push(u))}}0==s.length?w.call(this,l.id,null,void 0,"internal"):o===!1?(w.call(this,l.id,null,void 0,"internal"),w.call(this,l.id,a,void 0,"internal"),i.selectRange(l.$displayLabel,"end")):""!=o&&f.call(n,e,o)},150),a=function(e){for(var n=[],a=this.queue[e],o=a.$displayLabel.get(0).childNodes,l=0,s=o.length;l<s;l++){var r=o[l];if(1==r.nodeType&&r.nodeType in t.util.nodeTypeProcessor){var d=t.util.nodeTypeProcessor[r.nodeType].call(this,e,r,!1);"undefined"==typeof d||i.isString(d)||n.push(d)}}w.call(this,a.id,n,void 0,!1)},l={click:function(t,e){var a,o=i.findParentNode(e.target,function(t){return t.getAttribute("data-ax5combobox-remove")?(a="optionItemRemove",!0):t.getAttribute("data-selected-clear")?(a="clear",!0):void 0});if(o){if("optionItemRemove"===a){var l=o.getAttribute("data-ax5combobox-remove-index"),s=this.queue[t].selected[l];return w.call(this,t,{index:{gindex:s["@gindex"],index:s["@index"]}},!1,!0),u.call(this,t),i.stopEvent(e),this}"clear"===a&&w.call(this,t,{clear:!0})}else n.activecomboboxQueueIndex==t?this.queue[t].optionFocusIndex==-1&&n.close():(n.open(t),""==this.queue[t].$displayLabel.text().replace(/^\W*|\W*$/g,"")&&(this.queue[t].$displayLabel.html(d.call(this,t)),u.call(this,t)))},keyUp:function(t,a){if(a.which==ax5.info.eventKeys.ESC&&n.activecomboboxQueueIndex===-1)return i.stopEvent(a),this;n.activecomboboxQueueIndex!=t&&(n.open(t),i.stopEvent(a));var o={40:"KEY_DOWN",38:"KEY_UP"};o[a.which]||e.call(this,t)},keyDown:function(t,e){e.which==ax5.info.eventKeys.ESC?i.stopEvent(e):e.which==ax5.info.eventKeys.RETURN?i.stopEvent(e):e.which==ax5.info.eventKeys.DOWN?(m.call(this,t,1),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP&&(m.call(this,t,-1),i.stopEvent(e))},focus:function(t,e){},blur:function(t,e){a.call(this,t),i.stopEvent(e)},selectChange:function(t,e){w.call(this,t,{value:this.queue[t].$select.val()},!0)}};return function(e){var i=this.queue[e],n={};return i.selected=[],i.$display?(i.$displayLabel.html(d.call(this,e)),i.options=x.call(this,e,i.options),o.call(this)):(n.instanceId=this.instanceId,n.id=i.id,n.name=i.name,n.theme=i.theme,n.tabIndex=i.tabIndex,n.multiple=i.multiple,n.reset=i.reset,n.label=d.call(this,e),n.formSize=function(){return i.size?"input-"+i.size:""}(),i.$display=jQuery(t.tmpl.get.call(this,"comboboxDisplay",n,i.columnKeys)),i.$displayTable=i.$display.find('[data-els="display-table"]'),i.$displayLabel=i.$display.find('[data-ax5combobox-display="label"]'),i.$target.find("select").get(0)?(i.$select=i.$target.find("select"),i.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&i.$select.attr("name","name"),n.multiple&&i.$select.attr("multiple","multiple")):(i.$select=jQuery(t.tmpl.get.call(this,"formSelect",n,i.columnKeys)),i.$target.append(i.$select)),i.$target.append(i.$display),i.options=x.call(this,e,i.options),o.call(this)),i.$display.unbind("click.ax5combobox").bind("click.ax5combobox",l.click.bind(this,e)),i.$displayLabel.unbind("focus.ax5combobox").bind("focus.ax5combobox",l.focus.bind(this,e)).unbind("blur.ax5combobox").bind("blur.ax5combobox",l.blur.bind(this,e)).unbind("keyup.ax5combobox").bind("keyup.ax5combobox",l.keyUp.bind(this,e)).unbind("keydown.ax5combobox").bind("keydown.ax5combobox",l.keyDown.bind(this,e)),i.$select.unbind("change.ax5combobox").bind("change.ax5combobox",l.selectChange.bind(this,e)),n=null,i=null,e=null,this}}(),r={};return a=jQuery.extend(!0,r,e,a),a.target?(a.$target=jQuery(a.target),a.id||(a.id=a.$target.data("data-ax5combobox-id")),a.id||(a.id="ax5combobox-"+ax5.getGuid(),a.$target.data("data-ax5combobox-id",a.id)),a.name=a.$target.attr("data-ax5combobox"),a.options&&(a.options=JSON.parse(JSON.stringify(a.options))),function(t){i.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}(i.parseJson(a.$target.attr("data-ax5combobox-config"),!0)),l=i.search(this.queue,function(){return this.id==a.id}),l===-1?(this.queue.push(a),s.call(this,this.queue.length-1)):(this.queue[l]=jQuery.extend(!0,{},this.queue[l],a),s.call(this,l)),r=null,l=null,this):(console.log(ax5.info.getError("ax5combobox","401","bind")),this)},this.open=function(){var n=function(e){e.onExpand.call({self:this,item:e},function(e){if(this.waitOptionsCallback){var n={},a=this.queue[this.activecomboboxQueueIndex];!function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,e),a.$display.find('[data-ax5combobox-display="label"]').html(d.call(this,this.activecomboboxQueueIndex)),a.options=x.call(this,this.activecomboboxQueueIndex,e.options),o.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5combobox-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(t.tmpl.get.call(this,"options",n,a.columnKeys)))}}.bind(this))};return function(o,d){this.waitOptionsCallback=null;var c,u,h=i.isNumber(o)?o:v.call(this,o),p=this.queue[h],f={};return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activecomboboxOptionGroup?this.activecomboboxQueueIndex==h?this:d>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(d||0)+1)}.bind(this),e.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),f.id=p.id,f.theme=p.theme,f.size="ax5combobox-option-group-"+p.size,f.multiple=p.multiple,f.lang=p.lang,p.$display.attr("data-combobox-option-group-opened","true"),p.onExpand&&(f.waitOptions=!0),f.options=i.filter(p.options,function(){return!this.hide}),this.activecomboboxOptionGroup=jQuery(t.tmpl.get.call(this,"optionGroup",f,p.columnKeys)),this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(t.tmpl.get.call(this,"options",f,p.columnKeys))),this.activecomboboxQueueIndex=h,l.call(this,"append"),jQuery(window).bind("resize.ax5combobox-"+this.instanceId,function(){l.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(u=this.activecomboboxOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),u.get(0)&&(c=u.position().top-this.activecomboboxOptionGroup.height()/3,this.activecomboboxOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:c},p.animateTime,"swing",function(){}))),jQuery(window).bind("keyup.ax5combobox-"+this.instanceId,function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5combobox-"+this.instanceId,function(t){t=t||window.event,s.call(this,t),i.stopEvent(t)}.bind(this)),a.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,n.call(this,p)),f=null,c=null,u=null,this))}}(),this.update=function(t){return this.bind(t),this},this.setValue=function(t,e,n){var a=i.isNumber(t)?t:v.call(this,t);if(a===-1)return void console.log(ax5.info.getError("ax5combobox","402","val"));if(y.call(this,a),i.isArray(e)){var o=i.map(e,function(){return{value:this}});w.call(this,a,o,n||!0,{noStateChange:!0})}else(i.isString(e)||i.isNumber(e))&&w.call(this,a,{value:e},n||!0,{noStateChange:!0});return this},this.setText=function(t,e,n){var a=i.isNumber(t)?t:v.call(this,t);return a===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):(y.call(this,a),w.call(this,a,e,!0,{noStateChange:!0}),this)},this.getSelectedOption=function(t){var e=i.isNumber(t)?t:v.call(this,t);return e===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):i.deepCopy(this.queue[e].selected)},this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activecomboboxOptionGroup?(t=this.queue[this.activecomboboxQueueIndex],t.optionFocusIndex=-1,t.$display.removeAttr("data-combobox-option-group-opened").trigger("focus"),this.activecomboboxOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5combobox-"+this.instanceId).unbind("click.ax5combobox-"+this.instanceId).unbind("keyup.ax5combobox-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.remove(),this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,a.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(t){var e=i.isNumber(t)?t:v.call(this,t);return e===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):(h.call(this,e),this)},this.enable=function(t){var e=v.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$input.removeAttr("disabled"),a.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=v.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$input.attr("disabled","disabled"),a.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}()),t=ax5.ui.combobox}(),ax5.ui.combobox_instance=new ax5.ui.combobox,jQuery.fn.ax5combobox=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.combobox_instance.open(this);case"close":return ax5.ui.combobox_instance.close(this);case"setValue":return ax5.ui.combobox_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.combobox_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.combobox_instance.getSelectedOption(this);case"enable":return ax5.ui.combobox_instance.enable(this);case"disable":return ax5.ui.combobox_instance.disable(this);case"blur":return ax5.ui.combobox_instance.blur(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.combobox_instance.bind(t)});return this}}(),function(){var t=ax5.ui.combobox,e=(ax5.util,function(t){return'\n            <div class="ax5combobox-option-group {{theme}} {{size}}" data-ax5combobox-option-group="{{id}}">\n                <div class="ax-combobox-body">\n                    <div class="ax-combobox-option-group-content" data-els="content"></div>\n                </div>\n                <div class="ax-combobox-arrow"></div> \n            </div>\n        ';
}),i=function(t){return'\n            <div class="form-control {{formSize}} ax5combobox-display {{theme}}" \n            data-ax5combobox-display="{{id}}" data-ax5combobox-instance="{{instanceId}}">\n                <div class="ax5combobox-display-table" data-els="display-table">\n                    <div data-ax5combobox-display="label-holder"> \n                    <a {{^tabIndex}}href="#ax5combobox-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n                    data-ax5combobox-display="label"\n                    contentEditable="true"\n                    spellcheck="false">{{{label}}}</a>\n                    </div>\n                    <div data-ax5combobox-display="addon"> \n                        {{#multiple}}{{#reset}}\n                        <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n                        {{/reset}}{{/multiple}}\n                        {{#icons}}\n                        <span class="addon-icon-closed">{{clesed}}</span>\n                        <span class="addon-icon-opened">{{opened}}</span>\n                        {{/icons}}\n                        {{^icons}}\n                        <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                        <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                        {{/icons}}\n                    </div>\n                </div>\n            </a>\n        '},n=function(t){return'\n            <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n        '},a=function(t){return'\n            {{#waitOptions}}\n                <div class="ax-combobox-option-item">\n                        <div class="ax-combobox-option-item-holder">\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                {{{lang.loading}}}\n                            </span>\n                        </div>\n                    </div>\n            {{/waitOptions}}\n            {{^waitOptions}}\n                {{#options}}\n                    {{#optgroup}}\n                        <div class="ax-combobox-option-group">\n                            <div class="ax-combobox-option-item-holder">\n                                <span class="ax-combobox-option-group-label">\n                                    {{{.}}}\n                                </span>\n                            </div>\n                            {{#options}}\n                            {{^hide}}\n                            <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                            data-option-value="{{'+t.optionValue+'}}" \n                            {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                                <div class="ax-combobox-option-item-holder">\n                                    {{#multiple}}\n                                    <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                        <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                    </span>\n                                    {{/multiple}}\n                                    <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+t.optionText+'}}</span>\n                                </div>\n                            </div>\n                            {{/hide}}\n                            {{/options}}\n                        </div>                            \n                    {{/optgroup}}\n                    {{^optgroup}}\n                    {{^hide}}\n                    <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                        <div class="ax-combobox-option-item-holder">\n                            {{#multiple}}\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                            </span>\n                            {{/multiple}}\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+t.optionText+'}}</span>\n                        </div>\n                    </div>\n                    {{/hide}}\n                    {{/optgroup}}\n                {{/options}}\n                {{^options}}\n                    <div class="ax-combobox-option-item">\n                        <div class="ax-combobox-option-item-holder">\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                {{{lang.noOptions}}}\n                            </span>\n                        </div>\n                    </div>\n                {{/options}}\n            {{/waitOptions}}\n        '},o=function(t){return'\n            {{#selected}}<div tabindex="-1" data-ax5combobox-selected-label="{{@i}}" data-ax5combobox-selected-text="{{text}}">\n                <div data-ax5combobox-remove="true" data-ax5combobox-remove-index="{{@i}}">{{{removeIcon}}}</div>\n                <span>{{text}}</span>\n                </div>\n            {{/selected}}\n        '};t.tmpl={comboboxDisplay:i,formSelect:n,optionGroup:e,options:a,label:o,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui.combobox,e=(ax5.util,{1:function(t,e,i){var n=this.config,a=e;$(e).find("span").get(0)&&(a=$(e).find("span").get(0));var o,l,s=(a.textContent||a.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,""),r=this.queue[t];if(r.selected&&r.selected.length>0&&e.getAttribute("data-ax5combobox-selected-text")==s)return o=e.getAttribute("data-ax5combobox-selected-label"),l=r.selected[o],{index:{gindex:l["@gindex"],index:l["@index"],value:l[n.columnKeys.optionValue]}};if(e.getAttribute("data-ax5combobox-selected-text"))return s;if(""!=s){if(i)return s;var d;return r.optionFocusIndex>-1&&(d=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+r.optionFocusIndex+'"]')),r.optionFocusIndex>-1&&d.get(0)&&d.attr("data-option-value")?{index:{gindex:d.attr("data-option-group-index"),index:d.attr("data-option-index")}}:r.editable?s:void 0}},3:function(t,e,i){var n=(this.config,(e.textContent||e.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,"")),a=this.queue[t];if(""!=n){if(i)return n;var o;return a.optionFocusIndex>-1&&(o=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+a.optionFocusIndex+'"]')),a.optionFocusIndex>-1&&o.get(0)&&o.attr("data-option-value")?{index:{gindex:o.attr("data-option-group-index"),index:o.attr("data-option-index")}}:a.editable?n:void 0}}});t.util={nodeTypeProcessor:e}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"layout",version:"0.3.0"},function(){var t=function(){var t,i=this,n={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var e="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;return{clientX:e.clientX,clientY:e.clientY}};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,splitter:{size:4},autoResize:!0},this.queue=[],this.openTimer=null,this.closeTimer=null,this.resizer=null,t=this.config;var o=function(){for(var t=this.queue.length;t--;)"undefined"==typeof this.queue[t].parentQueIdx&&this.queue[t].autoResize&&s.call(this,t,null,"windowResize")},l={width:function(t,e){return e?e.__width+(e.split?t.splitter.size:0):0},height:function(t,e){return e?e.__height+(e.split?t.splitter.size:0):0}},s=function(){var t={split:{horizontal:function(t,e,i){e.splitter?e.__height=t.splitter.size:i==t.splitPanel.length-1&&0==t.splitPanel.asteriskLength?(e.height="*",e.__height=void 0,t.splitPanel.asteriskLength++):"*"==e.height&&t.splitPanel.asteriskLength++},vertical:function(t,e,i){e.splitter?e.__width=t.splitter.size:i==t.splitPanel.length-1&&0==t.splitPanel.asteriskLength?(e.width="*",e.__width=void 0,t.splitPanel.asteriskLength++):"*"==e.width&&t.splitPanel.asteriskLength++}}},i={top:function(t,e){e.$target.css({height:e.__height||0}),e.split&&e.$splitter.css({height:t.splitter.size,top:e.__height||0})},bottom:function(t,e){e.$target.css({height:e.__height||0}),e.split&&e.$splitter.css({height:t.splitter.size,bottom:e.__height||0})},left:function(t,e){var i={width:e.__width||0,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height,i.top=t.dockPanel.top.__height,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),e.$target.css(i),e.split&&e.$splitter.css({width:t.splitter.size,height:i.height,top:i.top,left:i.width})},right:function(t,e){var i={width:e.__width||0,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height,i.top=t.dockPanel.top.__height,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),e.$target.css(i),e.split&&e.$splitter.css({width:t.splitter.size,height:i.height,top:i.top,right:i.width})},center:function(t,e){var i={width:t.targetDimension.width,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height||0,i.top=t.dockPanel.top.__height||0,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height||0,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),t.dockPanel.left&&(i.width-=t.dockPanel.left.__width||0,i.left=t.dockPanel.left.__width||0,t.dockPanel.left.split&&(i.width-=t.splitter.size,i.left+=t.splitter.size)),t.dockPanel.right&&(i.width-=t.dockPanel.right.__width||0,t.dockPanel.right.split&&(i.width-=t.splitter.size));var n=e.minWidth||0,a=e.minHeight||0;i.width<n&&(i.width=n,t.$target.css({minWidth:n+l.width(t.dockPanel.left,t.splitter.size)+l.width(t.dockPanel.right,t.splitter.size)})),i.height<a&&(i.height=a,t.$target.css({minHeight:a+l.height(t.dockPanel.top,t.splitter.size)+l.height(t.dockPanel.bottom,t.splitter.size)})),e.$target.css(i)},split:{horizontal:function(t,e,i,n,a){var o={},l=i?Number(t.splitPanel[i-1].offsetEnd):0;e.splitter?o.height=t.splitter.size:"*"!=e.height||"undefined"!=typeof e.__height&&!a?o.height=e.__height||0:o.height=e.__height=(t.targetDimension.height-n)/t.splitPanel.asteriskLength,o.top=l,e.offsetStart=l,e.offsetEnd=Number(l)+Number(o.height),e.$target.css(o)},vertical:function(t,e,i,n,a){var o={},l=i?Number(t.splitPanel[i-1].offsetEnd):0;e.splitter?o.width=t.splitter.size:"*"!=e.width||"undefined"!=typeof e.__width&&!a?o.width=e.__width||0:o.width=e.__width=(t.targetDimension.width-n)/t.splitPanel.asteriskLength,o.left=l,e.offsetStart=l,e.offsetEnd=Number(l)+Number(o.width),e.$target.css(o)}}},n={"dock-panel":function(t){for(var e in t.dockPanel)t.dockPanel[e].$target&&t.dockPanel[e].$target.get(0)&&e in i&&i[e].call(this,t,t.dockPanel[e])},"split-panel":function(n,a){var o;n.splitPanel.asteriskLength=0,n.splitPanel.forEach(function(e,i){t.split[n.oriental].call(this,n,e,i)}),o="horizontal"==n.oriental?e.sum(n.splitPanel,function(t){if("*"!=t.height)return e.number(t.__height)}):e.sum(n.splitPanel,function(t){if("*"!=t.width)return e.number(t.__width)}),n.splitPanel.forEach(function(t,e){i.split[n.oriental].call(this,n,t,e,o,a)})}},a=function(t){for(var e=t.childQueIdxs.length;e--;)s.call(this,t.childQueIdxs[e])};return function(t,e,i){var o=this.queue[t];o.targetDimension={height:o.$target.innerHeight(),width:o.$target.innerWidth()},o.layout in n&&n[o.layout].call(this,o,i),o.childQueIdxs&&a.call(this,o,i),o.onResize&&setTimeout(function(){this.onResize.call(this,this)}.bind(o),1),e&&e.call(o,o)}}(),r={on:function(t,e,a){var o=this.queue[t],s=a.position(),d={width:a.width(),height:a.height()},c={left:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientX-e.mousePosition.clientX;var n=e.minWidth||0,a=e.maxWidth||o.targetDimension.width-l.width(o,o.dockPanel.left)-l.width(o,o.dockPanel.right);return e.__width+e.__da<n?e.__da=-e.__width+n:a<e.__width+e.__da&&(e.__da=a-e.__width),{left:e.$splitter.position().left+e.__da}},right:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientX-e.mousePosition.clientX;var n=e.minWidth||0,a=e.maxWidth||o.targetDimension.width-l.width(o,o.dockPanel.left)-l.width(o,o.dockPanel.right);return e.__width-e.__da<n?e.__da=e.__width-n:a<e.__width-e.__da&&(e.__da=-a+e.__width),{left:e.$splitter.position().left+e.__da}},top:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientY-e.mousePosition.clientY;var n=e.minHeight||0,a=e.maxHeight||o.targetDimension.height-l.height(o,o.dockPanel.top)-l.height(o,o.dockPanel.bottom);return e.__height+e.__da<n?e.__da=-e.__height+n:a<e.__height+e.__da&&(e.__da=a-e.__height),{top:e.$splitter.position().top+e.__da}},bottom:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;e.__da=i.clientY-e.mousePosition.clientY;var n=e.minHeight||0,a=e.maxHeight||o.targetDimension.height-l.height(o,o.dockPanel.top)-l.height(o,o.dockPanel.bottom);return e.__height-e.__da<n?e.__da=e.__height-n:a<e.__height-e.__da&&(e.__da=-a+e.__height),{top:e.$splitter.position().top+e.__da}},split:function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;if("horizontal"==o.oriental){e.__da=i.clientY-e.mousePosition.clientY;var n=o.splitPanel[e.panelIndex-1],a=o.splitPanel[e.panelIndex+1],l=n.minHeight||0,s=a.minHeight||0;return e.offsetStart+e.__da<n.offsetStart+l?e.__da=n.offsetStart-e.offsetStart+l:e.offsetStart+e.__da>a.offsetEnd-s&&(e.__da=a.offsetEnd-e.offsetEnd-s),{top:e.$target.position().top+e.__da}}e.__da=i.clientX-e.mousePosition.clientX;var n=o.splitPanel[e.panelIndex-1],a=o.splitPanel[e.panelIndex+1],r=n.minWidth||0,d=a.minWidth||0;return e.offsetStart+e.__da<n.offsetStart+r?e.__da=n.offsetStart-e.offsetStart+r:e.offsetStart+e.__da>a.offsetEnd-d&&(e.__da=a.offsetEnd-e.offsetEnd-d),{left:Number(e.$target.position().left)+Number(e.__da)}}};e.__da=0,jQuery(document.body).bind(n.mousemove+".ax5layout-"+this.instanceId,function(t){i.resizer||(i.resizer=jQuery('<div class="ax5layout-resizer panel-'+e.resizerType+'" ondragstart="return false;"></div>'),i.resizer.css({left:s.left,top:s.top,width:d.width,height:d.height}),o.$target.append(i.resizer)),i.resizer.css(c[e.resizerType](t))}).bind(n.mouseup+".ax5layout-"+this.instanceId,function(n){r.off.call(i,t,e,a)}).bind("mouseleave.ax5layout-"+this.instanceId,function(n){r.off.call(i,t,e,a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(t,e,a){var o=this.queue[t],l={"dock-panel":{left:function(t,e){e.__width+=e.__da},right:function(){e.__width-=e.__da},top:function(){e.__height+=e.__da},bottom:function(){e.__height-=e.__da}},"split-panel":{split:function(){"horizontal"==o.oriental?(o.splitPanel[e.panelIndex-1].__height+=e.__da,o.splitPanel[e.panelIndex+1].__height-=e.__da):(o.splitPanel[e.panelIndex-1].__width+=e.__da,o.splitPanel[e.panelIndex+1].__width-=e.__da)}},"tab-panel":{}};i.resizer&&(i.resizer.remove(),i.resizer=null,l[this.queue[t].layout][e.resizerType].call(this,t,e),s.call(this,t)),jQuery(document.body).unbind(n.mousemove+".ax5layout-"+this.instanceId).unbind(n.mouseup+".ax5layout-"+this.instanceId).unbind("mouseleave.ax5layout-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},d={open:function(t,e,i){if(e.activePanelIndex!=i&&(e.tabPanel[i].active=!0,e.tabPanel[e.activePanelIndex].active=!1,e.$target.find('[data-tab-panel-label="'+i+'"]').attr("data-tab-active","true"),e.$target.find('[data-tab-panel-label="'+e.activePanelIndex+'"]').removeAttr("data-tab-active"),e.tabPanel[i].$target.attr("data-tab-active","true"),e.tabPanel[e.activePanelIndex].$target.removeAttr("data-tab-active"),e.activePanelIndex=i,e.onOpenTab)){var n={$target:e.$target,name:e.name,id:e.id,layout:e.layout,activePanelIndex:e.activePanelIndex,activePanel:e.tabPanel[e.activePanelIndex],tabPanel:e.tabPanel};e.onOpenTab.call(n)}}},c=function(){return'\n<div data-tab-panel-label-holder="{{id}}">\n    <div data-tab-panel-label-border="{{id}}"></div>\n    <div data-tab-panel-label-table="{{id}}">\n        <div data-tab-panel-aside="left"></div>\n    {{#tabPanel}}\n        <div data-tab-panel-label="{{panelIndex}}" data-tab-active="{{active}}">\n            <div data-tab-label="{{panelIndex}}">{{{label}}}</div>\n        </div>\n    {{/tabPanel}}\n        <div data-tab-panel-aside="right"></div>\n    </div>\n</div>\n'},u=function(){var t=function(t,i){return"*"==t?void 0:"%"==e.right(t,1)?i*e.number(t)/100:Number(t)},o={"dock-panel":function(o){var l=this.queue[o];l.dockPanel={},l.$target.find(">[data-dock-panel]").each(function(){var s={};!function(t){e.isObject(t)&&!t.error&&(s=jQuery.extend(!0,s,t))}(e.parseJson(this.getAttribute("data-dock-panel"),!0)),"dock"in s&&(s.$target=jQuery(this),s.$target.addClass("dock-panel-"+s.dock),(s.split=s.split&&"true"==s.split.toString())&&(s.$splitter=jQuery('<div data-splitter="" class="dock-panel-'+s.dock+'"></div>'),s.$splitter.bind(n.mousedown,function(t){s.mousePosition=a(t),r.on.call(i,o,s,s.$splitter)}).bind("dragstart",function(t){return e.stopEvent(t),!1}),l.$target.append(s.$splitter)),"top"==s.dock||"bottom"==s.dock?s.__height=t(s.height,l.targetDimension.height):s.__width=t(s.width,l.targetDimension.width),s.resizerType=s.dock,l.dockPanel[s.dock]=s)})},"split-panel":function(o){var l=this.queue[o];l.splitPanel=[],l.$target.find(">[data-split-panel], >[data-splitter]").each(function(s){var d={};!function(t){e.isObject(t)&&!t.error&&(d=jQuery.extend(!0,d,t))}(e.parseJson(this.getAttribute("data-split-panel")||this.getAttribute("data-splitter"),!0)),d.$target=jQuery(this),d.$target.addClass("split-panel-"+l.oriental),d.panelIndex=s,this.getAttribute("data-splitter")?(d.splitter=!0,d.$target.bind(n.mousedown,function(t){d.panelIndex>0&&d.panelIndex<l.splitPanel.length-1&&(d.mousePosition=a(t),r.on.call(i,o,d,d.$target))}).bind("dragstart",function(t){return e.stopEvent(t),!1}),d.resizerType="split"):"horizontal"==l.oriental?d.__height=t(d.height,l.targetDimension.height):(l.oriental="vertical",d.__width=t(d.width,l.targetDimension.width)),l.splitPanel.push(d)})},"tab-panel":function(t){var n=this.queue[t],a=!1;n.tabPanel=[],n.$target.find(">[data-tab-panel]").each(function(t){var i={};!function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(this.getAttribute("data-tab-panel"),!0)),a&&(i.active=!1),i.$target=jQuery(this),i.active&&"false"!=i.active&&(a=!0,n.activePanelIndex=t,i.$target.attr("data-tab-active","true")),i.panelIndex=t,n.tabPanel.push(i)}),a||(n.tabPanel[0].active=!0,n.tabPanel[0].$target.attr("data-tab-active","true"),n.activePanelIndex=0),n.$target.append(jQuery(ax5.mustache.render(c.call(this,t),n))),n.$target.on("click","[data-tab-panel-label]",function(e){var a=this.getAttribute("data-tab-panel-label");d.open.call(i,t,n,a)})}};return function(t){var e=this.queue[t];e.targetDimension={height:e.$target.innerHeight(),width:e.$target.innerWidth()},e.$target.parents("[data-ax5layout]").get(0)&&p.call(this,e.$target.parents("[data-ax5layout]").get(0),t),e.layout in o&&o[e.layout].call(this,t),s.call(this,t)}}(),h=function(t){return e.isString(t)||(t=jQuery(t).data("data-ax5layout-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5layout","402","getQueIdx"))},p=function(t,i){var n=e.isNumber(t)?t:h.call(this,t);this.queue[n].childQueIdxs||(this.queue[n].childQueIdxs=[]),this.queue[n].childQueIdxs.push(i),this.queue[i].parentQueIdx=n};this.init=function(){this.onStateChanged=t.onStateChanged,this.onClick=t.onClick,jQuery(window).bind("resize.ax5layout-"+this.instanceId,function(){o.call(this)}.bind(this))},this.bind=function(i){var n,a={};return i=jQuery.extend(!0,a,t,i),i.target?(i.$target=jQuery(i.target),i.id||(i.id=i.$target.data("data-ax5layout-id")),i.id||(i.id="ax5layout-"+ax5.getGuid(),i.$target.data("data-ax5layout-id",i.id)),i.name=i.$target.attr("data-ax5layout"),i.options&&(i.options=JSON.parse(JSON.stringify(i.options))),function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(i.$target.attr("data-config"),!0)),n=e.search(this.queue,function(){return this.id==i.id}),n===-1?(this.queue.push(i),u.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],i),u.call(this,n)),a=null,n=null,this):(console.log(ax5.info.getError("ax5layout","401","bind")),this)},this.align=function(t,i){var n=e.isNumber(t)?t:h.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5layout","402","align")):(s.call(this,n,null,i),this)},this.onResize=function(t,i){var n=e.isNumber(t)?t:h.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5layout","402","onResize")):(this.queue[n].onResize=i,this)},this.resize=function(){var t={"dock-panel":function(t,i){["top","bottom","left","right"].forEach(function(n){i[n]&&t.dockPanel[n]&&("top"==n||"bottom"==n?t.dockPanel[n].__height=e.isObject(i[n])?i[n].height:i[n]:"left"!=n&&"right"!=n||(t.dockPanel[n].__width=e.isObject(i[n])?i[n].width:i[n]))})},"split-panel":function(){},"tab-panel":function(){}};return function(i,n,a){var o=e.isNumber(i)?i:h.call(this,i);return o===-1?void console.log(ax5.info.getError("ax5layout","402","resize")):(t[this.queue[o].layout].call(this,this.queue[o],n),s.call(this,o,a),this)}}(),this.reset=function(){var t={"dock-panel":function(t){["top","bottom","left","right"].forEach(function(e){t.dockPanel[e]&&("top"==e||"bottom"==e?t.dockPanel[e].__height=t.dockPanel[e].height:"left"!=e&&"right"!=e||(t.dockPanel[e].__width=t.dockPanel[e].width))})},"split-panel":function(){},"tab-panel":function(){}};return function(i,n){var a=e.isNumber(i)?i:h.call(this,i);return a===-1?void console.log(ax5.info.getError("ax5layout","402","reset")):(t[this.queue[a].layout].call(this,this.queue[a]),s.call(this,a,n),this)}}(),this.hide=function(){},this.tabOpen=function(){return function(t,i){var n=e.isNumber(t)?t:h.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5layout","402","tabOpen")):(d.open.call(this,n,this.queue[n],i),this)}}(),this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}())}(),ax5.ui.layout_instance=new ax5.ui.layout,jQuery.fn.ax5layout=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"align":return ax5.ui.layout_instance.align(this,arguments[1],arguments[2]);case"resize":return ax5.ui.layout_instance.resize(this,arguments[1],arguments[2]);case"reset":return ax5.ui.layout_instance.reset(this,arguments[1]);case"hide":return ax5.ui.layout_instance.hide(this,arguments[1]);case"onResize":return ax5.ui.layout_instance.onResize(this,arguments[1]);case"tabOpen":return ax5.ui.layout_instance.tabOpen(this,arguments[1]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.layout_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"binder",version:"0.2.0"},function(){var t=function(){var t;this.instanceId=ax5.getGuid(),this.config={},t=this.config,this.model={},this.tmpl={},this.view_target=null,this.change_trigger={},this.click_trigger={},this.update_trigger={},this.onerror=null;var i=Object.prototype.toString,n=function(t){var e;return null!=t&&t==t.window?e="window":t&&1==t.nodeType?e="element":t&&11==t.nodeType?e="fragment":"undefined"==typeof t?e="undefined":"[object Object]"==i.call(t)?e="object":"[object Array]"==i.call(t)?e="array":"[object String]"==i.call(t)?e="string":"[object Number]"==i.call(t)?e="number":"[object NodeList]"==i.call(t)?e="nodelist":"function"==typeof t&&(e="function"),e},a=function(t,e,i){return t+"["+e+"]"+("."==i?"":"."+i)},o=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};this.setModel=function(t,e){return this.model=t,!this.view_target&&e?(this.view_target=e,this._binding()):this._binding("update"),this},this.set=function(t,e){var i,a,l,s=this;if(Function("val","this"+o(t)+" = val;").call(this.model,e),i=n(e),"object"==i)for(var r in e)this.set(t+"."+r,e[r]);else if("array"==i)for(this.view_target.find('[data-ax-path="'+t+'"]').each(function(){l=(this.type||"").toLowerCase(),"checkbox"!=l&&"radio"!=l||s.set_els_value(this,this.tagName.toLowerCase(),l,e,t,"change")}),a=e.length;a--;)this.set(t+"["+a+"]",e[a]);else this.view_target.find('[data-ax-path="'+t+'"]').each(function(){s.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),e,t,"change")});return this},this.get=function(t){return"undefined"==typeof t?this.model:Function("","return this"+o(t)+";").call(this.model)},this.onChange=function(t,e){return this.change_trigger[t||"*"]=e,this},this.onClick=function(t,e){return this.click_trigger[t]=e,this},this.add=function(t,e){var i=Function("","return this"+o(t)+";").call(this.model),n=this.tmpl[t];e["@i"]=i.length,e["@r"]=i.length,e.__ADDED__=!0,Function("val","this"+o(t)+".push(val);").call(this.model,e);for(var a in n){var l=$(ax5.mustache.render(n[a].content,e));l.attr("data-ax-repeat-path",t),l.attr("data-ax-repeat-i",e["@i"]),this.bind_event_tmpl(l,t),n[a].container.append(l)}this.change("*");var s=this.update_trigger[t];if(s){var r={repeat_path:t,tmpl:n,list:i};s.call(r,r)}return this},this.remove=function(t,e){var i=Function("","return this"+o(t)+";").call(this.model),n=this.tmpl[t];"undefined"==typeof e&&(e=i.length-1);var a=i[e];a.__ADDED__?i.splice(e,1):i[e].__DELETED__=!0;for(var l in n)n[l].container.empty(),this.print_tmpl(t,n[l]);this.change("*");var s=this.update_trigger[t];if(s){var r={repeat_path:t,tmpl:n,list:i};s.call(r,r)}return this},this.update=function(t,e,i){var n=Function("","return this"+o(t)+";").call(this.model),a=this.tmpl[t];"undefined"!=typeof e&&i&&n.splice(e,1,i);for(var l in a)a[l].container.empty(),this.print_tmpl(t,a[l]);this.change("*");var s=this.update_trigger[t];if(s){var r={repeat_path:t,tmpl:a,list:n};s.call(r,r)}return this},this.childAdd=function(t,e,i,n){var a=Function("","return this"+o(t)+";").call(this.model),l=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model);n.__ADDED__=!0,l.push(n),this.update(t,e,a[e])},this.childRemove=function(t,e,i,n){var a=Function("","return this"+o(t)+";").call(this.model),l=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model),s=l[n];s.__ADDED__?l.splice(n,1):l[n].__DELETED__=!0,this.update(t,e,a[e])},this.childUpdate=function(t,e,i,n,a){var l=Function("","return this"+o(t)+";").call(this.model),s=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model);s[n]=a,this.update(t,e,l[e])},this.childSet=function(t,e,i,n){var a=this;return Function("val","this"+o(t)+"["+e+"]."+i+" = val;").call(this.model,n),this.view_target.find('[data-ax-repeat="'+t+'"]').find('[data-ax-repeat-i="'+e+'"]').find('[data-ax-item-path="'+i+'"]').each(function(){a.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),n,t+"["+e+"]."+i)}),this},this.onUpdate=function(t,e){return this.update_trigger[t]=e,this},this._binding=function(t){var e=this;this.view_target.find("[data-ax-path]").each(function(){var t,i=$(this),n=i.attr("data-ax-path"),a=(this.type||"").toLowerCase();try{t=Function("","return this"+o(n)+";").call(e.model)}catch(l){e.onerror&&e.onerror("not found target [model."+o(n)+"]")}e.set_els_value(this,this.tagName.toLowerCase(),a,t||"",n)}),"undefined"==typeof t?this.view_target.find("[data-ax-repeat]").each(function(){var t=$(this),i=t.attr("data-ax-repeat"),n=t.attr("data-ax-repeat-idx");"undefined"==typeof e.tmpl[i]&&(e.tmpl[i]={}),"undefined"!=typeof n?e.tmpl[i][n]={container:t,content:t.find("script").html()}:e.tmpl[i][0]={container:t,content:t.find("script").html()},t.empty()}):this.view_target.find("[data-ax-repeat]").each(function(){var t=$(this);t.empty().show()}),this.view_target.find("[data-ax-path]").unbind("change.axbinder").bind("change.axbinder",function(t){var i,a,l=!1,s=[],r=$(t.target),d=r.attr("data-ax-path"),c=Function("","return this"+o(d)+";").call(e.model),u=(this.type||"").toLowerCase(),h=n(c),p=!0;if("object"!=h&&"array"!=h||(p=!1),"checkbox"==u){if(e.view_target.find('[data-ax-path="'+d+'"]').length>1){for("array"!=n(c)&&(c="undefined"==typeof c||""==c?[]:[].concat(c)),i=c.length,l=!1,a=this.checked;i--;)c[i]==this.value&&(l=!0);if(a)l||c.push(this.value);else{for(i=c.length;i--;)c[i]==this.value||s.push(c[i]);c=s}}else c=this.checked?this.value:"";Function("val","this"+o(d)+" = val;").call(e.model,c),e.change(d,{el:this,jquery:r,tagname:this.tagName.toLowerCase(),value:c})}else p&&(Function("val","this"+o(d)+" = val;").call(e.model,this.value),e.change(d,{el:this,jquery:r,tagname:this.tagName.toLowerCase(),value:this.value}));r.data("changedTime",(new Date).getTime())});var i;for(var a in e.tmpl){for(var l in e.tmpl[a])this.print_tmpl(a,e.tmpl[a][l],"isInit");if(i=this.update_trigger[a]){var s={repeat_path:a,tmpl:e.tmpl[a],list:Function("","return this."+a+";").call(this.model)};i.call(s,s)}}},this.set_els_value=function(t,e,i,n,a,l){n="undefined"==typeof n?[]:[].concat(n);var s,r;if("input"==e)if("checkbox"==i||"radio"==i){r=n.length;var d=!1;try{if(r>0)for(;r--;)"undefined"!=typeof n[r]&&t.value===n[r].toString()&&(d=!0)}catch(c){console.log(c)}t.checked=d}else t.value=n.join("");else if("select"==e){s=t.options,r=s.length;for(var u,h=!1;r--;){for(u=n.length;u--;)if("undefined"!=typeof n[u]&&s[r].value===n[u].toString()){s[r].selected=!0,h=!0;break}if(h)break}h||(s[0]?(s[0].selected=!0,Function("val","this"+o(a)+" = val;").call(this.model,s[0].value)):Function("val","this"+o(a)+" = val;").call(this.model,"")),window.AXSelect&&$("undefined"!=typeof n&&t).bindSelectSetValue(n[n.length-1])}else"textarea"==e?t.value=n.join("")||"":t.innerText?t.innerText=n.join(""):t.innerHTML=n.join("");return l&&this.change(a,{el:t,tagname:e,value:n}),this},this.change=function(t,e){var i=this.change_trigger[t];i&&i.call(e,e),"*"!=t&&this.change_trigger["*"]&&this.change_trigger["*"].call(e,e)},this.click=function(t,e){var i=this.click_trigger[t];i&&i.call(e,e)},this.sync_model=function(){},this.print_tmpl=function(t,e,i){var a=Function("","return this"+o(t)+";").call(this.model);if(a&&"array"==n(a))for(var l=0,s=a.length;l<s;l++){var r=a[l];if(jQuery.isPlainObject(r)?(r["@i"]=l,r["@r"]=l,0===l&&(r["@first"]=!0)):(r={"@i":l,"@value":r},0===l&&(r["@first"]=!0),console.log(r)),!r.__DELETED__){var d=$(ax5.mustache.render(e.content,r));d.attr("data-ax-repeat-path",t),d.attr("data-ax-repeat-i",r["@i"]),this.bind_event_tmpl(d,t),e.container.append(d)}}},this.bind_event_tmpl=function(t,e){var i=this,l=t.attr("data-ax-repeat-i"),s=Function("","return this"+o(e)+";").call(this.model);t.find("[data-ax-repeat-click]").unbind("click.axbinder").bind("click.axbinder",function(t){var n=ax5.util.findParentNode(t.target,function(t){return t.getAttribute("data-ax-repeat-click");
});if(n){var a=$(n),o=a.attr("data-ax-repeat-click"),r=(a.attr("data-ax-repeat-path"),{el:n,jquery:a,tagname:n.tagName.toLowerCase(),value:o,repeat_path:e,item:s[l],item_index:l,item_path:e+"["+l+"]"});i.click(e,r)}}),t.find("[data-ax-item-path]").each(function(){var t,n=$(this),o=n.attr("data-ax-item-path"),s=a(e,l,o),r=(this.type||"").toLowerCase();try{t=Function("","return this."+s+";").call(i.model)}catch(d){i.onerror&&i.onerror("not found target [model."+s+"]")}i.set_els_value(this,this.tagName.toLowerCase(),r,t||"",s)}),t.find("[data-ax-item-path]").unbind("change.axbinder").bind("change.axbinder",function(o){var s,r,d=!1,c=[],u=(this.type||"").toLowerCase(),h=$(o.target),p=h.attr("data-ax-item-path"),f=a(e,l,p),g=Function("","return this."+f+";").call(i.model),m=n(g),x=!0;if("object"!=m&&"array"!=m||(x=!1),"checkbox"==u){if(t.find('[data-ax-item-path="'+p+'"]').length>1){for("array"!=n(g)&&(g="undefined"==typeof g||""==g?[]:[].concat(g)),s=g.length,d=!1,r=this.checked;s--;)g[s]==this.value&&(d=!0);if(r)d||g.push(this.value);else{for(s=g.length;s--;)g[s]==this.value||c.push(g[s]);g=c}}else g=this.checked?this.value:"";Function("val","this."+f+" = val;").call(i.model,g),i.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:g})}else x&&(Function("val","this."+f+" = val;").call(i.model,this.value),i.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:this.value}));h.data("changedTime",(new Date).getTime())}),t.find("[data-ax-item-path]").unbind("blur.axbinder").bind("blur.axbinder",function(t){var e=$(t.target);("undefined"==typeof e.data("changedTime")||e.data("changedTime")<(new Date).getTime()-10)&&e.trigger("change")})},this.focus=function(t){return this.view_target.find('[data-ax-path="'+t+'"]').focus(),this},this.validate=function(){var t=this,e=[];return this.view_target.find("[data-ax-path]").each(function(){var i=$(this),n=i.attr("data-ax-path"),a=i.attr("data-ax-validate");if(a){var l=Function("","return this"+o(n)+";").call(t.model);"undefined"==typeof l&&(l="");var s=l.toString(),r=!1;"required"==a&&""==s.trim()?r=!0:!/\D.?/g.test(a)&&s.trim().length<a.number()&&(r=!0),r&&e.push({type:a,dataPath:n,el:this,jquery:i,value:l})}}),this.view_target.find("[data-ax-repeat-path]").each(function(){var i=$(this),n=i.attr("data-ax-repeat-path"),a=i.attr("data-ax-repeat-i");i.find("[data-ax-validate]").each(function(){var i=$(this),l=i.attr("data-ax-validate"),s=i.attr("data-ax-item-path"),r=Function("","return this"+o(n)+"["+a+"]."+s+";").call(t.model);"undefined"==typeof r&&(r="");var d=r.toString();if(l){var c=!1;"required"==l&&""==d.trim()?c=!0:!/\D.?/g.test(l)&&d.trim().length<l.number()&&(c=!0),c&&e.push({type:l,dataPath:n,el:this,jquery:i,value:r})}})}),e.length>0?{error:e}:{}},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return t}())}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"multiUploader",version:"0.0.1"},function(){var i=function(){var i;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",file_types:"*/*"},this.queue=[],this.target=null,this.selectedFile=null,this.uploadedFile=null,i=this.config,this.init=function(){},this.main=function(){t.multiUploader_instance=t.multiUploader_instance||[],t.multiUploader_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}())}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"autocomplete",version:"0.0.5"},function(){var e=function(){var e,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"Now Processing"},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,e=this.config;var a={18:"KEY_ALT",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},l=function(){for(var t,e=this.queue.length;e--;){var n=this.queue[e];if(n.$display&&(t=Math.max(n.$select.outerWidth(),i.number(n.minWidth)),n.$display.css({"min-width":t}),n.reset&&n.$display.find(".addon-icon-reset").css({"line-height":this.queue[e].$display.height()+"px"}),n.multiple)){var a=function(){return i.number(n.$display.css("border-top-width"))+i.number(n.$display.css("border-bottom-width"))}.call(this);n.$target.height(""),n.$display.height("");var o=n.$displayTable.outerHeight();Math.abs(o-n.$target.height())>a&&(n.$target.css({height:o+a}),n.$display.css({height:o+a}))}}return e=null,t=null,this},s=function(t){if(!this.activeautocompleteOptionGroup)return this;var e=this.queue[this.activeautocompleteQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activeautocompleteOptionGroup),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activeautocompleteOptionGroup.addClass("direction-"+e.direction),this.activeautocompleteOptionGroup.css(function(){return"top"==e.direction?{left:i.left,top:i.top+n.height+1,width:n.width}:"bottom"==e.direction?{left:i.left,top:i.top-this.activeautocompleteOptionGroup.outerHeight()-1,width:n.width}:void 0}.call(this))},r=function(t,e){if(!this.activeautocompleteOptionGroup)return this;var n=this.queue[this.activeautocompleteQueueIndex],a="display";return(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(w.call(this,n.id,{optionIndex:{index:e.getAttribute("data-option-index")}},void 0,"optionItemClick"),i.selectRange(n.$displayLabel,"end"),n.multiple||this.close()),this):(this.close(),this)},d=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)p.call(this,this.activeautocompleteQueueIndex),this.close();else if(e.which==ax5.info.eventKeys.RETURN){for(var i=[],n=this.queue[this.activeautocompleteQueueIndex],a=n.$displayLabel.get(0).childNodes,o=0,l=a.length;o<l;o++){var s=a[o];if(s.nodeType in t.util.nodeTypeProcessor){var r=t.util.nodeTypeProcessor[s.nodeType].call(this,this.activeautocompleteQueueIndex,s);"undefined"!=typeof r&&i.push(r)}}w.call(this,n.id,i,!0),h.call(this,this.activeautocompleteQueueIndex),n.multiple||this.close()}},c=function(e){var i=this.queue[e],n={};return n.id=i.id,n.theme=i.theme,n.size="ax5autocomplete-option-group-"+i.size,n.multiple=i.multiple,n.lang=i.lang,n.options=i.options,n.selected=i.selected,n.hasSelected=n.selected&&n.selected.length>0,n.removeIcon=i.removeIcon,t.tmpl.get.call(this,"label",n,i.columnKeys)+"&nbsp;"},u=function(e){var n,a=this.queue[e];if(!a.multiple&&a.selected&&a.selected.length>0&&(a.selected=[].concat(a.selected[a.selected.length-1])),a.selected.forEach(function(t,e){t["@index"]=e}),a.$select.html(t.tmpl.get.call(this,"formSelectOptions",{selected:a.selected},a.columnKeys)),a.$displayLabel.html(c.call(this,e)),a.$target.height(""),a.$display.height(""),a.$target.height()<(n=a.$displayTable.outerHeight())){var o=function(){return i.number(a.$display.css("border-top-width"))+i.number(a.$display.css("border-bottom-width"))}();a.$target.css({height:n+o}),a.$display.css({height:n+o})}},h=function(t){this.queue[t].$displayLabel.trigger("focus"),i.selectRange(this.queue[t].$displayLabel,"end")},p=function(t){this.queue[t].$displayLabel.trigger("blur")},f=function(e,n){if(this.activeautocompleteQueueIndex==-1)return this;var a=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;n=n.replace(a,""),this.queue[e].waitOptions=!0,this.queue[e].onSearch.call({self:this,item:this.queue[e],searchWord:n},function(e){var a={},o=this.queue[this.activeautocompleteQueueIndex];return!!o&&(function(t,e){var n={};e.options.forEach(function(e,i){e["@index"]=i,e["@findex"]=i,n[e[t.columnKeys.optionValue]]=e}),i.isArray(t.selected)&&t.selected.forEach(function(i){n[i[t.columnKeys.optionValue]]&&(e.options[n[i[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(o,e),o.options=e.options,l.call(this),a.id=o.id,a.theme=o.theme,a.size="ax5autocomplete-option-group-"+o.size,a.multiple=o.multiple,a.lang=o.lang,a.options=o.options,this.activeautocompleteOptionGroup.find('[data-els="content"]').html(jQuery(t.tmpl.get.call(this,"options",a,o.columnKeys))),void g.call(this,this.activeautocompleteQueueIndex,n))}.bind(this))},g=function(t,e){if(this.activeautocompleteQueueIndex==-1)return this;var i,n=[],a=-1,o=this.queue[t].options.length-1;if(""!=e){for(;o-a++;){if(i=this.queue[t].options[a],(""+i.text).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var l=(""+i.text).toLowerCase().search(e.toLowerCase());if(l>-1&&(n.push({"@findex":i["@findex"],optionsSort:l}),n.length>2))break;l=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0?x.call(this,t,void 0,n[0]["@findex"]):m.call(this,t)},m=function(t){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[t].optionFocusIndex=-1},x=function(t,e,n){var a,o,l,s,r=this.queue[t];if(this.activeautocompleteOptionGroup&&r.options&&r.options.length>0){if("undefined"!=typeof n?a=n:(o=r.optionFocusIndex==-1?r.optionSelectedIndex||-1:r.optionFocusIndex,o==-1?a=0:(a=o+e,a<0?a=0:a>r.optionItemLength-1&&(a=r.optionItemLength-1))),r.optionFocusIndex=a,r.options[a]&&r.options[a].hide){if("undefined"==typeof e)return this;for(;r.options[a].hide;){if(a+=e,a<0){a=0;break}if(a>r.optionItemLength-1){a=r.optionItemLength-1;break}}}if("undefined"!=typeof a&&(this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover"),l=this.activeautocompleteOptionGroup.find('[data-option-focus-index="'+a+'"]').addClass("hover"),s=this.activeautocompleteOptionGroup.find('[data-els="content"]'),l.get(0))){var d=l.outerHeight(),c=s.innerHeight(),u=s.scrollTop(),h=l.position().top+s.scrollTop();c+u<h+d?s.scrollTop(h+d-c):u>h&&s.scrollTop(h),"undefined"!=typeof e&&i.selectRange(r.$displayLabel,"end")}}},v=function(t){return t instanceof jQuery?t=t.data("data-ax5autocomplete-id"):i.isString(t)||(t=jQuery(t).data("data-ax5autocomplete-id")),i.isString(t)?i.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5autocomplete","402","getQueIdx"))},b=function(t,e,i){return"undefined"==typeof i?!t.multiple||!e:i},y=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},w=function(){var t={selectedIndex:function(t,e,i,n){},removeSelectedIndex:function(t,e,i,n){for(var a=this.queue[t],o={},l=[],s=0,r=0;r<a.selected.length;r++)a.selected[r]["@index"]!=e.removeSelectedIndex.index&&(o={"@index":s,"@findex":s},o[a.columnKeys.optionValue]=a.selected[r][a.columnKeys.optionValue],o[a.columnKeys.optionText]=a.selected[r][a.columnKeys.optionText],l.push(o),s++);a.selected=l},optionIndex:function a(t,e,i,n){var o=this.queue[t],l={},a=o.selected.length,s=!0;l={"@index":a,"@findex":a},l[o.columnKeys.optionValue]=o.options[e.optionIndex.index][o.columnKeys.optionValue],l[o.columnKeys.optionText]=o.options[e.optionIndex.index][o.columnKeys.optionText];for(var r=0;r<o.selected.length;r++)o.selected[r][o.columnKeys.optionValue]==l[o.columnKeys.optionValue]&&(s=!1);s&&o.selected.push(l)},arr:function(e,a,o,l){a.forEach(function(a){if(i.isString(a)||i.isNumber(a))t.text.call(n,e,a,o,"justSetValue");else for(var l in t)if(a[l]){t[l].call(n,e,a,o,"justSetValue");break}})},value:function(t,n,a,o){var l,s=this.queue[t],r=i.search(s.options,function(){return this[s.columnKeys.optionValue]==n.value[s.columnKeys.optionValue]});if(r>-1)if(s.options[r][s.columnKeys.optionSelected]=b(s,s.options[r][s.columnKeys.optionSelected],a),s.options[r][s.columnKeys.optionSelected]){for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][e.columnKeys.optionValue]==s.options[r][e.columnKeys.optionValue]){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=s.options[r][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.options[r][s.columnKeys.optionText],s.selected.push(l))}else{for(var u=[],c=0;c<s.selected.length;c++)s.selected[c][e.columnKeys.optionValue]==s.options[r][e.columnKeys.optionValue]||(l={},l[s.columnKeys.optionValue]=s.selected[c][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.selected[c][s.columnKeys.optionText],u.push(l));s.selected=u}else{for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][e.columnKeys.optionValue]==n.value[e.columnKeys.optionValue]){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=n.value[e.columnKeys.optionValue],l[s.columnKeys.optionText]=n.value[e.columnKeys.optionText],s.selected.push(l))}},text:function(t,n,a,o){var l,s=this.queue[t],r=i.search(s.options,function(){return this[s.columnKeys.optionText]==n});if(r>-1)if(s.options[r][s.columnKeys.optionSelected]=b(s,s.options[r][s.columnKeys.optionSelected],a),s.options[r][s.columnKeys.optionSelected]){for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][e.columnKeys.optionText]==s.options[r][e.columnKeys.optionText]){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=s.options[r][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.options[r][s.columnKeys.optionText],s.selected.push(l))}else{for(var u=[],c=0;c<s.selected.length;c++)s.selected[c][e.columnKeys.optionText]==s.options[r][e.columnKeys.optionText]||(l={},l[s.columnKeys.optionValue]=s.selected[c][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.selected[c][s.columnKeys.optionText],u.push(l));s.selected=u}else{for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][e.columnKeys.optionText]==n){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=n,l[s.columnKeys.optionText]=n,s.selected.push(l))}},clear:function(t){y.call(this,t),m.call(this,t),this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[t].optionSelectedIndex=-1}};return function(e,n,a,l){var r=i.isNumber(e)?e:v.call(this,e);if(r===-1)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if("undefined"==typeof n)throw"error not found value";if(i.isArray(n))t.clear.call(this,r),t.arr.call(this,r,this.queue[r].multiple||0==n.length?n:[n[n.length-1]],a);else if(i.isString(n)||i.isNumber(n))"undefined"==typeof n||null===n||this.queue[r].multiple||y.call(this,r),t.text.call(this,r,n,a);else if(null===n)t.clear.call(this,r);else{this.queue[r].multiple||y.call(this,r);for(var d in t)if(n[d]){t[d].call(this,r,n,a);break}}return u.call(this,r),s.call(this),"undefined"!=typeof n&&l&&!l.noStateChange&&o.call(this,this.queue[r],{self:this,item:this.queue[r],state:"changeValue",value:this.queue[r].selected}),e=null,this}}();this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5autocomplete-display-"+this.instanceId,function(){l.call(this)}.bind(this))},this.bind=function(o){var s,r=function(){var e=i.debounce(function(e){if(this.activeautocompleteQueueIndex==-1)return this;for(var a=[],o="",l=!1,s=this.queue[e],r=s.$displayLabel.get(0).childNodes,d=0,c=r.length;d<c;d++){var u=r[d];if(u.nodeType in t.util.nodeTypeProcessor){var h=t.util.nodeTypeProcessor[u.nodeType].call(this,this.activeautocompleteQueueIndex,u,!0);"undefined"==typeof h||(i.isString(h)?o=h:(h.removeSelectedIndex&&(l=!0),a.push(h)))}}0==r.length?w.call(this,s.id,null,void 0,"internal"):""!=o?f.call(n,e,o):l&&(w.call(this,s.id,a,void 0,"internal"),i.selectRange(s.$displayLabel,"end"),n.close())},150),o=function(e){for(var n=[],a=this.queue[e],o=a.$displayLabel.get(0).childNodes,l=0,s=o.length;l<s;l++){var r=o[l];if(r.nodeType in t.util.nodeTypeProcessor){var d=t.util.nodeTypeProcessor[r.nodeType].call(this,e,r,!0);"undefined"==typeof d||i.isString(d)||n.push(d)}}w.call(this,a.id,n,void 0,"blurLabel")},s={click:function(t,e){var a,o=i.findParentNode(e.target,function(t){return t.getAttribute("data-ax5autocomplete-remove")?(a="optionItemRemove",!0):t.getAttribute("data-selected-clear")?(a="clear",!0):void 0});if(o){if("optionItemRemove"===a){var l=o.getAttribute("data-ax5autocomplete-remove-index");return this.queue[t].selected.splice(l,1),u.call(this,t),h.call(this,t),i.stopEvent(e),this}"clear"===a&&w.call(this,t,{clear:!0})}else n.activeautocompleteQueueIndex==t?this.queue[t].optionFocusIndex==-1&&n.close():""==this.queue[t].$displayLabel.text().replace(/^\W*|\W*$/g,"")&&(this.queue[t].$displayLabel.html(c.call(this,t)),h.call(this,t))},keyUp:function(t,o){return o.which==ax5.info.eventKeys.ESC&&n.activeautocompleteQueueIndex===-1?(i.stopEvent(o),this):(n.activeautocompleteQueueIndex!=t&&(n.open(t),i.stopEvent(o)),void(a[o.which]?i.stopEvent(o):e.call(this,t)))},keyDown:function(t,e){e.which==ax5.info.eventKeys.ESC?i.stopEvent(e):e.which==ax5.info.eventKeys.RETURN?i.stopEvent(e):e.which==ax5.info.eventKeys.DOWN?(x.call(this,t,1),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP&&(x.call(this,t,-1),i.stopEvent(e))},focus:function(t,e){i.selectRange(this.queue[t].$displayLabel,"end")},blur:function(t,e){o.call(this,t),i.stopEvent(e)},selectChange:function(t,e){w.call(this,t,{value:this.queue[t].$select.val()},!0)}};return function(e){var i=this.queue[e],n={};return i.$display?(i.$displayLabel.html(c.call(this,e)),l.call(this)):(n.instanceId=this.instanceId,n.id=i.id,n.name=i.name,n.theme=i.theme,n.tabIndex=i.tabIndex,n.multiple=i.multiple,n.reset=i.reset,n.label=c.call(this,e),n.formSize=function(){return i.size?"input-"+i.size:""}(),i.$display=jQuery(t.tmpl.get.call(this,"autocompleteDisplay",n,i.columnKeys)),i.$displayTable=i.$display.find('[data-els="display-table"]'),i.$displayLabel=i.$display.find('[data-ax5autocomplete-display="label"]'),i.$target.find("select").get(0)?(i.$select=i.$target.find("select"),i.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&i.$select.attr("name","name"),i.$select.attr("multiple","multiple")):(i.$select=jQuery(t.tmpl.get.call(this,"formSelect",n,i.columnKeys)),i.$target.append(i.$select)),i.$target.append(i.$display),l.call(this)),i.$display.unbind("click.ax5autocomplete").bind("click.ax5autocomplete",s.click.bind(this,e)),i.$displayLabel.unbind("focus.ax5autocomplete").bind("focus.ax5autocomplete",s.focus.bind(this,e)).unbind("blur.ax5autocomplete").bind("blur.ax5autocomplete",s.blur.bind(this,e)).unbind("keyup.ax5autocomplete").bind("keyup.ax5autocomplete",s.keyUp.bind(this,e)).unbind("keydown.ax5autocomplete").bind("keydown.ax5autocomplete",s.keyDown.bind(this,e)),i.$select.unbind("change.ax5autocomplete").bind("change.ax5autocomplete",s.selectChange.bind(this,e)),n=null,i=null,e=null,this}}(),d={};return o=jQuery.extend(!0,d,e,o),o.target?(o.$target=jQuery(o.target),o.id||(o.id=o.$target.data("data-ax5autocomplete-id")),o.id||(o.id="ax5autocomplete-"+ax5.getGuid(),o.$target.data("data-ax5autocomplete-id",o.id)),o.name=o.$target.attr("data-ax5autocomplete"),o.options=[],o.selected=[],function(t){i.isObject(t)&&!t.error&&(o=jQuery.extend(!0,o,t))}(i.parseJson(o.$target.attr("data-ax5autocomplete-config"),!0)),s=i.search(this.queue,function(){return this.id==o.id}),s===-1?(this.queue.push(o),r.call(this,this.queue.length-1)):(this.queue[s]=jQuery.extend(!0,{},this.queue[s],o),r.call(this,s)),d=null,s=null,this):(console.log(ax5.info.getError("ax5autocomplete","401","bind")),this)},this.open=function(){return function(n,a){this.waitOptionsCallback=null;var l,c,u=i.isNumber(n)?n:v.call(this,n),h=this.queue[u],p={};return h.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeautocompleteOptionGroup?this.activeautocompleteQueueIndex==u?this:a>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(u,(a||0)+1)}.bind(this),e.animateTime),this):(h.optionFocusIndex=-1,h.selected&&h.selected.length>0&&(h.optionSelectedIndex=h.selected[0]["@findex"]),p.id=h.id,p.theme=h.theme,p.size="ax5autocomplete-option-group-"+h.size,p.multiple=h.multiple,p.lang=h.lang,h.$display.attr("data-autocomplete-option-group-opened","true"),p.waitOptions=!0,p.options=[],this.activeautocompleteOptionGroup=jQuery(t.tmpl.get.call(this,"optionGroup",p,h.columnKeys)),this.activeautocompleteOptionGroup.find('[data-els="content"]').html(jQuery(t.tmpl.get.call(this,"options",p,h.columnKeys))),this.activeautocompleteQueueIndex=u,s.call(this,"append"),jQuery(window).bind("resize.ax5autocomplete-"+this.instanceId,function(){s.call(this)}.bind(this)),h.selected&&h.selected.length>0&&(c=this.activeautocompleteOptionGroup.find('[data-option-index="'+h.selected[0]["@index"]+'"]'),c.get(0)&&(l=c.position().top-this.activeautocompleteOptionGroup.height()/3,this.activeautocompleteOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:l},h.animateTime,"swing",function(){}))),jQuery(window).bind("keyup.ax5autocomplete-"+this.instanceId,function(t){t=t||window.event,d.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5autocomplete-"+this.instanceId,function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this)),o.call(this,h,{self:this,state:"open",item:h}),p=null,l=null,c=null,this))}}(),this.setValue=function(t,e){var n=i.isNumber(t)?t:v.call(this,t);if(n===-1)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if(this.queue[n].selected=[],y.call(this,n),i.isArray(e)){var a=i.map(e,function(){return{value:this}});w.call(this,n,a,!0,{noStateChange:!0})}else i.isObject(e)&&(console.log(e),w.call(this,n,{value:e},!0,{noStateChange:!0}));return p.call(this,n),this},this.setText=function(t,e){var n=i.isNumber(t)?t:v.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(this.queue[n].selected=[],y.call(this,n),w.call(this,n,e,!0,{noStateChange:!0}),p.call(this,n),this)},this.getSelectedOption=function(t){var e=i.isNumber(t)?t:v.call(this,t);return e===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):i.deepCopy(this.queue[e].selected)},this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeautocompleteOptionGroup?(t=this.queue[this.activeautocompleteQueueIndex],t.optionFocusIndex=-1,t.$display.removeAttr("data-autocomplete-option-group-opened").trigger("focus"),this.activeautocompleteOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5autocomplete-"+this.instanceId).unbind("click.ax5autocomplete-"+this.instanceId).unbind("keyup.ax5autocomplete-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.remove(),this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,o.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(t){var e=i.isNumber(t)?t:v.call(this,t);return e===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(p.call(this,e),this)},this.enable=function(t){var e=v.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$input.removeAttr("disabled"),o.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=v.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$input.attr("disabled","disabled"),o.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}()),t=ax5.ui.autocomplete}(),ax5.ui.autocomplete_instance=new ax5.ui.autocomplete,jQuery.fn.ax5autocomplete=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.autocomplete_instance.open(this);case"close":return ax5.ui.autocomplete_instance.close(this);case"setValue":return ax5.ui.autocomplete_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.autocomplete_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.autocomplete_instance.getSelectedOption(this);case"enable":return ax5.ui.autocomplete_instance.enable(this);case"disable":return ax5.ui.autocomplete_instance.disable(this);case"blur":return ax5.ui.autocomplete_instance.blur(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.autocomplete_instance.bind(t)});return this}}(),function(){var t=ax5.ui.autocomplete,e=(ax5.util,function(t){return'\n<div class="ax5autocomplete-option-group {{theme}} {{size}}" data-ax5autocomplete-option-group="{{id}}">\n    <div class="ax-autocomplete-body">\n        <div class="ax-autocomplete-option-group-content" data-els="content"></div>\n    </div>\n    <div class="ax-autocomplete-arrow"></div> \n</div>\n'}),i=function(t){return'\n<div class="form-control {{formSize}} ax5autocomplete-display {{theme}}" \ndata-ax5autocomplete-display="{{id}}" data-ax5autocomplete-instance="{{instanceId}}">\n    <div class="ax5autocomplete-display-table" data-els="display-table">\n        <div data-ax5autocomplete-display="label-holder"> \n        <a {{^tabIndex}}href="#ax5autocomplete-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n        data-ax5autocomplete-display="label"\n        contentEditable="true"\n        spellcheck="false">{{{label}}}</a>\n        </div>\n        <div data-ax5autocomplete-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n        </div>\n    </div>\n</a>\n'},n=function(t){return'\n<select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" multiple="multiple"></select>\n'},a=function(t){return'\n{{#selected}}\n<option value="{{'+t.optionValue+'}}" selected="true">{{'+t.optionText+"}}</option>\n{{/selected}}\n"},o=function(t){return'\n{{#waitOptions}}\n    <div class="ax-autocomplete-option-item">\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">\n                    {{{lang.loading}}}\n                </span>\n            </div>\n        </div>\n{{/waitOptions}}\n{{^waitOptions}}\n    {{#options}}\n        {{^hide}}\n        <div class="ax-autocomplete-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">{{'+t.optionText+'}}</span>\n            </div>\n        </div>\n        {{/hide}}\n    {{/options}}\n    {{^options}}\n        <div class="ax-autocomplete-option-item">\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">\n                    {{{lang.noOptions}}}\n                </span>\n            </div>\n        </div>\n    {{/options}}\n{{/waitOptions}}\n'},l=function(t){return'{{#selected}}<div tabindex="-1" data-ax5autocomplete-selected-label="{{@i}}" data-ax5autocomplete-selected-text="{{text}}"><div data-ax5autocomplete-remove="true" data-ax5autocomplete-remove-index="{{@i}}">{{{removeIcon}}}</div><span>{{text}}</span></div>{{/selected}}'};t.tmpl={autocompleteDisplay:i,formSelect:n,formSelectOptions:a,optionGroup:e,options:o,label:l,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui.autocomplete,e=(ax5.util,{1:function(t,e,i){var n=this.config,a=e;$(e).find("span").get(0)&&(a=$(e).find("span").get(0));var o,l,s=(a.textContent||a.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,""),r=this.queue[t];if(r.selected&&r.selected.length>0)return e.getAttribute("data-ax5autocomplete-selected-text")==s?(o=e.getAttribute("data-ax5autocomplete-selected-label"),l=r.selected[o],{selectedIndex:{index:l["@index"],value:l[n.columnKeys.optionValue]}}):(o=e.getAttribute("data-ax5autocomplete-selected-label"),l=r.selected[o],{removeSelectedIndex:{index:l["@index"],value:l[n.columnKeys.optionValue]}})},3:function(t,e,i){var n=(this.config,(e.textContent||e.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,"")),a=this.queue[t];if(""!=n){if(i)return n;var o;return a.optionFocusIndex>-1&&(o=this.activeautocompleteOptionGroup.find('[data-option-focus-index="'+a.optionFocusIndex+'"]')),a.optionFocusIndex>-1&&o.get(0)&&o.attr("data-option-value")?{optionIndex:{gindex:o.attr("data-option-group-index"),index:o.attr("data-option-index")}}:a.editable?n:void 0}}});t.util={nodeTypeProcessor:e}}();