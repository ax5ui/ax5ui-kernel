"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};(function(){var e,t,n,i=this,a=window,o=document,s=(document.documentElement,/^(["'](\\.|[^"\\\n\r])*?["']|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/),l=/^-ms-/,r=/[\-_]([\da-z])/gi,u=/([A-Z])/g,c=/\./,d=/[-|+]?[\D]/gi,h=/\D/gi,f=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),p=/&/g,m=/=/,g=/[ ]+/g,v={};v.guid=1,v.getGuid=function(){return v.guid++},v.info=e=function(){function n(e,n){return e={href:a.location.href,param:a.location.search,referrer:o.referrer,pathname:a.location.pathname,hostname:a.location.hostname,port:a.location.port},n=e.href.split(/[\?#]/),e.param=e.param.replace("?",""),e.url=n[0],e.href.search("#")>-1&&(e.hashdata=t.last(n)),n=null,e.baseUrl=t.left(e.href,"?").replace(e.pathname,""),e}function i(t,n,i){return e.errorMsg&&e.errorMsg[t]?{className:t,errorCode:n,methodName:i,msg:e.errorMsg[t][n]}:{className:t,errorCode:n,methodName:i}}var s="0.0.1",l="",r=function(){console.error(t.toArray(arguments).join(":"))},u={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,SPACE:32},c=[{label:"SUN"},{label:"MON"},{label:"TUE"},{label:"WED"},{label:"THU"},{label:"FRI"},{label:"SAT"}],d=function(e,t,n,i,a,o){return e=navigator.userAgent.toLowerCase(),t=-1!=e.search(/mobile/g),o,-1!=e.search(/iphone/g)?{name:"iphone",version:0,mobile:!0}:-1!=e.search(/ipad/g)?{name:"ipad",version:0,mobile:!0}:-1!=e.search(/android/g)?(i=/(android)[ \/]([\w.]+)/.exec(e)||[],o=i[2]||"0",{name:"android",version:o,mobile:t}):(n="",i=/(opr)[ \/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],a=i[1]||"",o=i[2]||"0","msie"==a&&(a="ie"),{name:a,version:o,mobile:t})}(),h=!("undefined"==typeof window||"undefined"==typeof navigator||!a.document),f=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",p={};return{errorMsg:p,version:s,baseUrl:l,onerror:r,eventKeys:u,weekNames:c,browser:d,isBrowser:h,wheelEnm:f,urlUtil:n,getError:i}}(),v.util=t=function(){function t(e,t){if(O(e))return[];var n,i=0,a=e.length,o=void 0===a||"function"==typeof e;if(o){for(n in e)if("undefined"!=typeof e[n]&&t.call(e[n],n,e[n])===!1)break}else for(;a>i&&("undefined"==typeof e[i]||t.call(e[i],i,e[i++])!==!1););return e}function y(e,t){if(O(e))return[];var n,i,a=0,o=e.length,s=[];if(j(e)){for(n in e)if("undefined"!=typeof e[n]){if(i=void 0,(i=t.call(e[n],n,e[n]))===!1)break;s.push(i)}}else for(;o>a;)if("undefined"!=typeof e[a]){if(i=void 0,(i=t.call(e[a],a,e[a++]))===!1)break;s.push(i)}return s}function b(e,t){if(O(e))return-1;var n,i=0,a=e.length;if(j(e))for(n in e){if("undefined"!=typeof e[n]&&_(t)&&t.call(e[n],n,e[n]))return n;if(e[n]==t)return n}else for(;a>i;){if("undefined"!=typeof e[i]&&_(t)&&t.call(e[i],i,e[i]))return i;if(e[i]==t)return i;i++}return-1}function x(e,t){var n,a,o;if(D(e)){for(n=0,a=e.length,o=e[n];a-1>n&&("undefined"==typeof e[n]||(o=t.call(i,o,e[++n]))!==!1););return o}if(j(e)){for(n in e)if("undefined"!=typeof e[n]&&(o=t.call(i,o,e[n]))===!1)break;return o}return console.error("argument error : ax5.util.reduce - use Array or Object"),null}function w(e,t){for(var n=e.length-1,a=e[n];n>0&&("undefined"==typeof e[n]||(a=t.call(i,a,e[--n]))!==!1););return a}function k(e,t){if(O(e))return[];var n,i,a=0,o=e.length,s=[];if(j(e))for(n in e)"undefined"!=typeof e[n]&&(i=t.call(e[n],n,e[n]))&&s.push(e[n]);else for(;o>a;)"undefined"!=typeof e[a]&&((i=t.call(e[a],a,e[a]))&&s.push(e[a]),a++);return s}function C(e){var n="";if(v.util.isArray(e)){var i=0,a=e.length;for(n+="[";a>i;i++)i>0&&(n+=","),n+=C(e[i]);n+="]"}else if(v.util.isObject(e)){n+="{";var o=[];t(e,function(e,t){o.push('"'+e+'": '+C(t))}),n+=o.join(", "),n+="}"}else v.util.isString(e)?n='"'+e+'"':v.util.isNumber(e)?n=e:v.util.isUndefined(e)?n="undefined":v.util.isFunction(e)&&(n='"{Function}"');return n}function S(e,t){if(!t&&!s.test(e))return{error:500,msg:"syntax error"};try{return new Function("","return "+e)()}catch(n){return{error:500,msg:"syntax error"}}}function $(e){var t;return null!=e&&e==e.window?t="window":e&&1==e.nodeType?t="element":e&&11==e.nodeType?t="fragment":"undefined"==typeof e?t="undefined":"[object Object]"==ce.call(e)?t="object":"[object Array]"==ce.call(e)?t="array":"[object String]"==ce.call(e)?t="string":"[object Number]"==ce.call(e)?t="number":"[object NodeList]"==ce.call(e)?t="nodelist":"function"==typeof e&&(t="function"),t}function T(e){return null!=e&&e==e.window}function E(e){return!(!e||1!=e.nodeType&&11!=e.nodeType)}function j(e){return"[object Object]"==ce.call(e)}function D(e){return"[object Array]"==ce.call(e)}function _(e){return"function"==typeof e}function I(e){return"[object String]"==ce.call(e)}function N(e){return"[object Number]"==ce.call(e)}function M(e){return"[object NodeList]"==ce.call(e)||e&&e[0]&&1==e[0].nodeType}function Q(e){return"undefined"==typeof e}function O(e){return"undefined"==typeof e||null===e||""===e}function q(e){return e instanceof Date&&!isNaN(e.valueOf())}function A(e){var t=!1;if(e){if(e instanceof Date&&!isNaN(e.valueOf()))t=!0;else if(e=e.replace(/\D/g,""),e.length>7){var n=e.substr(4,2),i=e.substr(6,2);e=ee(e),e.getMonth()==n-1&&e.getDate()==i&&(t=!0)}}else;return t}function K(e){if(j(e)){var t=Object.keys(e),n={};return n[t[0]]=e[t[0]],n}return D(e)?e[0]:void console.error("ax5.util.object.first","argument type error")}function P(e){if(j(e)){var t=Object.keys(e),n={};return n[t[t.length-1]]=e[t[t.length-1]],n}return D(e)?e[e.length-1]:void console.error("ax5.util.object.last","argument type error")}function F(e,t,n,i){var a;return"number"==typeof n&&(a=new Date,a.setDate(a.getDate()+n)),i=i||{},o.cookie=[escape(e),"=",escape(t),a?"; expires="+a.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}function Y(e){for(var t=e+"=",n=o.cookie.split(";"),i=0,a=n.length;a>i;i++){for(var s=n[i];" "==s.charAt(0);)s=s.substring(1);if(-1!=s.indexOf(t))return unescape(s.substring(t.length,s.length))}return""}function H(t,i,a){for(var s,l,r=o.head||o.getElementsByTagName("head")[0],u=e.isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,c=t.length,d=[],h={},f=!1,p=n.get("script[src]"),m=(n.get("style[href]"),function(){1>c&&0==d.length&&!f&&(i&&i({}),f=!0)}),g=function(){1>c&&d.length>0&&!f&&(console.error(d),a&&a({type:"loadFail",list:d}),f=!0)},y=0,b=t.length;b>y;y++){for(var x,w,k,C=t[y],S=R(C,"."),$=!1,T=e.baseUrl+C,E="js"===S?"src":"href",j=p.length;j--;)if(p[j].getAttribute(E)===T){$=!0;break}$?(c--,m()):(x="js"===S?n.create("script",{type:"text/javascript",src:T,"data-src":T}):n.create("link",{rel:"stylesheet",type:"text/css",href:T}),w=function(e,t){e&&("load"===e.type||u.test((e.currentTarget||e.srcElement).readyState))&&(h[t]||c--,s&&clearTimeout(s),s=setTimeout(m,1))},k=function(t){c--,d.push({src:e.baseUrl+C,error:t}),l&&clearTimeout(l),l=setTimeout(g,1)},v.xhr({url:T,contentType:"",res:function(e,t){for(var i,a=!1,o=n.get("script[src]"),s=o.length;s--;)if(o[s].getAttribute(E)===T){a=!0;break}a||r.appendChild(x),x.onload=function(e){w(e,T),i&&clearTimeout(i)},i=setTimeout(function(){w({type:"load"},T)},500)},error:function(){k(this)}}))}}function U(e){return a.alert(C(e)),e}function L(e,t){return"undefined"==typeof e||"undefined"==typeof t?"":I(t)?e.indexOf(t)>-1?e.substr(0,e.indexOf(t)):e:N(t)?e.substr(0,t):""}function R(e,t){return"undefined"==typeof e||"undefined"==typeof t?"":(e=""+e,I(t)?e.lastIndexOf(t)>-1?e.substr(e.lastIndexOf(t)+1):e:N(t)?e.substr(e.length-t):"")}function W(e){return e.replace(l,"ms-").replace(r,function(e,t){return t.toUpperCase()})}function z(e){return W(e).replace(u,function(e,t){return"-"+t.toLowerCase()})}function B(e,n){var i,a=(""+e).split(c),o=Number(a[0])<0||"-0"==a[0],s=0;return a[0]=a[0].replace(d,""),a[1]?(a[1]=a[1].replace(h,""),s=Number(a[0]+"."+a[1])||0):s=Number(a[0])||0,i=o?-s:s,t(n,function(e,t){"round"==e&&(i=N(t)?0>t?+(Math.round(i+"e-"+Math.abs(t))+"e+"+Math.abs(t)):+(Math.round(i+"e+"+t)+"e-"+t):Math.round(i)),"floor"==e&&(i=Math.floor(i)),"ceil"==e?i=Math.ceil(i):"money"==e?i=function(e){var t=""+e;if(isNaN(t)||""==t)return"";var n=t.split(".");n[0]+=".";do n[0]=n[0].replace(f,"$1,$2");while(f.test(n[0]));return n.length>1?n.join(""):n[0].split(".")[0]}(i):"abs"==e?i=Math.abs(Number(i)):"byte"==e&&(i=function(e){e=Number(i);var t="KB",n=e/1024;return n/1024>1&&(t="MB",n/=1024),n/1024>1&&(t="GB",n/=1024),B(n,{round:1})+t}(i))}),i}function G(e){return"undefined"!=typeof e.length?Array.prototype.slice.call(e):[]}function V(e,t){var n=t.length,i=e.length,a=0;if("number"==typeof n)for(;n>a;a++)e[i++]=t[a];else for(;void 0!==t[a];)e[i++]=t[a++];return e.length=i,e}function J(e,n){var i;return I(e)&&"undefined"!=typeof n&&"param"==n?e:I(e)&&"undefined"!=typeof n&&"object"==n||I(e)&&"undefined"==typeof n?(i={},t(e.split(p),function(){var e=this.split(m);i[e[0]]?(I(i[e[0]])&&(i[e[0]]=[i[e[0]]]),i[e[0]].push(e[1])):i[e[0]]=e[1]}),i):(i=[],t(e,function(e,t){i.push(e+"="+escape(t))}),i.join("&"))}function X(){v.info.onerror.apply(this,arguments)}function Z(e,t,n,i,a,o){var s,l;return l=new Date,"undefined"==typeof i&&(i=23),"undefined"==typeof a&&(a=59),s=new Date(Date.UTC(e,t,n||1,i,a,o||0)),0==t&&1==n&&s.getUTCHours()+s.getTimezoneOffset()/60<0?s.setUTCHours(0):s.setUTCHours(s.getUTCHours()+s.getTimezoneOffset()/60),s}function ee(t,n){var i,a,o,s,l,r,u,c,d,h;if(I(t))if(0==t.length)t=new Date;else if(t.length>15)r=t.split(/ /g),d=r[0].split(/\D/g),i=d[0],a=parseFloat(d[1]),o=parseFloat(d[2]),c=r[1]||"09:00",u=c.substring(0,5).split(":"),s=parseFloat(u[0]),l=parseFloat(u[1]),("AM"===R(c,2)||"PM"===R(c,2))&&(s+=12),t=Z(i,a-1,o,s,l);else if(14==t.length)h=t.replace(/\D/g,""),t=Z(h.substr(0,4),h.substr(4,2)-1,B(h.substr(6,2)),B(h.substr(8,2)),B(h.substr(10,2)),B(h.substr(12,2)));else if(t.length>7)h=t.replace(/\D/g,""),t=Z(h.substr(0,4),h.substr(4,2)-1,B(h.substr(6,2)));else if(t.length>4)h=t.replace(/\D/g,""),t=Z(h.substr(0,4),h.substr(4,2)-1,1);else{if(t.length>2)return h=t.replace(/\D/g,""),Z(h.substr(0,4),h.substr(4,2)-1,1);t=new Date}return"undefined"==typeof n?t:(n.add&&(t=function(e,t){var n,i,a,o,s=864e5;return"undefined"!=typeof t.d?e.setTime(e.getTime()+t.d*s):"undefined"!=typeof t.m?(n=e.getFullYear(),i=e.getMonth(),a=e.getDate(),n+=parseInt(t.m/12),i+=t.m%12,o=ie(n,i),a>o&&(a=o),e=new Date(n,i,a,12)):"undefined"!=typeof t.y?e.setTime(e.getTime()+365*t.y*s):e.setTime(e.getTime()+t.y*s),e}(new Date(t),n.add)),n["return"]?function(){var i,a,o,s,l,r,u,c=n["return"];i=t.getUTCFullYear(),a=ae(t.getMonth()+1,2),o=ae(t.getDate(),2),s=ae(t.getHours(),2),l=ae(t.getMinutes(),2),r=ae(t.getSeconds(),2),u=t.getDay();var d=/[^y]*(yyyy)[^y]*/gi;d.exec(c);var h=RegExp.$1,f=/[^m]*(mm)[^m]*/gi;f.exec(c);var p=RegExp.$1,m=/[^d]*(dd)[^d]*/gi;m.exec(c);var g=RegExp.$1,v=/[^h]*(hh)[^h]*/gi;v.exec(c);var y=RegExp.$1,b=/[^m]*(mi)[^i]*/gi;b.exec(c);var x=RegExp.$1,w=/[^s]*(ss)[^s]*/gi;w.exec(c);var k=RegExp.$1,C=/[^d]*(dw)[^w]*/gi;C.exec(c);var S=RegExp.$1;return"yyyy"===h&&(c=c.replace(h,R(i,h.length))),"mm"===p&&(1==p.length&&(a=t.getMonth()+1),c=c.replace(p,a)),"dd"===g&&(1==g.length&&(o=t.getDate()),c=c.replace(g,o)),"hh"===y&&(c=c.replace(y,s)),"mi"===x&&(c=c.replace(x,l)),"ss"===k&&(c=c.replace(k,r)),"dw"==S&&(c=c.replace(S,e.weekNames[u].label)),c}():t)}function te(e,t){function n(e){return Math.floor(e.getTime()/s)*s}var i,a,o=ee(e),s=864e5,l=new Date;return"undefined"==typeof t?i=B((n(o)-n(l))/s,{floor:!0}):(i=B((n(o)-n(l))/s,{floor:!0}),t.today&&(l=ee(t.today),i=B((n(o)-n(l))/s,{floor:!0})),t.thisYear&&(a=new Date(l.getFullYear(),o.getMonth(),o.getDate()),i=B((n(a)-n(l))/s,{floor:!0}),0>i&&(a=new Date(l.getFullYear()+1,o.getMonth(),o.getDate()),i=B((n(a)-n(l))/s,{floor:!0}))),t.age&&(a=new Date(l.getFullYear(),o.getMonth(),o.getDate()),i=a.getFullYear()-o.getFullYear()),i)}function ne(e){var t=ee(e);return{year:t.getFullYear(),month:t.getMonth()+1,count:parseInt(t.getDate()/7+1)}}function ie(e,t){return 3==t||5==t||8==t||10==t?30:1==t?e%4==0&&e%100!=0||e%400==0?29:28:31}function ae(e,t,n,i){var a=e.toString(i||10);return oe(n||"0",t-a.length)+a}function oe(e,t){return 1>t?"":new Array(t+1).join(e)}function se(e,t){if(e)for(;function(){var n=!0;if("undefined"==typeof t)e=e.parentNode?e.parentNode:!1;else if(_(t))n=t(e);else if(j(t))for(var i in t)if("tagname"===i){if(e.tagName.toLocaleLowerCase()!=t[i]){n=!1;break}}else if("clazz"===i||"class_name"===i){if(!("className"in e)){n=!1;break}for(var a=e.className.split(g),o=!1,s=0;s<a.length;s++)if(a[s]==t[i]){o=!0;break}n=o}else{if(!e.getAttribute){n=!1;break}if(e.getAttribute(i)!=t[i]){n=!1;break}}return!n}();){if(!e.parentNode||!e.parentNode.parentNode){e=!1;break}e=e.parentNode}return e}function le(e){var t=/\D?(\d+)([a-zA-Z%]*)/i,n=(""+e).match(t),i=n[2]||"px";return n[1]+i}function re(e){var t;if(j(e)){t="";for(var n in e)t+=n+":"+e[n]+";";return t}if(I(e)){t={};var i=e.split(/[ ]*;[ ]*/g);return i.forEach(function(e){if(""!==(e=e.trim())){var n=e.split(/[ ]*:[ ]*/g);t[n[0]]=n[1]}}),t}}function ue(e){if(!e)var e=window.event;return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}var ce=Object.prototype.toString;return{alert:U,each:t,map:y,search:b,reduce:x,reduceRight:w,filter:k,toJson:C,parseJson:S,first:K,last:P,left:L,right:R,getType:$,isWindow:T,isElement:E,isObject:j,isArray:D,isFunction:_,isString:I,isNumber:N,isNodelist:M,isUndefined:Q,isNothing:O,setCookie:F,getCookie:Y,require:H,camelCase:W,snakeCase:z,number:B,toArray:G,merge:V,param:J,error:X,date:ee,dday:te,daysOfMonth:ie,weeksOfMonth:ne,setDigit:ae,times:oe,findParentNode:se,cssNumber:le,css:re,isDate:q,isDateFormat:A,stopEvent:ue}}(),i.ax5=function(){return v}()}).call(window),ax5.info.errorMsg.ax5dialog={501:"Duplicate call error"},ax5.info.errorMsg.ax5picker={401:"Can not find target element",402:"Can not find boundID",501:"Can not find content key"},ax5.info.errorMsg["single-uploader"]={460:"There are no files to be uploaded.",461:"There is no uploaded files."},ax5.info.errorMsg.ax5calendar={401:"Can not find target element"},ax5.info.errorMsg.ax5formatter={401:"Can not find target element",402:"Can not find boundID",501:"Can not find pattern"},ax5.info.errorMsg.ax5menu={501:"Can not find menu item"},ax5.info.errorMsg.ax5select={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},function(){var e=/^\s*|\s*$/g;Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a))&&("function"!=typeof a||null===a))throw new TypeError("type err");var o,s,l=[];for(o in a)e.call(a,o)&&l.push(o);if(t)for(s=0;i>s;s++)e.call(a,n[s])&&l.push(n[s]);return l}}()),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var i,a=arguments[1];for(i=0;n>i;i++)i in t&&e.call(a,t[i],i,t)}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw TypeError("function");var n=[].slice,i=n.call(arguments,1),a=this,o=function(){return a.apply(this instanceof t?this:e,i.concat(n.call(arguments)))};return t.prototype=a.prototype,o.prototype=new t,o}),function(){if(!document.querySelectorAll&&!document.querySelector&&document.createStyleSheet){var e=document.createStyleSheet(),t=function(t,n){var i,a=document.all,o=a.length,s=[];for(e.addRule(t,"foo:bar"),i=0;o>i&&!("bar"===a[i].currentStyle.foo&&(s.push(a[i]),s.length>n));i+=1);return e.removeRule(0),s};document.querySelectorAll=function(e){return t(e,1/0)},document.querySelector=function(e){return t(e,1)[0]||null}}}(),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(e,"")}}(),window.JSON||(window.JSON={parse:function(e){return new Function("","return "+e)()},stringify:function(){var e,t=/["]/g;return e=function(n){var i,a,o;switch(i="undefined"==typeof n?"undefined":_typeof(n)){case"string":return'"'+n.replace(t,'\\"')+'"';case"number":case"boolean":return n.toString();case"undefined":return"undefined";case"function":return'""';case"object":if(!n)return"null";if(i="",n.splice){for(a=0,o=n.length;o>a;a++)i+=","+e(n[a]);return"["+i.substr(1)+"]"}for(a in n)n.hasOwnProperty(a)&&void 0!==n[a]&&"function"!=typeof n[a]&&(i+=',"'+a+'":'+e(n[a]));return"{"+i.substr(1)+"}"}}}()}),function(){if(!document.documentMode||document.documentMode>=9)return!1;var e=Array.prototype.splice;Array.prototype.splice=function(){var t=Array.prototype.slice.call(arguments);return"undefined"==typeof t[1]&&(t[1]=this.length-t[0]),e.apply(this,t)}}(),function(){var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,n){if(n="undefined"!=typeof n?n:this.length,"[object Array]"===Object.prototype.toString.call(this))return e.call(this,t,n);var i,a,o=[],s=this.length,l=t||0;l=l>=0?l:Math.max(0,s+l);var r="number"==typeof n?Math.min(n,s):s;if(0>n&&(r=s+n),a=r-l,a>0)if(o=new Array(a),this.charAt)for(i=0;a>i;i++)o[i]=this.charAt(l+i);else for(i=0;a>i;i++)o[i]=this[l+i];return o}}}(),function(e){for(var t,n,i={},a=function(){},o="memory".split(","),s="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=o.pop();)e[t]=e[t]||i;for(;n=s.pop();)e[n]=e[n]||a}(window.console||{});var t=document.getElementsByTagName("html")[0];document.getElementsByTagName("body")[0];window.innerWidth||(window.innerWidth=t.clientWidth),window.innerHeight||(window.innerHeight=t.clientHeight),window.scrollX||(window.scrollX=window.pageXOffset||t.scrollLeft),window.scrollY||(window.scrollY=window.pageYOffset||t.scrollTop)}.call(window),ax5.ui=function(e){function t(){this.config={},this.name="root",this.setConfig=function(e,t){return jQuery.extend(!0,this.config,e,!0),("undefined"==typeof t||t===!0)&&this.init(),this},this.init=function(){console.log(this.config)},this.bindWindowResize=function(e){setTimeout(function(){jQuery(window).resize(function(){this.bindWindowResize__&&clearTimeout(this.bindWindowResize__),this.bindWindowResize__=setTimeout(function(){e.call(this)}.bind(this),10)}.bind(this))}.bind(this),100)},this.stopEvent=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1},this.main=function(){}.apply(this,arguments)}return{root:t}}(ax5),function(e,t){t(e.mustache={})}(window.ax5,function(e){function t(e){return"function"==typeof e}function n(e){return m(e)?"array":"undefined"==typeof e?"undefined":_typeof(e)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t in e}function o(e,t){return g.call(e,t)}function s(e){return!o(v,e)}function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return y[e]})}function r(t,n){function a(){if(v&&!y)for(;g.length;)delete p[g.pop()];else g=[];v=!1,y=!1}function o(e){if("string"==typeof e&&(e=e.split(x,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);l=new RegExp(i(e[0])+"\\s*"),r=new RegExp("\\s*"+i(e[1])),h=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var l,r,h,f=[],p=[],g=[],v=!1,y=!1;o(n||e.tags);for(var S,$,T,E,j,D,_=new d(t);!_.eos();){if(S=_.pos,T=_.scanUntil(l))for(var I=0,N=T.length;N>I;++I)E=T.charAt(I),s(E)?g.push(p.length):y=!0,p.push(["text",E,S,S+1]),S+=1,"\n"===E&&a();if(!_.scan(l))break;if(v=!0,$=_.scan(C)||"name",_.scan(b),"="===$?(T=_.scanUntil(w),_.scan(w),_.scanUntil(r)):"{"===$?(T=_.scanUntil(h),_.scan(k),_.scanUntil(r),$="&"):T=_.scanUntil(r),!_.scan(r))throw new Error("Unclosed tag at "+_.pos);if(j=[$,T,S,_.pos],p.push(j),"#"===$||"^"===$)f.push(j);else if("/"===$){if(D=f.pop(),!D)throw new Error('Unopened section "'+T+'" at '+S);if(D[1]!==T)throw new Error('Unclosed section "'+D[1]+'" at '+S)}else"name"===$||"{"===$||"&"===$?y=!0:"="===$&&o(T)}if(D=f.pop())throw new Error('Unclosed section "'+D[1]+'" at '+_.pos);return c(u(p))}function u(e){for(var t,n,i=[],a=0,o=e.length;o>a;++a)t=e[a],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function c(e){for(var t,n,i=[],a=i,o=[],s=0,l=e.length;l>s;++s)switch(t=e[s],t[0]){case"#":case"^":a.push(t),o.push(t),a=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],a=o.length>0?o[o.length-1][4]:i;break;default:a.push(t)}return i}function d(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view,"@each":function(){var e=[];for(var t in this)e.push({"@key":t,"@value":this[t]});return e}},this.parent=t}function f(){this.cache={}}var p=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===p.call(e)},g=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=/\s*/,x=/\s+/,w=/\s*=/,k=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},h.prototype.push=function(e){return new h(e,this)},h.prototype.lookup=function(e){var n,i=this.cache;if(i.hasOwnProperty(e))n=i[e];else{for(var o,s,l=this,r=!1;l;){if(e.indexOf(".")>0)for(n=l.view,o=e.split("."),s=0;null!=n&&s<o.length;)s===o.length-1&&(r=a(n,o[s])),n=n[o[s++]];else n=l.view[e],r=a(l.view,e);if(r)break;l=l.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=r(e,t)),i},f.prototype.render=function(e,t,n){var i=this.parse(e),a=t instanceof h?t:new h(t);return this.renderTokens(i,a,n,e)},f.prototype.renderTokens=function(e,t,n,i){for(var a,o,s,l="",r=0,u=e.length;u>r;++r)s=void 0,a=e[r],o=a[0],"#"===o?s=this.renderSection(a,t,n,i):"^"===o?s=this.renderInverted(a,t,n,i):">"===o?s=this.renderPartial(a,t,n,i):"&"===o?s=this.unescapedValue(a,t):"name"===o?s=this.escapedValue(a,t):"text"===o&&(s=this.rawValue(a)),void 0!==s&&(l+=s);return l},f.prototype.renderSection=function(e,n,i,a){function o(e){return s.render(e,n,i)}var s=this,l="",r=n.lookup(e[1]);if(r){if(m(r))for(var u=0,c=r.length;c>u;++u)r[u]["@i"]=u,r[u]["@first"]=0===u,l+=this.renderTokens(e[4],n.push(r[u]),i,a);else if("object"===("undefined"==typeof r?"undefined":_typeof(r))||"string"==typeof r||"number"==typeof r)l+=this.renderTokens(e[4],n.push(r),i,a);else if(t(r)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");r=r.call(n.view,a.slice(e[3],e[5]),o),null!=r&&(l+=r)}else l+=this.renderTokens(e[4],n,i,a);return l}},f.prototype.renderInverted=function(e,t,n,i){var a=t.lookup(e[1]);return!a||m(a)&&0===a.length?this.renderTokens(e[4],t,n,i):void 0},f.prototype.renderPartial=function(e,n,i){if(i){var a=t(i)?i(e[1]):i[e[1]];return null!=a?this.renderTokens(this.parse(a),n,i,a):void 0}},f.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},f.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);return null!=i?e.escape(i):void 0},f.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.3",e.tags=["{{","}}"];var S=new f;e.clearCache=function(){return S.clearCache()},e.parse=function(e,t){return S.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return S.render(e,t,i)},e.to_html=function(n,i,a,o){var s=e.render(n,i,a);return t(o)?void o(s):s},e.escape=l,e.Scanner=d,e.Context=h,e.Writer=f}),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.activeDialog=null,this.config={clickEventName:"click",theme:"default",width:300,title:"",msg:"",lang:{ok:"ok",cancel:"cancel"},animateTime:250},e=this.config,e.id="ax5-dialog-"+ax5.getGuid();var a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),t=null,!0},o=function(){return'\n                <div id="{{dialogId}}" data-ax5-ui="dialog" class="ax5-ui-dialog {{theme}}">\n                    <div class="ax-dialog-heading">\n                        {{{title}}}\n                    </div>\n                    <div class="ax-dialog-body">\n                        <div class="ax-dialog-msg">{{{msg}}}</div>\n                        \n                        {{#input}}\n                        <div class="ax-dialog-prompt">\n                            {{#@each}}\n                            <div class="form-group">\n                            {{#@value.label}}\n                            <label>{{#_crlf}}{{{.}}}{{/_crlf}}</label>\n                            {{/@value.label}}\n                            <input type="{{@value.type}}" placeholder="{{@value.placeholder}}" class="form-control {{@value.theme}}" data-dialog-prompt="{{@key}}" style="width:100%;" value="{{@value.value}}" />\n                            {{#@value.help}}\n                            <p class="help-block">{{#_crlf}}{{.}}{{/_crlf}}</p>\n                            {{/@value.help}}\n                            </div>\n                            {{/@each}}\n                        </div>\n                        {{/input}}\n                        \n                        <div class="ax-dialog-buttons">\n                            <div class="ax-button-wrap">\n                            {{#btns}}\n                                {{#@each}}\n                                <button type="button" data-dialog-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{@value.label}}</button>\n                                {{/@each}}\n                            {{/btns}}\n                            </div>\n                        </div>\n                    </div>\n                </div>  \n                '},s=function(t,n){var i={dialogId:t,title:n.title||e.title||"",msg:(n.msg||e.msg||"").replace(/\n/g,"<br/>"),input:n.input,btns:n.btns,_crlf:function(){return this.replace(/\n/g,"<br/>")}};try{return ax5.mustache.render(o(),i)}finally{i=null}},l=function(t,n){var i,o={};t.id=t.id||e.id,i={width:t.width},jQuery(document.body).append(s.call(this,t.id,t)),this.activeDialog=jQuery("#"+t.id),this.activeDialog.css({width:i.width}),t.height=i.height=this.activeDialog.height(),"undefined"==typeof t.position||"center"===t.position?(o.top=jQuery(window).height()/2-i.height/2,o.left=jQuery(window).width()/2-i.width/2):(o.left=t.position.left||0,o.top=t.position.top||0),this.activeDialog.css(o),"prompt"===t.dialogType?this.activeDialog.find("[data-dialog-prompt]").get(0).focus():this.activeDialog.find("[data-dialog-btn]").get(0).focus(),this.activeDialog.find("[data-dialog-btn]").on(e.clickEventName,function(e){u.call(this,e||window.event,t,n)}.bind(this)),jQuery(window).bind("keydown.ax5dialog",function(e){c.call(this,e||window.event,t,n)}.bind(this)),jQuery(window).bind("resize.ax5dialog",function(e){r.call(this,e||window.event)}.bind(this)),a.call(this,t,{self:this,state:"open"}),o=null,i=null},r=function(e){if(!this.activeDialog)return this;var t=i.dialogConfig,n={width:t.width,height:t.height};return"undefined"==typeof t.position||"center"===t.position?(n.top=window.innerHeight/2-n.height/2,n.left=window.innerWidth/2-n.width/2):(n.left=t.position.left||0,n.top=t.position.top||0),this.activeDialog.css(n),t=null,n=null,this},u=function(e,t,i,a,o){var s;if(e.srcElement&&(e.target=e.srcElement),a=n.findParentNode(e.target,function(e){return e.getAttribute("data-dialog-btn")?!0:void 0})){if(o=a.getAttribute("data-dialog-btn"),s={self:this,key:o,value:t.btns[o],dialogId:t.id,btnTarget:a},"prompt"===t.dialogType){var l=null;for(var r in t.input)if(s[r]=this.activeDialog.find("[data-dialog-prompt="+r+"]").val(),""==s[r]||null==s[r]){l=r;break}}if(t.btns[o].onClick)t.btns[o].onClick.call(s,o);else if("alert"===t.dialogType)i&&i.call(s,o),this.close();else if("confirm"===t.dialogType)i&&i.call(s,o),this.close();else if("prompt"===t.dialogType){if("ok"===o&&l)return this.activeDialog.find('[data-dialog-prompt="'+l+'"]').get(0).focus(),!1;i&&i.call(s,o),this.close()}}s=null,t=null,i=null,a=null,o=null},c=function(e,t,n,i,a){var o,s=null;if(e.keyCode==ax5.info.eventKeys.ESC&&this.close(),"prompt"===t.dialogType&&e.keyCode==ax5.info.eventKeys.RETURN){o={self:this,key:a,value:t.btns[a],dialogId:t.id,btnTarget:i};for(var l in t.input)if(o[l]=this.activeDialog.find("[data-dialog-prompt="+l+"]").val(),""==o[l]||null==o[l]){s=l;break}if(s)return o=null,s=null,!1;n&&n.call(o,a),this.close()}o=null,s=null,t=null,n=null,i=null,a=null};this.init=function(){this.onStateChanged=e.onStateChanged},this.alert=function(t,a){return n.isString(t)&&(t={title:e.title,msg:t}),this.activeDialog?(console.log(ax5.info.getError("ax5dialog","501","alert")),this):(i.dialogConfig={},jQuery.extend(!0,i.dialogConfig,e,t),t=i.dialogConfig,t.dialogType="alert","undefined"==typeof t.btns&&(t.btns={ok:{label:e.lang.ok,theme:t.theme}}),l.call(this,t,a),t=null,a=null,this)},this.confirm=function(t,a){return n.isString(t)&&(t={title:e.title,msg:t}),this.activeDialog?(console.log(ax5.info.getError("ax5dialog","501","confirm")),this):(i.dialogConfig={},jQuery.extend(!0,i.dialogConfig,e,t),t=i.dialogConfig,t.dialogType="confirm",t.theme=t.theme||e.theme||"","undefined"==typeof t.btns&&(t.btns={ok:{label:e.lang.ok,theme:t.theme},cancel:{label:e.lang.cancel}}),l.call(this,t,a),t=null,a=null,this)},this.prompt=function(t,a){return n.isString(t)&&(t={title:e.title,msg:t}),this.activeDialog?(console.log(ax5.info.getError("ax5dialog","501","prompt")),this):(i.dialogConfig={},jQuery.extend(!0,i.dialogConfig,e,t),t=i.dialogConfig,t.dialogType="prompt",t.theme=t.theme||e.theme||"","undefined"==typeof t.input&&(t.input={value:{label:""}}),"undefined"==typeof t.btns&&(t.btns={ok:{label:e.lang.ok,theme:t.theme},cancel:{label:e.lang.cancel}}),l.call(this,t,a),t=null,a=null,this)},this.close=function(t,n){return this.activeDialog&&(t=i.dialogConfig,this.activeDialog.addClass("destroy"),jQuery(window).unbind("keydown.ax5dialog"),jQuery(window).unbind("resize.ax5dialog"),setTimeout(function(){this.activeDialog.remove(),this.activeDialog=null,n={self:this,state:"close"},t&&t.onStateChanged?t.onStateChanged.call(n,n):this.onStateChanged&&this.onStateChanged.call(n,n),t=null,n=null}.bind(this),e.animateTime)),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.dialog=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.maskContent="",this.status="off",this.config={theme:"",target:jQuery(document.body).get(0)},e=this.config;var a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),e=null,t=null,!0},o=function(){return'\n                <div class="ax-mask {{theme}}" id="{{maskId}}">\n                    <div class="ax-mask-bg"></div>\n                    <div class="ax-mask-content">\n                        <div class="ax-mask-body">\n                        {{{body}}}\n                        </div>\n                    </div>\n                </div>\n                ';
},s=function(e){this.maskContent=e};this.init=function(){this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,this.config.content&&s.call(this,this.config.content)},this.open=function(e){"on"===this.status&&this.close(),e&&e.content&&s.call(this,e.content),i.maskConfig={},jQuery.extend(!0,i.maskConfig,this.config,e);var t,n=i.maskConfig,l=n.target,r=jQuery(l),u="ax-mask-"+ax5.getGuid(),c={},d={},h=o(),f=ax5.mustache.render(h,{theme:n.theme,maskId:u,body:this.maskContent});return jQuery(document.body).append(f),l&&l!==jQuery(document.body).get(0)&&(c={position:n.position||"absolute",left:r.offset().left,top:r.offset().top,width:r.outerWidth(),height:r.outerHeight()},"undefined"!=typeof i.maskConfig.zIndex&&(c["z-index"]=i.maskConfig.zIndex),r.addClass("ax-masking")),this.$mask=t=jQuery("#"+u),this.$target=r,this.status="on",t.css(c),this.onClick&&t.click(function(){d={self:this,state:"open",type:"click"},this.onClick.call(d,d)}),a.call(this,null,{self:this,state:"open"}),e=null,n=null,l=null,r=null,u=null,t=null,c=null,d=null,h=null,f=null,this},this.close=function(){return this.$mask&&(this.$mask.remove(),this.$target.removeClass("ax-masking"),a.call(this,null,{self:this,state:"close"})),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.mask=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){var e,i=this,a=0,o=null;t&&t.call(this),this.toastContainer=null,this.queue=[],this.config={clickEventName:"click",theme:"default",width:300,icon:"",closeIcon:"",msg:"",lang:{ok:"ok",cancel:"cancel"},displayTime:3e3,animateTime:250,containerPosition:"bottom-left"},e=this.config;var s=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),e=null,t=null,!0},l=function(){return'\n                <div id="{{toastId}}" data-ax5-ui="toast" class="ax5-ui-toast {{theme}}">\n                    {{#icon}}\n                    <div class="ax-toast-icon">{{{.}}}</div>\n                    {{/icon}}\n                    <div class="ax-toast-body">{{{msg}}}</div>\n                    {{#btns}}\n                    <div class="ax-toast-buttons">\n                        <div class="ax-button-wrap">\n                        {{#@each}}\n                        <button type="button" data-ax-toast-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{{@value.label}}}</button>\n                        {{/@each}}\n                        </div>\n                    </div>\n                    {{/btns}}\n                    {{^btns}}\n                    <a class="ax-toast-close" data-ax-toast-btn="ok">{{{closeIcon}}}</a>\n                    {{/btns}}\n                    <div style="clear:both;"></div>\n                </div>\n                '},r=function(e,t){var n={toastId:e,theme:t.theme,icon:t.icon,msg:(t.msg||"").replace(/\n/g,"<br/>"),btns:t.btns,closeIcon:t.closeIcon};try{return ax5.mustache.render(l(),n)}finally{e=null,n=null}},u=function(t,l){o&&clearTimeout(o);var u,d={width:t.width};return t.id="ax5-toast-"+i.containerId+"-"+ ++a,jQuery("#"+t.id).get(0)?this:("bottom"==n.left(e.containerPosition,"-")?this.toastContainer.append(r(t.id,t)):this.toastContainer.prepend(r(t.id,t)),u=jQuery("#"+t.id),u.css({width:d.width}),t.toastBox=u,this.queue.push(t),s.call(this,t,{self:this,state:"open",toastId:t.id}),"push"===t.toastType?(setTimeout(function(){this.close(t,l)}.bind(this),e.displayTime),u.find("[data-ax-toast-btn]").on(e.clickEventName,function(e){c.call(this,e||window.event,t,u,l)}.bind(this))):"confirm"===t.toastType&&u.find("[data-ax-toast-btn]").on(e.clickEventName,function(e){c.call(this,e||window.event,t,u,l)}.bind(this)),void(d=null))},c=function(e,t,i,a,o,s){if(o=n.findParentNode(e.target,function(e){return e.getAttribute("data-ax-toast-btn")?!0:void 0})){s=o.getAttribute("data-ax-toast-btn");var l={key:s,value:t.btns?t.btns[s]:s,toastId:t.id,btn_target:o};t.btns&&t.btns[s].onClick?t.btns[s].onClick.call(l,s):"push"===t.toastType?(a&&a.call(l,s),this.close(t,i)):"confirm"===t.toastType&&(a&&a.call(l,s),this.close(t,i))}e=null,t=null,i=null,a=null,o=null,s=null};this.init=function(){this.onStateChanged=e.onStateChanged,i.containerId=ax5.getGuid();var t=[];e.zIndex&&t.push("z-index:"+e.zIndex),jQuery(document.body).append('<div class="ax5-ui-toast-container '+e.containerPosition+'" data-toast-container="'+i.containerId+'" style="'+t.join(";")+'"></div>'),this.toastContainer=jQuery('[data-toast-container="'+i.containerId+'"]')},this.push=function(t,a){return i.containerId||this.init(),n.isString(t)&&(t={title:e.title,msg:t}),t.toastType="push",i.dialogConfig={},jQuery.extend(!0,i.dialogConfig,e,t),t=i.dialogConfig,u.call(this,t,a),t=null,a=null,this},this.confirm=function(t,a){return i.containerId||this.init(),n.isString(t)&&(t={title:e.title,msg:t}),t.toastType="confirm",i.dialogConfig={},jQuery.extend(!0,i.dialogConfig,e,t),t=i.dialogConfig,"undefined"==typeof t.btns&&(t.btns={ok:{label:e.lang.ok,theme:t.theme}}),u.call(this,t,a),t=null,a=null,this},this.close=function(t,i){"undefined"==typeof t&&(t=n.last(this.queue));var l=t.toastBox;return l.addClass("push"==t.toastType?"removed":"destroy"),this.queue=n.filter(this.queue,function(){return t.id!=this.id}),setTimeout(function(){var e={toastId:t.id};l.remove(),i&&i.call(e),e={self:this,state:"close",toastId:t.id},s.call(this,t,e),0===this.queue.length&&(o&&clearTimeout(o),o=setTimeout(function(){0===this.queue.length&&(a=0)}.bind(this),3e3)),e=null,t=null,i=null,l=null}.bind(this),e.animateTime),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.toast=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.activeModal=null,this.$={},this.config={position:{left:"center",top:"middle",margin:10},clickEventName:"click",theme:"default",width:300,height:400,closeToEsc:!0,animateTime:250},e=this.config,e.id="ax5-modal-"+ax5.getGuid();var a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),!0},o=function(){return'\n                <div id="{{modalId}}" data-modal-els="root" class="ax5-ui-modal {{theme}} {{fullscreen}}" style="{{styles}}">\n                    <div class="ax-modal-body" data-modal-els="body">\n                    {{#iframe}}\n                        <div data-modal-els="iframe-wrap" style="-webkit-overflow-scrolling: touch; overflow: auto;position: relative;">\n                        <iframe name="{{modalId}}-frame" src="" width="100%" height="100%" frameborder="0" data-modal-els="iframe" style="position: absolute;left:0;top:0;"></iframe>\n                        </div>\n                        <form name="{{modalId}}-form" data-modal-els="iframe-form">\n                        <input type="hidden" name="modalId" value="{{modalId}}" />\n                        {{#param}}\n                        {{#@each}}\n                        <input type="hidden" name="{{@key}}" value="{{@value}}" />\n                        {{/@each}}\n                        {{/param}}\n                        </form>\n                    {{/iframe}}\n                    </div>\n                </div>\n                '},s=function(e,t){var n={modalId:e,theme:t.theme,fullScreen:t.fullScreen?"fullscreen":"",styles:[],iframe:t.iframe};return t.zIndex&&n.styles.push("z-index:"+t.zIndex),n.iframe&&"string"==typeof n.iframe.param&&(n.iframe.param=ax5.util.param(n.iframe.param)),ax5.mustache.render(o(),n)},l=function(e,t){var n;jQuery(document.body).append(s.call(this,e.id,e)),this.activeModal=jQuery("#"+e.id),this.$={root:this.activeModal.find('[data-modal-els="root"]'),body:this.activeModal.find('[data-modal-els="body"]')},e.iframe&&(this.$["iframe-wrap"]=this.activeModal.find('[data-modal-els="iframe-wrap"]'),this.$.iframe=this.activeModal.find('[data-modal-els="iframe"]'),this.$["iframe-form"]=this.activeModal.find('[data-modal-els="iframe-form"]')),r.call(this),n={self:this,id:e.id,theme:e.theme,width:e.width,height:e.height,state:"open",$:this.$},e.iframe&&(this.$["iframe-wrap"].css({height:e.height}),this.$.iframe.css({height:e.height}),this.$["iframe-form"].attr({method:e.iframe.method}),this.$["iframe-form"].attr({target:e.id+"-frame"}),this.$["iframe-form"].attr({action:e.iframe.url}),this.$.iframe.on("load",function(){n.state="load",a.call(this,e,n)}.bind(this)),this.$["iframe-form"].submit()),t&&t.call(n),a.call(this,e,n),e.closeToEsc&&jQuery(window).bind("keydown.ax-modal",function(e){u.call(this,e||window.event)}.bind(this)),jQuery(window).bind("resize.ax-modal",function(e){r.call(this,null,e||window.event)}.bind(this))},r=function(e,t){if(!this.activeModal)return this;var n=i.modalConfig,a={width:n.width,height:n.height};return n.fullScreen?(a.width=jQuery(window).width(),a.height=jQuery(window).height(),a.left=0,a.top=0,n.iframe&&(this.$["iframe-wrap"].css({height:a.height}),this.$.iframe.css({height:a.height}))):(e&&jQuery.extend(!0,n.position,e),"left"==n.position.left?a.left=n.position.margin||0:"right"==n.position.left?a.left=jQuery(window).width()-a.width-(n.position.margin||0):"center"==n.position.left?a.left=jQuery(window).width()/2-a.width/2:a.left=n.position.left||0,"top"==n.position.top?a.top=n.position.margin||0:"bottom"==n.position.top?a.top=jQuery(window).height()-a.height-(n.position.margin||0):"middle"==n.position.top?a.top=jQuery(window).height()/2-a.height/2:a.top=n.position.top||0),this.activeModal.css(a),this},u=function(e){e.keyCode==ax5.info.eventKeys.ESC&&this.close()};this.init=function(){this.onStateChanged=e.onStateChanged},this.open=function(t,a){return n.isString(t)&&(t={title:e.title,msg:t}),i.modalConfig={},jQuery.extend(!0,i.modalConfig,e),jQuery.extend(!0,i.modalConfig,t),t=i.modalConfig,l.call(this,t,a),this},this.close=function(t,n){return this.activeModal&&(t=i.modalConfig,this.activeModal.addClass("destroy"),jQuery(window).unbind("keydown.ax-modal"),jQuery(window).unbind("resize.ax-modal"),setTimeout(function(){this.activeModal.remove(),this.activeModal=null,n={self:this,state:"close"},a.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime)),this},this.css=function(e){return this.activeModal&&!i.fullScreen&&(this.activeModal.css(e),e.width&&(i.modalConfig.width=this.activeModal.width()),e.height&&(i.modalConfig.height=this.activeModal.height(),this.$.iframe&&(this.$["iframe-wrap"].css({height:i.modalConfig.height}),this.$.iframe.css({height:i.modalConfig.height})))),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.modal=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){t&&t.call(this);var e,i=this,a=1;this.target=null,this.selection=[],this.selectionMap={},this.selectableMap={},this.markerMap={},this.printedDay={start:"",end:""},this.config={clickEventName:"click",theme:"default",mode:"day",dateFormat:"yyyy-mm-dd",displayDate:new Date,animateTime:250,dimensions:{controlHeight:"40",controlButtonWidth:"40",colHeadHeight:"30",itemPadding:2},lang:{yearHeading:"Choose the year",monthHeading:"Choose the month",yearTmpl:"%s",months:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],dayTmpl:"%s"},multipleSelect:!1,selectMode:"day",defaultMarkerTheme:"holiday"},e=this.config;var o=function(e,t){e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),t=null},s=function(){return'\n                <div class="ax5-ui-calendar {{theme}}" data-calendar-els="root" onselectstart="return false;">\n                    {{#control}}\n                    <div class="calendar-control" data-calendar-els="control" style="{{controlCSS}}">\n                        <a class="date-move-left" data-calendar-move="left" style="{{controlButtonCSS}}">{{{left}}}</a>\n                        <div class="date-display" data-calendar-els="control-display" style="{{controlCSS}}"></div>\n                        <a class="date-move-right" data-calendar-move="right" style="{{controlButtonCSS}}">{{{right}}}</a>\n                    </div>\n                    {{/control}}\n                    <div class="calendar-body" data-calendar-els="body"></div>\n                </div>\n                '},l=function(){var t=jQuery.extend(!0,{},e,{controlCSS:{},controlButtonCSS:{}}),i=s();t.controlButtonCSS.height=t.controlCSS.height=n.cssNumber(e.dimensions.controlHeight),t.controlButtonCSS["line-height"]=t.controlCSS["line-height"]=n.cssNumber(e.dimensions.controlHeight),t.controlButtonCSS.width=n.cssNumber(e.dimensions.controlHeight),t.controlCSS=n.css(t.controlCSS),t.controlButtonCSS=n.css(t.controlButtonCSS);try{return ax5.mustache.render(i,t)}finally{t=null,i=null}},r=function(){return'\n                <table data-calendar-table="day" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                        {{#weekNames}}\n                            <td class="calendar-col-{{@i}}" style="height: {{colHeadHeight}}">\n                            {{label}}\n                            </td>\n                        {{/weekNames}}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfWeek}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfWeek}}\n                            <td class="calendar-col-{{@i}}" style="{{itemStyles}}">\n                                <a class="calendar-item-day {{addClass}}" data-calendar-item-date="{{thisDate}}">\n                                    <span class="addon"></span>\n                                    {{thisDataLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},u=function(){return'\n                <table data-calendar-table="month" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="3" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{@i}}" style="{{itemStyles}}">\n                                <a class="calendar-item-month {{addClass}}" data-calendar-item-month="{{thisMonth}}">\n                                    <span class="addon"></span>\n                                    {{thisMonthLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},c=function(){return'\n                <table data-calendar-table="year" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="4" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{@i}}" style="{{itemStyles}}">\n                                <a class="calendar-item-year {{addClass}}" data-calendar-item-year="{{thisYear}}">\n                                    <span class="addon"></span>\n                                    {{thisYearLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},d=function(){var t,i,a=n.date(e.displayDate),o="",s="";return e.control&&("day"==e.mode||"d"==e.mode?(o=e.control.yearTmpl?e.control.yearTmpl.replace("%s",a.getFullYear()):a.getFullYear(),s=e.control.monthTmpl?e.control.monthTmpl.replace("%s",e.lang.months[a.getMonth()]):e.lang.months[a.getMonth()],this.$["control-display"].html(function(){return e.control.yearFirst?'<span data-calendar-display="year">'+o+'</span><span data-calendar-display="month">'+s+"</span>":'<span data-calendar-display="month">'+s+'</span><span data-calendar-display="year">'+o+"</span>"}())):"month"==e.mode||"m"==e.mode?(o=e.control.yearTmpl?e.control.yearTmpl.replace("%s",a.getFullYear()):a.getFullYear(),this.$["control-display"].html('<span data-calendar-display="year">'+o+"</span>")):("year"==e.mode||"y"==e.mode)&&(t=e.control.yearTmpl?e.control.yearTmpl.replace("%s",a.getFullYear()-10):a.getFullYear()-10,i=e.control.yearTmpl?e.control.yearTmpl.replace("%s",Number(a.getFullYear())+9):Number(a.getFullYear())+9,this.$["control-display"].html(t+" ~ "+i)),this.$["control-display"].find("[data-calendar-display]").on(e.clickEventName,function(e){var t,i=n.findParentNode(e.target,function(e){return e.getAttribute("data-calendar-display")?!0:void 0});i&&(t=i.getAttribute("data-calendar-display"),this.changeMode(t)),i=null,t=null}.bind(this))),a=null,o=null,s=null,t=null,i=null,this},h=function(t){var a,s,l,u,c=n.date(t),h=new Date(c.getFullYear(),c.getMonth(),1,12),f=e.displayDate,p=function(){var e=h.getDay();0==e&&(e=7);try{return n.date(h,{add:{d:-e}})}finally{e=null}}(),g=c.getMonth(),v={},y=this.$.body.width(),b=Math.floor(y*(6/7)),x=r();for(e.dimensions.height&&(b=n.number(e.dimensions.height)-n.number(e.dimensions.colHeadHeight)),v.height=Math.floor(b/6)-2*n.number(e.dimensions.itemPadding)+"px",v["line-height"]=v.height,v.padding=n.cssNumber(e.dimensions.itemPadding),u={weekNames:[].concat(ax5.info.weekNames),list:[]},u.weekNames.forEach(function(t){t.colHeadHeight=n.cssNumber(e.dimensions.colHeadHeight)}),a=p,s=0;6>s;){for(l=0;7>l;){var w=""+n.date(a,{"return":e.dateFormat}),k={isStartOfWeek:0==l,thisDate:""+w,thisDataLabel:e.lang.dayTmpl.replace("%s",a.getDate()),itemStyles:n.css(v),addClass:function(){return e.selectable?i.selectableMap[w]?a.getMonth()==g?"live":"":"disable":a.getMonth()==g?w==n.date(f,{"return":"yyyymmdd"})?"focus":"live":""}()+" "+function(){return i.markerMap[w]?i.markerMap[w].theme||e.defaultMarkerTheme:""}()+" "+function(){return i.selectionMap[w]?"selected-day":""}()};u.list.push(k),l++,a=n.date(a,{add:{d:1}}),w=null,k=null}s++}this.$.body.html(ax5.mustache.render(x,u)),this.$.body.find("[data-calendar-item-date]").on(e.clickEventName,function(e){e=e||window.event,m.call(i,e,"date"),n.stopEvent(e)}),this.printedDay={start:p,end:a},o.call(this,null,{self:this,action:"printDay",printedDay:this.printedDay}),d.call(this),c=null,h=null,f=null,p=null,a=null,g=null,v=null,s=null,l=null,y=null,b=null,u=null,x=null},f=function(t){var a,s,l,r,c,h=n.date(t),f=h.getMonth(),p={},g=this.$.body.width(),v=Math.floor(g*(6/7)),y=u();for(e.dimensions.height&&(v=n.number(e.dimensions.height)-n.number(e.dimensions.colHeadHeight)),p.height=Math.floor(v/4)-2*n.number(e.dimensions.itemPadding)+"px",p["line-height"]=p.height,p.padding=n.cssNumber(e.dimensions.itemPadding),c={colHeadHeight:n.cssNumber(e.dimensions.colHeadHeight),colHeadLabel:e.lang.monthHeading,list:[]},r=0,l=0,a=0;4>a;){for(s=0;3>s;){var b={row:a,col:s,isStartOfRow:0==s,thisMonth:h.getFullYear()+"-"+n.setDigit(l+1,2)+"-"+n.setDigit(h.getDate(),2),thisMonthLabel:e.lang.months[l],itemStyles:n.css(p),addClass:function(){return e.selectable?i.selectableMap[l]?"live":"disable":"live"}()+" "+function(){return l==f?"focus":""}()+" "+function(){return i.markerMap[l]?i.markerMap[l].theme||e.defaultMarkerTheme:""}()};c.list.push(b),l++,s++,b=null}a++}this.$.body.html(ax5.mustache.render(y,c)),this.$.body.find("[data-calendar-item-month]").on(e.clickEventName,function(e){e=e||window.event,m.call(i,e,"month"),n.stopEvent(e)}),this.printedDay={start:h.getFullYear()+"-"+n.setDigit(r+1,2),end:h.getFullYear()+"-"+n.setDigit(l,2)},o.call(this,null,{self:this,action:"printMonth",printedDay:this.printedDay}),d.call(this),h=null,f=null,p=null,a=null,s=null,l=null,r=null,g=null,v=null,c=null,y=null},p=function(t){var a,s,l,r,u,h=n.date(t),f=h.getFullYear(),p={},g=this.$.body.width(),v=Math.floor(g*(6/7)),y=c();for(e.dimensions.height&&(v=n.number(e.dimensions.height)-n.number(e.dimensions.colHeadHeight)),p.height=Math.floor(v/5)-2*n.number(e.dimensions.itemPadding)+"px",p["line-height"]=p.height,p.padding=n.cssNumber(e.dimensions.itemPadding),u={colHeadHeight:n.cssNumber(e.dimensions.colHeadHeight),colHeadLabel:e.lang.yearHeading,list:[]},r=f-10,l=f-10,a=0;5>a;){for(s=0;4>s;){var b={row:a,col:s,isStartOfRow:0==s,thisYear:l+"-"+n.setDigit(h.getMonth()+1,2)+"-"+n.setDigit(h.getDate(),2),thisYearLabel:e.lang.yearTmpl.replace("%s",l),itemStyles:n.css(p),addClass:function(){return e.selectable?i.selectableMap[l]?"live":"disable":"live"}()+" "+function(){return l==f?"focus":""}()+" "+function(){return i.selectableMap[l]?i.selectableMap[l].theme||e.defaultMarkerTheme:""}()};u.list.push(b),l++,s++,b=null}a++}this.$.body.html(ax5.mustache.render(y,u)),this.$.body.find("[data-calendar-item-year]").on(e.clickEventName,function(e){e=e||window.event,m.call(this,e,"year"),n.stopEvent(e)}),this.printedDay={start:r,end:l-1},o.call(this,null,{self:this,action:"printYear",printedDay:this.printedDay}),d.call(this),h=null,f=null,p=null,a=null,s=null,l=null,r=null,g=null,v=null,u=null,y=null},m=function(t,o,s,l){var r,u,c;o=o||"date",s=n.findParentNode(t.target,function(e){return e.getAttribute("data-calendar-item-"+o)?!0:void 0}),s&&(l=s.getAttribute("data-calendar-item-"+o),u=n.date(l,{"return":e.dateFormat}),c=!0,a=e.multipleSelect?n.isNumber(e.multipleSelect)?e.multipleSelect:2:1,e.selectable&&(i.selectableMap[u]||(c=!1)),"date"==o?c&&(i.selection.length>=a&&(r=i.selection.splice(0,i.selection.length-(a-1)),r.forEach(function(t){i.$.body.find('[data-calendar-item-date="'+n.date(t,{"return":e.dateFormat})+'"]').removeClass("selected-day")})),jQuery(s).addClass("selected-day"),i.selection.push(l),i.onClick&&i.onClick.call({self:this,date:l,target:this.target,dateElement:s})):"month"==o?"month"==e.selectMode?c&&(i.selection.length>=a&&(r=i.selection.splice(0,i.selection.length-(a-1)),r.forEach(function(e){i.$.body.find('[data-calendar-item-month="'+n.date(e,{"return":"yyyy-mm-dd"})+'"]').removeClass("selected-month")})),jQuery(s).addClass("selected-month"),i.selection.push(l),i.onClick&&i.onClick.call({self:this,date:l,target:this.target,dateElement:s})):i.changeMode("day",l):"year"==o&&("year"==e.selectMode?c&&(i.selection.length>=a&&(r=i.selection.splice(0,i.selection.length-(a-1)),r.forEach(function(e){i.$.body.find('[data-calendar-item-year="'+n.date(e,{"return":"yyyy-mm-dd"})+'"]').removeClass("selected-year")})),jQuery(s).addClass("selected-year"),i.selection.push(l),i.onClick&&i.onClick.call({self:this,date:l,target:this.target,dateElement:s})):i.changeMode("month",l))),o=null,s=null,l=null,r=null,u=null,c=null},g=function(t,i,a){i=n.findParentNode(t.target,function(e){return e.getAttribute("data-calendar-move")?!0:void 0}),i&&(a=i.getAttribute("data-calendar-move"),"day"==e.mode?("left"==a?e.displayDate=n.date(e.displayDate,{add:{m:-1}}):e.displayDate=n.date(e.displayDate,{add:{m:1}}),h.call(this,e.displayDate)):"month"==e.mode?("left"==a?e.displayDate=n.date(e.displayDate,{add:{y:-1}}):e.displayDate=n.date(e.displayDate,{add:{y:1}}),f.call(this,e.displayDate)):"year"==e.mode&&("left"==a?e.displayDate=n.date(e.displayDate,{add:{y:-10}}):e.displayDate=n.date(e.displayDate,{add:{y:10}}),p.call(this,e.displayDate))),i=null,a=null},v=function(){setTimeout(function(){if("day"===e.mode||"d"===e.mode)for(var t in this.markerMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.markerMap[t].theme||e.defaultMarkerTheme)}.bind(this))},y=function(){setTimeout(function(){for(var e in this.selectionMap)this.$.body.find('[data-calendar-item-date="'+e+'"]').addClass("selected-day")}.bind(this))};this.init=function(){this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,e.target||console.log(ax5.info.getError("ax5calendar","401","setConfig")),this.target=jQuery(e.target),e.displayDate=n.date(e.displayDate),this.target.html(l.call(this)),this.$={root:this.target.find('[data-calendar-els="root"]'),control:this.target.find('[data-calendar-els="control"]'),"control-display":this.target.find('[data-calendar-els="control-display"]'),body:this.target.find('[data-calendar-els="body"]')},e.control&&this.$.control.find("[data-calendar-move]").on(e.clickEventName,function(e){g.call(this,e||window.event)}.bind(this)),e.selection&&this.setSelection(e.selection,!1),e.selectable&&this.setSelectable(e.selectable,!1),e.marker&&this.setMarker(e.marker,!1),setTimeout(function(){"day"===e.mode||"d"===e.mode?h.call(this,e.displayDate):"month"===e.mode||"m"===e.mode?f.call(this,e.displayDate):("year"===e.mode||"y"===e.mode)&&p.call(this,e.displayDate)}.bind(this))},this.changeMode=function(t,n){return"undefined"!=typeof n&&(e.displayDate=n),t&&(e.mode=t),this.$.body.removeClass("fadein").addClass("fadeout"),setTimeout(function(){"day"==e.mode||"d"==e.mode?h.call(this,e.displayDate):"month"==e.mode||"m"==e.mode?f.call(this,e.displayDate):("year"==e.mode||"y"==e.mode)&&p.call(this,e.displayDate),this.$.body.removeClass("fadeout").addClass("fadein")}.bind(this),e.animateTime),this},this.setSelection=function(){i.selectionMap={};var t={arr:function(t,a,o){return a={},n.isArray(t)?(i.selection=t=t.splice(0,o),t.forEach(function(t){n.isDate(t)&&(t=n.date(t,{"return":e.dateFormat})),a[t]=!0}),a):a}};return function(i,o){var s={};if(a=e.multipleSelect?n.isNumber(e.multipleSelect)?e.multipleSelect:2:1,e.selection=i){if(!n.isArray(i))return this;s=t.arr(i,{},a)}return this.selectionMap=jQuery.extend({},s),o!==!1&&y.call(this),s=null,this}}(),this.getSelection=function(){return this.selection},this.setSelectable=function(){i.selectableMap={};var t={arr:function(t,i){return i={},n.isArray(t)?(t.forEach(function(t){n.isDate(t)&&(t=n.date(t,{"return":e.dateFormat})),i[t]=!0}),i):i},obj:function(e,t){if(t={},n.isArray(e))return t;if(e.range)return t;for(var i in e)t[i]=e[i];return t},range:function(t,i){return i={},n.isArray(t)?i:t.range?(t.range.forEach(function(t){if(n.isDateFormat(t.from)&&n.isDateFormat(t.to))for(var a=n.date(t.from);a<=n.date(t.to);a.setDate(a.getDate()+1))i[n.date(a,{"return":e.dateFormat})]=!0;else for(var o=t.from;o<=t.to;o++)i[o]=!0}),i):i}};return function(i,a){var o,s={};if(e.selectable=i)if(n.isArray(i))s=t.arr(i);else{for(o in t)if(i[o]){s=t[o](i);break}0===Object.keys(s).length&&(s=t.obj(i))}return this.selectableMap=s,a!==!1&&this.changeMode(),this}}(),this.setMarker=function(){i.markerMap={};var t={obj:function(e,t){if(t={},n.isArray(e))return t;if(e.range)return t;for(var i in e)t[i]=e[i];return e=null,t},range:function(t,i){return i={},n.isArray(t)?i:t.range?(t.range.forEach(function(t){if(n.isDateFormat(t.from)&&n.isDateFormat(t.to))for(var a=n.date(t.from);a<=n.date(t.to);a.setDate(a.getDate()+1))i[n.date(a,{"return":e.dateFormat})]={theme:t.theme,label:t.label};else for(var o=t.from;o<=t.to;o++)i[o]={theme:t.theme,label:t.label}}),t=null,i):i}};return function(n,i){var a,o={};if(e.marker=n){for(a in t)if(n[a]){o=t[a](n);break}0===Object.keys(o).length&&(o=t.obj(n))}return this.markerMap=o,i!==!1&&v.call(this),this}}(),this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.calendar=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:250},this.activePicker=null,this.activePickerQueueIndex=-1,this.openTimer=null,this.closeTimer=null,e=this.config;var a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),!0},o=function(){var t={focus:function(e,t){this.open(e)},click:function(e,t){this.open(e)}},i={"@fn":function(t){var n=this.queue[t],i={},a=n.$target.find('input[type="text"]').length;i={inputLength:a||1},a>1&&(i.btns={ok:{label:e.lang.ok,theme:e.theme}}),this.queue[t]=jQuery.extend(!0,i,n),i=null,a=null},date:function(t){var n=this.queue[t],i=n.content?n.content.width||270:270,a=n.content?n.content.margin||5:5,o={},s=n.$target.find('input[type="text"]').length;o={contentWidth:i*s+(s-1)*a,content:{width:i,margin:a},inputLength:s||1},s>1&&!n.btns&&(o.btns={ok:{label:e.lang.ok,theme:e.theme}}),this.queue[t]=jQuery.extend(!0,o,n),i=null,a=null,o=null,s=null},"secure-num":function(e){var t=this.queue[e],n={},i=t.$target.find('input[type="text"]').length;n={inputLength:i||1},this.queue[e]=jQuery.extend(!0,n,t),n=null,i=null}};return function(e){var a,o=this.queue[e];if(!o.content)return console.log(ax5.info.getError("ax5picker","501","bind")),this;if(n.isFunction(o.content))i["@fn"].call(this,e);else for(var s in i)if(o.content.type==s){i[s].call(this,e);break}return a="INPUT"==o.$target.get(0).tagName.toUpperCase()?o.$target:o.$target.find("input[type]"),a.unbind("focus.ax5picker").unbind("click.ax5picker").bind("focus.ax5picker",t.focus.bind(this,e)).bind("click.ax5picker",t.click.bind(this,e)),o.$target.find(".input-group-addon").unbind("click.ax5picker").bind("click.ax5picker",t.click.bind(this,e)),o.content.formatter&&ax5.ui.formatter&&a.ax5formatter(o.content.formatter),a=null,o=null,e=null,this}}(),s=function(e){return'\n                <div class="ax5-ui-picker {{theme}}" id="{{id}}" data-picker-els="root">\n                    {{#title}}\n                        <div class="ax-picker-heading">{{title}}</div>\n                    {{/title}}\n                    <div class="ax-picker-body">\n                        <div class="ax-picker-content" data-picker-els="content" style="width:{{contentWidth}}px;"></div>\n                        {{#btns}}\n                            <div class="ax-picker-buttons">\n                            {{#btns}}\n                                {{#@each}}\n                                <button data-picker-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                                {{/@each}}\n                            {{/btns}}\n                            </div>\n                        {{/btns}}\n                    </div>\n                    <div class="ax-picker-arrow"></div>\n                </div>\n                '},l=function(e){if(!this.activePicker)return this;var t=this.queue[this.activePickerQueueIndex],n={},i={};
e&&jQuery(document.body).append(this.activePicker),n=t.$target.offset(),i={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activePicker.addClass("direction-"+t.direction),this.activePicker.css(function(){return"top"==t.direction?{left:n.left+i.width/2-this.activePicker.outerWidth()/2,top:n.top+i.height+12}:"bottom"==t.direction?{left:n.left+i.width/2-this.activePicker.outerWidth()/2,top:n.top-this.activePicker.outerHeight()-12}:"left"==t.direction?{left:n.left+i.width+12,top:n.top-i.height/2}:"right"==t.direction?{left:n.left-this.activePicker.outerWidth()-12,top:n.top-i.height/2}:void 0}.call(this))},r=function(e,t){if(!this.activePicker)return this;var i=this.queue[this.activePickerQueueIndex];return t=n.findParentNode(e.target,function(e){return e.getAttribute("data-picker-els")?!0:i.$target.get(0)==e?!0:void 0}),t?this:(this.close(),this)},u=function(e,t){if(e.srcElement&&(e.target=e.srcElement),t=n.findParentNode(e.target,function(e){return e.getAttribute("data-picker-btn")?!0:void 0})){var i=this.queue[this.activePickerQueueIndex],a=t.getAttribute("data-picker-btn");if(i.btns&&i.btns[a].onClick){var o={key:a,value:i.btns[a],self:this,item:i};i.btns[a].onClick.call(o,a)}else this.close()}},c=function(e){e.keyCode==ax5.info.eventKeys.ESC&&this.close()},d=function(e){return n.isString(e)||(e=jQuery(e).data("data-axpicker-id")),n.isString(e)?n.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5picker","402","getQueIdx"))};this.init=function(){this.onStateChanged=e.onStateChanged},this.bind=function(t){var i,a={};return t=jQuery.extend(!0,a,e,t),t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("data-axpicker-id")),t.id||(t.id="ax5-picker-"+ax5.getGuid(),t.$target.data("data-axpicker-id",t.id)),i=n.search(this.queue,function(){return this.id==t.id}),-1===i?(this.queue.push(t),o.call(this,this.queue.length-1)):(this.queue[i]=jQuery.extend(!0,{},this.queue[i],t),o.call(this,i)),a=null,i=null,this):(console.log(ax5.info.getError("ax5picker","401","bind")),this)},this.setContentValue=function(e,t,o){var s,l=n.isNumber(e)?e:d.call(this,e),r=this.queue[l];return r&&(s="INPUT"==r.$target.get(0).tagName.toUpperCase()?r.$target:jQuery(r.$target.find("input[type]").get(t)),s.val(o),a.call(this,r,{self:i,state:"changeValue",item:r,value:o}),1==r.inputLength&&this.close()),r=null,e=null,t=null,o=null,this},this.open=function(){var t={"@fn":function(e,t){var n=this.queue[e];return n.content.call(n,function(e){t(e)}),!0},date:function(e){for(var t=this.queue[e],a=[],o=0;o<t.inputLength;o++)a.push('<div style="width:'+n.cssNumber(t.content.width)+';float:left;" class="ax-picker-content-box" data-calendar-target="'+o+'"></div>'),o<t.inputLength-1&&a.push('<div style="width:'+t.content.margin+'px;float:left;height: 5px;"></div>');a.push('<div style="clear:both;"></div>'),t.pickerContent.html(a.join(""));var s={displayDate:new Date,control:{left:'<i class="fa fa-chevron-left"></i>',yearTmpl:"%s",monthTmpl:"%s",right:'<i class="fa fa-chevron-right"></i>',yearFirst:!0}};t.pickerContent.find("[data-calendar-target]").each(function(){var e=this.getAttribute("data-calendar-target"),n=t.$target.find("input[type]").get(e).value,a=ax5.util.date(n);s.displayDate=a,n&&(s.selection=[a]),s=jQuery.extend(!0,s,t.content.config||{}),s.target=this,s.onClick=function(){i.setContentValue(t.id,e,this.date)},new ax5.ui.calendar(s)})},"secure-num":function(e){for(var t=this.queue[e],o=[],s=0;s<t.inputLength;s++)o.push('<div style="width:'+n.cssNumber(t.content.width)+';float:left;" class="ax-picker-content-box" data-secure-num-target="'+s+'"></div>'),s<t.inputLength-1&&o.push('<div style="width:'+t.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),t.pickerContent.html(o.join("")),t.pickerContent.find("[data-secure-num-target]").each(function(){var e=this.getAttribute("data-secure-num-target"),n=[],o=function(e){var t,n,i;for(i=e.length;i;i-=1)t=Math.floor(Math.random()*i),n=e[i-1],e[i-1]=e[t],e[t]=n;return e}([0,1,2,3,4,5,6,7,8,9]),s=[{label:"&#x02190",fn:"back"},{label:"C",fn:"clear"}];o.forEach(function(e){n.push('<div style="float:left;'+t.content.config.btnWrapStyle+'">'),n.push('<button class="btn btn-default btn-'+t.content.config.btnTheme+'" style="'+t.content.config.btnStyle+'" data-secure-num-value="'+e+'">'+e+"</button>"),n.push("</div>")}),s.forEach(function(e){n.push('<div style="float:left;'+t.content.config.btnWrapStyle+'">'),n.push('<button class="btn btn-default btn-'+t.content.config.specialBtnTheme+'" style="'+t.content.config.btnStyle+'" data-secure-num-value="'+e.fn+'">'+e.label+"</button>"),n.push("</div>")}),n.push('<div style="clear:both;"></div>'),$(this).html(n.join("")).find("[data-secure-num-value]").click(function(){var n=this.getAttribute("data-secure-num-value"),o="INPUT"==t.$target.get(0).tagName.toUpperCase()?t.$target:jQuery(t.$target.find("input[type]").get(e)),s=o.val();"back"==n?o.val(s.substring(0,s.length-1)):"clear"==n?o.val(""):o.val(s+n),a.call(this,t,{self:i,state:"changeValue",item:t,value:o.val()})})})}};return function(i,o){var h=n.isNumber(i)?i:d.call(this,i),f=this.queue[h];if(this.openTimer&&clearTimeout(this.openTimer),this.activePicker)return this.activePickerQueueIndex==h?this:o>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(o||0)+1)}.bind(this),e.animateTime),this);if(this.activePicker=jQuery(ax5.mustache.render(s.call(this,f,h),f)),this.activePickerQueueIndex=h,f.pickerContent=this.activePicker.find('[data-picker-els="content"]'),n.isFunction(f.content))f.pickerContent.html("Loading.."),t["@fn"].call(this,h,function(e){f.pickerContent.html(e)});else for(var p in t)if(f.content.type==p){t[p].call(this,h);break}return this.activePicker.find("[data-picker-btn]").on(e.clickEventName,function(e){u.call(this,e||window.event,h)}.bind(this)),l.call(this,"append"),jQuery(window).bind("resize.ax5picker",function(){l.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5picker",function(e){e=e||window.event,c.call(this,e),n.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5picker",function(e){e=e||window.event,r.call(this,e),n.stopEvent(e)}.bind(this)),a.call(this,f,{self:this,state:"open",item:f}),this}}(),this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activePicker?(t=this.queue[this.activePickerQueueIndex],this.activePicker.addClass("destroy"),jQuery(window).unbind("resize.ax5picker"),jQuery(window).unbind("click.ax5picker"),jQuery(window).unbind("keyup.ax5picker"),this.closeTimer=setTimeout(function(){this.activePicker&&this.activePicker.remove(),this.activePicker=null,this.activePickerQueueIndex=-1,a.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this):this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.picker=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),ax5.ui.picker_instance=new ax5.ui.picker,jQuery.fn.ax5picker=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.setContentValue(this,arguments[1],arguments[2]);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend(!0,e,t),ax5.ui.picker_instance.bind(e)});return this}}(),function(e,t){var n=ax5.util,i=new Date,a=function(e,t){if("undefined"==typeof t&&(t=e.value.length),e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}else e.selectionStart&&(e.focus(),e.selectionStart=t,e.selectionEnd=t)},o=function(){var e,o=this;t&&t.call(this),this.queue=[],this.config={animateTime:250},this.openTimer=null,this.closeTimer=null,e=this.config;var s={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},l={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},r={money:function(e,t){var n={188:","};"int"==e.patternArgument||(n[190]="."),e.enterableKeyCodes=$.extend(n,s,l)},number:function(e,t){var n={190:"."};e.enterableKeyCodes=$.extend(n,s,l)},date:function(e,t){var n={189:"-",191:"/"};e.enterableKeyCodes=$.extend(n,s,l)},time:function(e,t){var n={186:":"};e.enterableKeyCodes=$.extend(n,s,l)},bizno:function(e,t){var n={189:"-"};e.enterableKeyCodes=$.extend(n,s,l)},phone:function(e,t){var n={189:"-",188:","};e.enterableKeyCodes=$.extend(n,s,l)},custom:function(e,t){e.getEnterableKeyCodes?e.enterableKeyCodes=e.getEnterableKeyCodes.call(e,{$input:e.$input}):e.enterableKeyCodes=null}},u={money:function(e,t,i,a,o){var s,a=a.replace(/[^0-9^\.^\-]/g,""),l=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),r=a.split(".");r[0]+=".";do r[0]=r[0].replace(l,"$1,$2");while(l.test(r[0]));return s=r.length>1?n.isNumber(e.maxRound)?r[0]+n.left(r[1],e.maxRound):r.join(""):r[0].split(".")[0]},number:function(e,t,i,a,o){a=a.replace(/[^0-9^\.^\-]/g,"");var s,l=a.split(".");return s=l.length>1?n.isNumber(e.maxRound)?l[0]+n.left(l[1],e.maxRound):l.join(""):l[0].split(".")[0]},date:function(e,t,a,o,s){if(o=o.replace(/\D/g,""),""==o)return o;var l=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})?.*$/;"time"==e.patternArgument&&(l=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})? ?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/);var r=o.match(l),u="",c=function(e,t,a,o){var s={Y:function(e){return"undefined"==typeof e&&(e=i.getFullYear()),(""==e||"0000"==e)&&(e=i.getFullYear()),e.length<4?n.setDigit(e,4):e},M:function(e){return"undefined"==typeof e&&(e=i.getMonth()+1),e>12?12:0==e?"01":n.setDigit(e,2)},D:function(e){"undefined"==typeof e&&(e=i.getDate()+1);var t=n.daysOfMonth(o[1],o[2]-1);return e>t?t:0==e?"01":n.setDigit(e,2)},h:function(e){return e||(e=0),e>23?23:n.setDigit(e,2)},m:function(e){return e||(e=0),e>59?59:n.setDigit(e,2)},s:function(e){return e||(e=0),e>59?59:n.setDigit(e,2)}};return a?s[t](e):e};return u=o.replace(l,function(t,n){var i=[c(arguments[1],"Y",s)];return(arguments[2]||s)&&i.push("-"+c(arguments[2],"M",s)),(arguments[3]||s)&&i.push("-"+c(arguments[3],"D",s,arguments)),"time"==e.patternArgument&&((arguments[4]||s)&&i.push(" "+c(arguments[4],"h",s)),(arguments[5]||s)&&i.push(":"+c(arguments[5],"m",s)),(arguments[6]||s)&&i.push(":"+c(arguments[6],"s",s))),i.join("")}),"blur"!=s||r?r||(u=u.length>4?n.left(u,4):u):u=function(){var t=[c(u,"Y",s)];return t.push("-"+c(0,"M",s)),t.push("-"+c(0,"D",s,arguments)),"time"==e.patternArgument&&(t.push(" "+c(0,"h",s)),t.push(":"+c(0,"m",s)),t.push(":"+c(0,"s",s))),t.join("")}(),u},time:function(e,t,i,a,o){a=a.replace(/\D/g,"");var s=/^([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/,l=a.match(s),r=a.replace(s,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(":"+arguments[2]),arguments[3]&&n.push(":"+arguments[3]),n.join("")});return l||(r=r.length>2?n.left(r,2):r),r},bizno:function(e,t,n,i,a){i=i.replace(/\D/g,"");var o=/^([0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,5})?.*$/,s=i.replace(o,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),n.join("-")});return s},phone:function(e,t,n,i,a){i=i.replace(/\D/g,"");var o=/^([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/,s=i.replace(o,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),arguments[4]&&n.push(arguments[4]),arguments[5]&&n.push(arguments[5]),n.join("-")});return s},custom:function(e,t,n,i,a){return e.getPatternValue?e.getPatternValue.call(e,{event:n,$input:e.$input,value:i}):void 0}},c={focus:function(e,t,n){e.$input.data("__originValue__")||e.$input.data("__originValue__",e.$input.val())},keydown:function(e,t,n){var i=!1;e.enterableKeyCodes&&(n.which&&e.enterableKeyCodes[n.which]||n.metaKey||n.ctrlKey||n.shiftKey||(i=!0)),i&&ax5.util.stopEvent(n)},keyup:function(e,t,n){var i,o,s,l,r,c=e.$input.get(0);"selectionStart"in c?i=c.selectionStart:document.selection&&(l=document.selection.createRange(),r=document.selection.createRange().text.length,l.moveStart("character",-c.value.length),i=l.text.length-r),o=c.value,s=u[e.pattern]?u[e.pattern].call(this,e,t,n,c.value):o,s!=o&&(e.$input.val(s).trigger("change"),a(c,i+s.length-o.length))},blur:function(e,t,n){var i,a,o=e.$input.get(0);e.$input.removeData("__originValue__"),i=o.value,a=u[e.pattern]?u[e.pattern].call(this,e,t,n,o.value,"blur"):i,a!=i&&e.$input.val(a).trigger("change")}},d=function(e,t){if(!e.pattern&&("INPUT"==e.$target.get(0).tagName?e.pattern=e.$target.attr("data-ax5formatter"):e.pattern=e.$target.find('input[type="text"]').attr("data-ax5formatter"),!e.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(e.target),this;var n=/[^\(^\))]+/gi,i=e.pattern.match(n);e.pattern=i[0],e.patternArgument=i[1]||"";for(var a in r)if(e.pattern==a){r[a].call(this,e,t);break}return e.$input.unbind("focus.ax5formatter").bind("focus.ax5formatter",c.focus.bind(this,this.queue[t],t)),e.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",c.keydown.bind(this,this.queue[t],t)),e.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",c.keyup.bind(this,this.queue[t],t)),e.$input.unbind("blur.ax5formatter").bind("blur.ax5formatter",c.blur.bind(this,this.queue[t],t)),c.blur.call(this,this.queue[t],t),this};this.init=function(){},this.bind=function(t){var i,a={};if(jQuery.extend(!0,a,e),t&&jQuery.extend(!0,a,t),t=a,!t.target)return console.log(ax5.info.getError("ax5formatter","401","bind")),this;if(t.$target=jQuery(t.target),"INPUT"==t.$target.get(0).tagName)t.$input=t.$target;else if(t.$input=t.$target.find('input[type="text"]'),t.$input.length>1)return t.$input.each(function(){t.target=this,o.bind(t)}),this;return t.$input="INPUT"==t.$target.get(0).tagName?t.$target:t.$target.find('input[type="text"]'),t.id||(t.id=t.$input.data("ax5-formatter")),t.id||(t.id="ax5-formatter-"+ax5.getGuid(),t.$input.data("ax5-formatter",t.id)),i=n.search(this.queue,function(){return this.id==t.id}),-1===i?(this.queue.push(t),d.call(this,this.queue[this.queue.length-1],this.queue.length-1)):(this.queue[i]=t,d.call(this,this.queue[i],i)),this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.formatter=function(){return n.isFunction(t)&&(o.prototype=new t),o}()}(ax5.ui,ax5.ui.root),ax5.ui.formatter_instance=new ax5.ui.formatter,$.fn.ax5formatter=function(){return function(e){return"undefined"==typeof e&&(e={}),$.each(this,function(){var t={target:this};e=$.extend(!0,e,t),ax5.ui.formatter_instance.bind(e)}),this}}(),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.config={theme:"default",iconWidth:22,acceleratorWidth:100,menuBodyPadding:5,offset:{left:0,top:0},position:"fixed",animateTime:250,items:[],itemClickAndClose:!0},this.openTimer=null,this.closeTimer=null,this.queue=[],this.menuBar={},this.state=void 0,e=this.config;var a=function(e){e?(jQuery(document).unbind("click.ax5menu-"+this.menuId).bind("click.ax5menu-"+this.menuId,c.bind(this)),jQuery(window).unbind("keydown.ax5menu-"+this.menuId).bind("keydown.ax5menu-"+this.menuId,function(e){e.which==ax5.info.eventKeys.ESC&&i.close()}),jQuery(window).unbind("resize.ax5menu-"+this.menuId).bind("resize.ax5menu-"+this.menuId,function(e){i.close()})):(jQuery(document).unbind("click.ax5menu-"+this.menuId),jQuery(window).unbind("keydown.ax5menu-"+this.menuId),jQuery(window).unbind("resize.ax5menu-"+this.menuId))},o=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),i.state=t.state,e=null,t=null,!0},s=function(e){return this.onLoad&&this.onLoad.call(e,e),e=null,!0},l=function(){return'\n                <div class="ax5-ui-menu {{theme}}" {{#width}}style="width:{{width}}px;"{{/width}}>\n                    <div class="ax-menu-body">\n                        {{#items}}\n                            {{^@isMenu}}\n                                {{#divide}}\n                                <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                                {{/divide}}\n                                {{#html}}\n                                <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                                {{/html}}\n                            {{/@isMenu}}\n                            {{#@isMenu}}\n                            <div class="ax-menu-item" data-menu-item-depth="{{@depth}}" data-menu-item-index="{{@i}}" data-menu-item-path="{{@path}}.{{@i}}">\n                                <span class="ax-menu-item-cell ax-menu-item-checkbox">\n                                    {{#check}}\n                                    <span class="item-checkbox-wrap useCheckBox" {{#checked}}data-item-checked="true"{{/checked}}></span>\n                                    {{/check}}\n                                    {{^check}}\n                                    <span class="item-checkbox-wrap"></span>\n                                    {{/check}}\n                                </span>\n                                {{#icon}}\n                                <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                                {{/icon}}\n                                <span class="ax-menu-item-cell ax-menu-item-label">{{{label}}}</span>\n                                {{#accelerator}}\n                                <span class="ax-menu-item-cell ax-menu-item-accelerator" style="width:{{cfg.acceleratorWidth}}px;"><span class="item-wrap">{{.}}</span></span>\n                                {{/accelerator}}\n                                {{#@hasChild}}\n                                <span class="ax-menu-item-cell ax-menu-item-handle">{{{cfg.icons.arrow}}}</span>\n                                {{/@hasChild}}\n                            </div>\n                            {{/@isMenu}}\n    \n                        {{/items}}\n                    </div>\n                    <div class="ax-menu-arrow"></div>\n                </div>\n                '},r=function(){return'\n                <div class="ax5-ui-menubar {{theme}}">\n                    <div class="ax-menu-body">\n                        {{#items}}\n                            {{^@isMenu}}\n                                {{#divide}}\n                                <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                                {{/divide}}\n                                {{#html}}\n                                <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                                {{/html}}\n                            {{/@isMenu}}\n                            {{#@isMenu}}\n                            <div class="ax-menu-item" data-menu-item-index="{{@i}}">\n                                {{#icon}}\n                                <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                                {{/icon}}\n                                <span class="ax-menu-item-cell ax-menu-item-label">{{{label}}}</span>\n                            </div>\n                            {{/@isMenu}}\n                        {{/items}}\n                    </div>\n                </div>\n                '},u=function h(t,n,a,r){var u,c,f=t;return f.theme=t.theme||e.theme,f.cfg={icons:jQuery.extend({},e.icons),iconWidth:t.iconWidth||e.iconWidth,acceleratorWidth:t.acceleratorWidth||e.acceleratorWidth},n.forEach(function(n){n.html||n.divide?(n["@isMenu"]=!1,n.html&&(n["@html"]=n.html.call({item:n,config:e,opt:t}))):n["@isMenu"]=!0}),f.items=n,f["@depth"]=a,f["@path"]=r||"root",f["@hasChild"]=function(){return this.items&&this.items.length>0},u=jQuery(ax5.mustache.render(l(),f)),jQuery(document.body).append(u),c=this.queue.splice(a),c.forEach(function(e){e.$target.remove()}),this.queue.push({$target:u,data:jQuery.extend({},f)}),u.find("[data-menu-item-index]").bind("mouseover",function(){var n,a,o,s,l,r,u=this.getAttribute("data-menu-item-depth"),c=this.getAttribute("data-menu-item-index"),d=this.getAttribute("data-menu-item-path");null!=u&&"undefined"!=typeof u&&(l=i.queue[u].data.items[c].items,r=i.queue[u].$target,r.find("[data-menu-item-index]").removeClass("hover"),jQuery(this).addClass("hover"),r.attr("data-selected-menu-item-index")!=c&&(r.attr("data-selected-menu-item-index",c),l&&l.length>0?(n=$(this),a=n.offset(),o="fixed"==e.position?$(document).scrollTop():0,s={"@parent":{left:a.left,top:a.top,width:n.outerWidth(),height:n.outerHeight()},left:a.left+n.outerWidth()-e.menuBodyPadding,top:a.top-e.menuBodyPadding-1-o},s=jQuery.extend(!0,t,s),h.call(i,s,l,Number(u)+1,d)):i.queue.splice(Number(u)+1).forEach(function(e){e.$target.remove()}))),u=null,c=null,d=null,n=null,a=null,o=null,s=null,l=null,r=null}),0==a&&(f.direction&&u.addClass("direction-"+f.direction),o.call(this,null,{self:this,items:n,parent:function(e){if(!e)return!1;var t=null;try{t=Function("","return this.config.items["+e.substring(5).replace(/\./g,"].items[")+"];").call(i)}catch(n){}return t}(f["@path"]),state:"popup"})),d.call(this,u,f),s.call(this,{self:this,items:n,element:u.get(0)}),f=null,u=null,c=null,t=null,n=null,a=null,r=null,this},c=function(t,a,o){if(a=n.findParentNode(t.target,function(e){return e.getAttribute("data-menu-item-index")?!0:void 0})){if(o=function(e){if(!e)return!1;var t;try{t=Function("","return this.config.items["+e.substring(5).replace(/\./g,"].items[")+"];").call(i)}catch(n){console.log(ax5.info.getError("ax5menu","501","menuItemClick"))}try{return t}finally{t=null}}(a.getAttribute("data-menu-item-path")),!o)return this;o.check&&(function(e){var t={checkbox:function(e){this.checked=!e},radio:function(t){var n=this.name;e.forEach(function(e){e.check&&"radio"===e.check.type&&e.check.name==n&&(e.check.checked=!1)}),this.checked=!t}};t[this.type]&&t[this.type].call(this,this.checked),t=null}.call(o.check,e.items),e.itemClickAndClose||i.queue.forEach(function(e){e.$target.find("[data-menu-item-index]").each(function(){var t=e.data.items[this.getAttribute("data-menu-item-index")];t.check&&jQuery(this).find(".item-checkbox-wrap").attr("data-item-checked",t.check.checked)})})),i.onClick&&i.onClick.call(o,o),o.items&&0!=o.items.length||!e.itemClickAndClose||i.close()}else i.close();return a=null,o=null,this},d=function(t,n){var i=$(window),a=$(document),o="fixed"==e.position?i.height():a.height(),s=i.width(),l=t.outerHeight(),r=t.outerWidth(),u=n.left,c=n.top,d=e.position||"fixed";return u+r>s&&(u=n["@parent"]?n["@parent"].left-r+e.menuBodyPadding:s-r),c+l>o&&(c=o-l),t.css({left:u,top:c,position:d}),t=null,n=null,i=null,a=null,o=null,s=null,l=null,r=null,u=null,c=null,d=null,this};this.init=function(){i.menuId=ax5.getGuid(),this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,this.onLoad=e.onLoad,o.call(this,null,{self:this,state:"init"})},this.popup=function(){var t={event:function(t,n){t={left:t.clientX,top:"fixed"==e.position?t.clientY:t.pageY,width:e.width,theme:e.theme},e.offset&&(e.offset.left&&(t.left+=e.offset.left),e.offset.top&&(t.top+=e.offset.top)),n=jQuery.extend(!0,t,n);try{return n}finally{t=null}},object:function(t,n){t={left:t.left,top:t.top,width:t.width||e.width,theme:t.theme||e.theme},e.offset&&(e.offset.left&&(t.left+=e.offset.left),e.offset.top&&(t.top+=e.offset.top)),n=jQuery.extend(!0,t,n);try{return n}finally{t=null}}},n=function(t){t&&(e.theme=t)};return function(i,o){return i?(o=t["undefined"==typeof i.clientX?"object":"event"].call(this,i,o),n(o.theme),u.call(this,o,e.items,0),a.call(this,!0),i=null,this):this}}(),this.attach=function(){var t={object:function(t,n){t={left:t.left,top:t.top,width:t.width||e.width,theme:t.theme||e.theme,direction:t.direction||e.direction},n=jQuery.extend(!0,n,t);try{return n}finally{t=null,n=null}}},o=function(n,o){var s=$(n),l=s.offset(),r=s.outerHeight(),c=Number(n.getAttribute("data-menu-item-index")),d="fixed"==e.position?$(document).scrollTop():0;return i.menuBar.openedIndex==c?!1:(i.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),i.menuBar.opened=!0,i.menuBar.openedIndex=c,s.attr("data-menu-item-opened","true"),s.addClass("hover"),e.offset&&(e.offset.left&&(l.left+=e.offset.left),e.offset.top&&(l.top+=e.offset.top)),o=t.object.call(this,{left:l.left,top:l.top+r-d},o),e.items&&e.items[c].items&&e.items[c].items.length&&(u.call(i,o,e.items[c].items,0,"root."+n.getAttribute("data-menu-item-index")),a.call(i,!0)),n=null,o=null,s=null,l=null,r=null,c=null,void(d=null))};return function(t,a){var s,l={},u=e.items;return"undefined"==typeof a&&(a={}),l.theme=a.theme||e.theme,l.cfg={icons:jQuery.extend({},e.icons),iconWidth:a.iconWidth||e.iconWidth,acceleratorWidth:a.acceleratorWidth||e.acceleratorWidth},u.forEach(function(t){t.html||t.divide?(t["@isMenu"]=!1,t.html&&(t["@html"]=t.html.call({item:t,config:e,opt:a}))):t["@isMenu"]=!0}),l.items=u,s=jQuery(ax5.mustache.render(r(),l)),i.menuBar={target:jQuery(t),opened:!1},i.menuBar.target.html(s),i.menuBar.target.bind("click",function(e){if(!e)return this;var t=n.findParentNode(e.target,function(e){return e.getAttribute("data-menu-item-index")?!0:void 0});t&&o(t,a),t=null}),i.menuBar.target.bind("mouseover",function(e){if(!i.menuBar.opened)return!1;var t=n.findParentNode(e.target,function(e){return e.getAttribute("data-menu-item-index")?!0:void 0});t&&o(t,a),t=null}),t=null,a=null,l=null,u=null,s=null,this}}(),this.close=function(){return i.menuBar&&i.menuBar.target&&(i.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),i.menuBar.opened=!1,i.menuBar.openedIndex=null),a.call(this,!1),this.queue.forEach(function(e){e.$target.remove()}),this.queue=[],o.call(this,null,{self:this,state:"close"}),this},this.getCheckValue=function(){var t={},i=function(e){for(var a=e.length;a--;)e[a].check&&e[a].check.checked&&(t[e[a].check.name]?(n.isString(t[e[a].check.name])&&(t[e[a].check.name]=[t[e[a].check.name]]),t[e[a].check.name].push(e[a].check.value)):t[e[a].check.name]=e[a].check.value),e[a].items&&e[a].items.length>0&&i(e[a].items)};i(e.items);try{return t}finally{t=null,i=null}},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.menu=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.instanceId=ax5.getGuid(),this.queue=[],this.config={theme:"default",animateTime:250,lang:{noSelected:"",noOptions:"no options",loading:"now loading..",multipleLabel:'"{{label}}" {{length}}'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,e=this.config;var a={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},o=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),"changeValue"==t.state&&(e&&e.onChange?e.onChange.call(t,t):this.onChange&&this.onChange.call(t,t)),e=null,t=null,!0},s=function(e){return'\n                <div class="ax5-ui-select-option-group {{theme}} {{size}}" data-ax5-select-option-group="{{id}}">\n                    <div class="ax-select-body">\n                        <div class="ax-select-option-group-content" data-select-els="content"></div>\n                    </div>\n                    <div class="ax-select-arrow"></div> \n                </div>\n                '},l=function(){return'\n                <a {{^tabIndex}}href="#ax5select-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}class="form-control {{formSize}} ax5-ui-select-display {{theme}}" \n                data-ax5-select-display="{{id}}" data-ax5-select-instance="{{instanceId}}">\n                    <div class="ax5-ui-select-display-table" data-select-els="display-table">\n                        <div data-ax5-select-display="label">{{label}}</div>\n                        <div data-ax5-select-display="addon"> \n                            {{#multiple}}{{#reset}}\n                            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n                            {{/reset}}{{/multiple}}\n                            {{#icons}}\n                            <span class="addon-icon-closed">{{clesed}}</span>\n                            <span class="addon-icon-opened">{{opened}}</span>\n                            {{/icons}}\n                            {{^icons}}\n                            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                            {{/icons}}\n                        </div>\n                    </div>\n                    <input type="text" tabindex="-1" data-ax5-select-display="input" \n                    style="position:absolute;z-index:0;left:0px;top:0px;font-size:1px;opacity: 0;border: 0px none;color : transparent;text-indent: -9999em;" />\n                </a>\n                '},r=function(){return'\n                <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n                '},u=function(e){return'\n                {{#waitOptions}}\n                    <div class="ax-select-option-item">\n                            <div class="ax-select-option-item-holder">\n                                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                                    {{{lang.loading}}}\n                                </span>\n                            </div>\n                        </div>\n                {{/waitOptions}}\n                {{^waitOptions}}\n                    {{#options}}\n                        {{#optgroup}}\n                            <div class="ax-select-option-group">\n                                <div class="ax-select-option-item-holder">\n                                    <span class="ax-select-option-group-label">\n                                        {{{.}}}\n                                    </span>\n                                </div>\n                                {{#options}}\n                                <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                                data-option-value="{{'+e.optionValue+'}}" \n                                {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                                    <div class="ax-select-option-item-holder">\n                                        {{#multiple}}\n                                        <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                                            <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                        </span>\n                                        {{/multiple}}\n                                        <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+e.optionText+'}}</span>\n                                    </div>\n                                </div>\n                                {{/options}}\n                            </div>                            \n                        {{/optgroup}}\n                        {{^optgroup}}\n                        <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+e.optionValue+'}}" {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                            <div class="ax-select-option-item-holder">\n                                {{#multiple}}\n                                <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                                    <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                </span>\n                                {{/multiple}}\n                                <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+e.optionText+'}}</span>\n                            </div>\n                        </div>\n                        {{/optgroup}}\n                    {{/options}}\n                    {{^options}}\n                        <div class="ax-select-option-item">\n                            <div class="ax-select-option-item-holder">\n                                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                                    {{{lang.noOptions}}}\n                                </span>\n                            </div>\n                        </div>\n                    {{/options}}\n                {{/waitOptions}}\n                ';
},c=function(){for(var e,t=this.queue.length;t--;)this.queue[t].$display&&(e=Math.max(this.queue[t].$select.outerWidth(),n.number(this.queue[t].minWidth)),this.queue[t].$display.css({"min-width":e}),this.queue[t].reset&&this.queue[t].$display.find(".addon-icon-reset").css({"line-height":this.queue[t].$display.height()+"px"}));return t=null,e=null,this},d=function(e){if(!this.activeSelectOptionGroup)return this;var t=this.queue[this.activeSelectQueueIndex],n={},i={};e&&jQuery(document.body).append(this.activeSelectOptionGroup),n=t.$target.offset(),i={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activeSelectOptionGroup.addClass("direction-"+t.direction),this.activeSelectOptionGroup.css(function(){return"top"==t.direction?{left:n.left,top:n.top+i.height+1,width:i.width}:"bottom"==t.direction?{left:n.left,top:n.top-this.activeSelectOptionGroup.outerHeight()-1,width:i.width}:void 0}.call(this))},h=function(e,t){if(!this.activeSelectOptionGroup)return this;var i=this.queue[this.activeSelectQueueIndex],a="display";return(t=n.findParentNode(e.target,function(e){return e.getAttribute("data-option-value")?(a="optionItem",!0):i.$target.get(0)==e?(a="display",!0):void 0}))?("optionItem"===a&&(this.val(i.id,{index:{gindex:t.getAttribute("data-option-group-index"),index:t.getAttribute("data-option-index")}},void 0,"internal"),i.$display.focus(),i.multiple||this.close()),this):(this.close(),this)},f=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)this.close();else if(e.which==ax5.info.eventKeys.RETURN&&this.queue[this.activeSelectQueueIndex].optionFocusIndex>-1){var t=this.activeSelectOptionGroup.find('[data-option-focus-index="'+this.queue[this.activeSelectQueueIndex].optionFocusIndex+'"]');this.val(this.queue[this.activeSelectQueueIndex].id,{index:{gindex:t.attr("data-option-group-index"),index:t.attr("data-option-index")}},void 0,"internal"),this.queue[this.activeSelectQueueIndex].multiple||this.close()}},p=function(e){var t=this.queue[e],i=[];return n.isArray(t.selected)&&t.selected.length>0?t.selected.forEach(function(e){e.selected&&i.push(e[t.columnKeys.optionText])}):!t.multiple&&t.options&&t.options[0]?t.options[0].optgroup?i[0]=t.options[0].options[0][t.columnKeys.optionText]:i[0]=t.options[0][t.columnKeys.optionText]:i[0]=t.lang.noSelected,function(){if(t.multiple&&i.length>1){var e={label:i[0],length:i.length-1};return ax5.mustache.render(t.lang.multipleLabel,e)}return i[0]}()},m=function(e){this.queue[e].$display.find('[data-ax5-select-display="label"]').html(p.call(this,e))},g=function(e,t){for(var n,i=[],a=0,o=this.queue[e].indexedOptions.length;o-a++;){if(n=this.queue[e].indexedOptions[a],(""+n.value).toLowerCase()==t.toLowerCase()){i=[{"@findex":n["@findex"],optionsSort:0}];break}var s=(""+n.value).toLowerCase().search(t.toLowerCase());if(s>-1&&(i.push({"@findex":n["@findex"],optionsSort:s}),i.length>2))break;s=null}i.sort(function(e,t){return e.optionsSort-t.optionsSort}),i&&i.length>0&&v.call(this,e,void 0,i[0]["@findex"]);try{return i}finally{i=null,a=null,o=null,n=null}},v=function(e,t,n){var i,a,o,s;if(this.activeSelectOptionGroup&&this.queue[e].options&&this.queue[e].options.length>0){"undefined"!=typeof n?i=n:(a=-1==this.queue[e].optionFocusIndex?this.queue[e].optionSelectedIndex||-1:this.queue[e].optionFocusIndex,-1==a?i=t>0?0:this.queue[e].optionItemLength-1:(i=a+t,0>i?i=0:i>this.queue[e].optionItemLength-1&&(i=this.queue[e].optionItemLength-1))),this.queue[e].optionFocusIndex=i,this.activeSelectOptionGroup.find("[data-option-focus-index]").removeClass("hover"),o=this.activeSelectOptionGroup.find('[data-option-focus-index="'+i+'"]').addClass("hover"),s=this.activeSelectOptionGroup.find('[data-select-els="content"]');var l=o.outerHeight(),r=s.innerHeight(),u=s.scrollTop(),c=o.position().top+s.scrollTop();c+l>r+u?s.scrollTop(c+l-r):u>c&&s.scrollTop(c)}},y=function(){var e={click:function(e,t){var a=n.findParentNode(t.target,function(e){return e.getAttribute("data-selected-clear")?!0:void 0});a?this.val(e,{clear:!0}):i.activeSelectQueueIndex==e?-1==this.queue[e].optionFocusIndex&&i.close():i.open(e)},keyUp:function(t,n){n.which==ax5.info.eventKeys.SPACE?e.click.call(this,t,n):a[n.which]||(this.keyUpTimer&&clearTimeout(this.keyUpTimer),this.keyUpTimer=setTimeout(function(){var e=this.queue[t].$displayInput.val();g.call(this,t,e),this.queue[t].$displayInput.val("")}.bind(this),500))},keyDown:function(e,t){t.which==ax5.info.eventKeys.DOWN?(v.call(this,e,1),n.stopEvent(t)):t.which==ax5.info.eventKeys.UP&&(v.call(this,e,-1),n.stopEvent(t))},blur:function(e,t){},selectChange:function(e,t){this.val(e,this.queue[e].$select.val(),!0)}};return function(t){var n=this.queue[t],i={};return n.selected=[],n.$display?(n.$display.find('[data-ax5-select-display="label"]').html(p.call(this,t)),n.options=b.call(this,t,n.options),c.call(this)):(i.instanceId=this.instanceId,i.id=n.id,i.name=n.name,i.theme=n.theme,i.tabIndex=n.tabIndex,i.multiple=n.multiple,i.reset=n.reset,i.label=p.call(this,t),i.formSize=function(){return n.size?"input-"+n.size:""}(),n.$display=jQuery(ax5.mustache.render(l.call(this,t),i)),n.$target.find("select").get(0)?(n.$select=n.$target.find("select"),n.$select.attr("tabindex","-1").attr("class","form-control "+i.formSize),i.name&&n.$select.attr("name","name"),i.multiple&&n.$select.attr("multiple","multiple")):(n.$select=jQuery(ax5.mustache.render(r.call(this,t),i)),n.$target.append(n.$select)),n.$target.append(n.$display),n.$displayInput=n.$display.find('[data-ax5-select-display="input"]'),n.options=b.call(this,t,n.options),c.call(this),n.$displayInput.unbind("blur.ax5select").bind("blur.ax5select",e.blur.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",e.keyUp.bind(this,t)).unbind("keydown.ax5select").bind("keydown.ax5select",e.keyDown.bind(this,t))),n.$display.unbind("click.ax5select").bind("click.ax5select",e.click.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",e.keyUp.bind(this,t)),n.$select.unbind("change.ax5select").bind("change.ax5select",e.selectChange.bind(this,t)),i=null,n=null,t=null,this}}(),b=function(){var e=function(e,t){t?this.queue[e].multiple?this.queue[e].selected.push(jQuery.extend({},t)):this.queue[e].selected[0]=jQuery.extend({},t):this.queue[e].selected=[]};return function(t,a){var o,s,l,r=this.queue[t],u=0;return e.call(this,t,!1),a?(r.options=a,r.indexedOptions=[],o=[],r.options.forEach(function(n,a){n.optgroup?(n["@gindex"]=a,n.options.forEach(function(n,a){n["@index"]=a,n["@findex"]=u,o.push('<option value="'+n[r.columnKeys.optionValue]+'" '+(n[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+n[r.columnKeys.optionText]+"</option>"),n[r.columnKeys.optionSelected]&&e.call(i,t,n),r.indexedOptions.push({"@findex":u,value:n[r.columnKeys.optionValue],text:n[r.columnKeys.optionText]}),u++})):(n["@index"]=a,n["@findex"]=u,o.push('<option value="'+n[r.columnKeys.optionValue]+'" '+(n[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+n[r.columnKeys.optionText]+"</option>"),n[r.columnKeys.optionSelected]&&e.call(i,t,n),r.indexedOptions.push({"@findex":u,value:n[r.columnKeys.optionValue],text:n[r.columnKeys.optionText]}),u++)}),r.optionItemLength=u,r.$select.html(o.join(""))):(s=n.toArray(r.$select.get(0).options),l=[],s.forEach(function(n,a){var o={};o[r.columnKeys.optionValue]=n.value,o[r.columnKeys.optionText]=n.text,o[r.columnKeys.optionSelected]=n.selected,o["@index"]=a,n.selected&&e.call(i,t,o),l.push(o),o=null}),r.options=l,r.indexedOptions=l),!r.multiple&&0==r.selected.length&&r.options&&r.options[0]&&(r.options[0].optgroup?(r.options[0].options[0][r.columnKeys.optionSelected]=!0,r.selected.push(jQuery.extend({},r.options[0].options[0]))):(r.options[0][r.columnKeys.optionSelected]=!0,r.selected.push(jQuery.extend({},r.options[0])))),o=null,s=null,l=null,r.options}}(),x=function(e){return n.isString(e)||(e=jQuery(e).data("data-ax5select-id")),n.isString(e)?n.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5select","402","getQueIdx"))};this.init=function(){this.onStateChanged=e.onStateChanged,this.onChange=e.onChange,jQuery(window).bind("resize.ax5select-display-"+this.instanceId,function(){c.call(this)}.bind(this))},this.bind=function(t){var i,a={};return t=jQuery.extend(!0,a,e,t),t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("data-ax5select-id")),t.id||(t.id="ax5-select-"+ax5.getGuid(),t.$target.data("data-ax5select-id",t.id)),t.name=t.$target.attr("data-ax5select"),t.options&&(t.options=JSON.parse(JSON.stringify(t.options))),function(e){n.isObject(e)&&!e.error&&(t=jQuery.extend(!0,t,e))}(n.parseJson(t.$target.attr("data-ax5select-config"),!0)),i=n.search(this.queue,function(){return this.id==t.id}),-1===i?(this.queue.push(t),y.call(this,this.queue.length-1)):(this.queue[i]=jQuery.extend(!0,{},this.queue[i],t),y.call(this,i)),a=null,i=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var t=function(e){e.onExpand.call({self:this,item:e},function(e){if(this.waitOptionsCallback){var t={},i=this.queue[this.activeSelectQueueIndex];!function(e,t){var i={};t.options.forEach(function(t,n){t["@index"]=n,i[t[e.columnKeys.optionValue]]=t}),n.isArray(e.selected)&&e.selected.forEach(function(n){i[n[e.columnKeys.optionValue]]&&(t.options[i[n[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(i,e),i.$display.find('[data-ax5-select-display="label"]').html(p.call(this,this.activeSelectQueueIndex)),i.options=b.call(this,this.activeSelectQueueIndex,e.options),c.call(this),t.id=i.id,t.theme=i.theme,t.size="ax5-ui-select-option-group-"+i.size,t.multiple=i.multiple,t.lang=i.lang,t.options=i.options,this.activeSelectOptionGroup.find('[data-select-els="content"]').html(jQuery(ax5.mustache.render(u.call(this,i.columnKeys),t)))}}.bind(this))};return function(i,a){this.waitOptionsCallback=null;var l,r,c=n.isNumber(i)?i:x.call(this,i),p=this.queue[c],m={};return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==c?this:a>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(c,(a||0)+1)}.bind(this),e.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),m.id=p.id,m.theme=p.theme,m.size="ax5-ui-select-option-group-"+p.size,m.multiple=p.multiple,m.lang=p.lang,p.$display.attr("data-select-option-group-opened","true"),p.onExpand&&(m.waitOptions=!0),m.options=p.options,this.activeSelectOptionGroup=jQuery(ax5.mustache.render(s.call(this,p.columnKeys),m)),this.activeSelectOptionGroup.find('[data-select-els="content"]').html(jQuery(ax5.mustache.render(u.call(this,p.columnKeys),m))),this.activeSelectQueueIndex=c,d.call(this,"append"),jQuery(window).bind("resize.ax5select-"+this.instanceId,function(){d.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(r=this.activeSelectOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),r.get(0)&&(l=r.position().top-this.activeSelectOptionGroup.height()/3,this.activeSelectOptionGroup.find('[data-select-els="content"]').stop().animate({scrollTop:l},p.animateTime,"swing",function(){}))),p.$displayInput.val(""),setTimeout(function(){p.$displayInput.trigger("focus")},1),jQuery(window).bind("keyup.ax5select-"+this.instanceId,function(e){e=e||window.event,f.call(this,e),n.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5select-"+this.instanceId,function(e){e=e||window.event,h.call(this,e),n.stopEvent(e)}.bind(this)),o.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,t.call(this,p)),m=null,l=null,r=null,this))}}(),this.update=function(e){return this.bind(e),this},this.val=function(){var e=function(e,t,n){return"undefined"==typeof n?e.multiple?!t:!0:n},t=function(e){this.queue[e].options.forEach(function(e){e.optgroup?e.options.forEach(function(e){e.selected=!1}):e.selected=!1})},a={index:function(t,a,o){var s=this.queue[t];n.isString(a.index.gindex)?(s.options[a.index.gindex].options[a.index.index][s.columnKeys.optionSelected]=e(s,s.options[a.index.gindex].options[a.index.index][s.columnKeys.optionSelected],o),i.activeSelectOptionGroup.find('[data-option-group-index="'+a.index.gindex+'"][data-option-index="'+a.index.index+'"]').attr("data-option-selected",s.options[a.index.gindex].options[a.index.index][s.columnKeys.optionSelected].toString())):(s.options[a.index.index][s.columnKeys.optionSelected]=e(s,s.options[a.index.index][s.columnKeys.optionSelected],o),i.activeSelectOptionGroup.find('[data-option-index="'+a.index.index+'"]').attr("data-option-selected",s.options[a.index.index][s.columnKeys.optionSelected].toString())),b.call(this,t,s.options),m.call(this,t),d.call(this)},arr:function(e,t,o){t.forEach(function(t){if(n.isString(t)||n.isNumber(t))a.value.call(i,e,t,o);else for(var s in a)if(t[s]){a[s].call(i,e,t,o);break}})},value:function(t,i,a){var o=this.queue[t],s=n.search(o.options,function(){return this[o.columnKeys.optionValue]==i});return s>-1?(o.options[s][o.columnKeys.optionSelected]=e(o,o.options[s][o.columnKeys.optionSelected],a),b.call(this,t,o.options),void m.call(this,t)):void console.log(ax5.info.getError("ax5select","501","val"))},text:function(t,i,a){var o=this.queue[t],s=n.search(o.options,function(){return this[o.columnKeys.optionText]==i});return s>-1?(o.options[s][o.columnKeys.optionSelected]=e(o,o.options[s][o.columnKeys.optionSelected],a),b.call(this,t,o.options),void m.call(this,t)):void console.log(ax5.info.getError("ax5select","501","val"))},clear:function(e){t.call(this,e),b.call(this,e,this.queue[e].options),m.call(this,e),this.activeSelectOptionGroup&&this.activeSelectOptionGroup.find("[data-option-index]").attr("data-option-selected","false")}};return function(e,i,s,l){var r=n.isNumber(e)?e:x.call(this,e);if(-1===r)return void console.log(ax5.info.getError("ax5select","402","val"));if("undefined"==typeof i||this.queue[r].multiple||t.call(this,r),"undefined"==typeof i)return this.queue[r].selected;if(n.isArray(i))a.arr.call(this,r,i,s);else if(n.isString(i)||n.isNumber(i))a.value.call(this,r,i,s);else if(null===i)a.clear.call(this,r);else for(var u in a)if(i[u]){a[u].call(this,r,i,s);break}return"undefined"!=typeof i&&o.call(this,this.queue[r],{self:this,item:this.queue[r],state:l?"changeValue":"setValue",value:this.queue[r].selected,internal:l}),e=null,this}}(),this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(t=this.queue[this.activeSelectQueueIndex],t.optionFocusIndex=-1,t.$displayInput.val("").trigger("blur"),t.$display.removeAttr("data-select-option-group-opened").trigger("focus"),this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select-"+this.instanceId).unbind("click.ax5select-"+this.instanceId).unbind("keyup.ax5select-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,o.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(e){var t=x.call(this,e);return this.queue[t].$display.removeAttr("disabled"),this.queue[t].$select.removeAttr("disabled"),o.call(this,this.queue[t],{self:this,state:"enable"}),this},this.disable=function(e){var t=x.call(this,e);return this.queue[t].$display.attr("disabled","disabled"),this.queue[t].$select.attr("disabled","disabled"),o.call(this,this.queue[t],{self:this,state:"disable"}),this},this.main=function(){arguments&&n.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};e.select=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),ax5.ui.select_instance=new ax5.ui.select,jQuery.fn.ax5select=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.select_instance.val(this);case"enable":return ax5.ui.select_instance.enable(this);case"disable":return ax5.ui.select_instance.disable(this);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.select_instance.bind(e)});return this}}(),function(e,t){var n=ax5.util,i=function(){var e;t&&t.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",title:"",animateTime:250},this.activeselect=null,this.activeselectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,e=this.config;this.init=function(){this.onStateChanged=e.onStateChanged},this.bind=function(t){var i,a={};return jQuery.extend(!0,a,e),t&&jQuery.extend(!0,a,t),t=a,t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("ax5-select")),t.id||(t.id="ax5-select-"+ax5.getGuid(),t.$target.data("ax5-select",t.id)),i=n.search(this.queue,function(){return this.id==t.id}),-1===i?(this.queue.push(t),bindselectTarget.call(this,t,this.queue.length-1)):(this.queue[i]=t,bindselectTarget.call(this,this.queue[i],i)),a=null,i=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.select=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),ax5.ui.select_instance=new ax5.ui.select,$.fn.ax5select=function(){return function(e){return"undefined"==typeof e&&(e={}),$.each(this,function(){var t={target:this};e=$.extend(!0,e,t),ax5.ui.select_instance.bind(e)}),this}}(),function(e,t){var n=ax5.util,i=function(){var e,i=this;t&&t.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",animateTime:250,columnKeys:{src:"src",poster:"poster",html:"html"},loading:{icon:"",text:"Now Loading"},viewer:{prevHandle:!1,nextHandle:!1,ratio:16/9},media:{prevHandle:"<",nextHandle:">",width:36,height:36,list:[]}},this.openTimer=null,this.closeTimer=null,this.selectedIndex=0,e=this.config;var a=function(e){return'\n                <div data-ax5-ui-media-viewer="{{id}}" class="{{theme}}">\n                    <div data-media-viewer-els="viewer"></div>\n                    <div data-media-viewer-els="viewer-loading">\n                        <div class="ax5-ui-media-viewer-loading-holder">\n                            <div class="ax5-ui-media-viewer-loading-cell">\n                                {{{loading.icon}}}\n                                {{{loading.text}}}\n                            </div>\n                        </div>\n                    </div>\n                    {{#media}}\n                    <div data-media-viewer-els="media-list-holder">\n                        <div data-media-viewer-els="media-list-prev-handle">{{{prevHandle}}}</div>\n                        <div data-media-viewer-els="media-list">\n                            <div data-media-viewer-els="media-list-table">\n                            {{#list}}\n                                <div data-media-viewer-els="media-list-table-td">\n                                    {{#image}}\n                                    <div data-media-thumbnail="{{@i}}">\n                                        <img src="{{'+e.poster+'}}" data-media-thumbnail-image="{{@i}}" />\n                                    </div>\n                                    {{/image}}\n                                    {{#video}}\n                                    <div data-media-thumbnail="{{@i}}">{{#'+e.poster+'}}<img src="{{.}}" data-media-thumbnail-video="{{@i}}" />>{{/'+e.poster+"}}{{^"+e.poster+'}}<a data-media-thumbnail-video="{{@i}}">{{{media.'+e.poster+"}}}</a>{{/"+e.poster+'}}</div>\n                                    {{/video}}\n                                </div>\n                            {{/list}}\n                            </div>\n                        </div>\n                        <div data-media-viewer-els="media-list-next-handle">{{{nextHandle}}}</div>\n                    </div>\n                    {{/media}}\n                </div>\n                '},o=function(){var t=jQuery.extend(!0,{},e),n=a(e.columnKeys);t.id=this.id;try{return ax5.mustache.render(n,t)}finally{t=null,n=null}},s=function(t,a){var o,s="",l={thumbnail:function(e){this.select(e.getAttribute("data-media-thumbnail"))},prev:function(e){this.selectedIndex>0&&this.select(this.selectedIndex-1)},next:function(t){this.selectedIndex<e.media.list.length-1&&this.select(this.selectedIndex+1)},viewer:function(t){i.onClick&&i.onClick.call({media:e.media.list[this.selectedIndex]})}};if(a=n.findParentNode(t.target,function(e){return e.getAttribute("data-media-thumbnail")?(s="thumbnail",!0):"media-list-prev-handle"==e.getAttribute("data-media-viewer-els")?(s="prev",!0):"media-list-next-handle"==e.getAttribute("data-media-viewer-els")?(s="next",!0):"viewer"==e.getAttribute("data-media-viewer-els")?(s="viewer",!0):i.target.get(0)==e?!0:void 0})){for(var r in l)if(r==s){o=l[r].call(this,a);break}return this}return this},l=function(){if(e.media&&e.media.list&&e.media.list.length>0){for(var t=e.media.list.length,n=0;t--;)if(e.media.list[t].selected){n=t;break}0==n&&(e.media.list[0].selected=!0);try{return n}finally{t=null,n=null}}},r=function(){var e=this.$.list.find("[data-media-thumbnail="+this.selectedIndex+"]"),t=e.position(),n=e.width(),i=this.$.list.width(),a=this.$["list-table"].position().left,o=this.$["list-table"].width(),s=0;t.left+n+a>i?(s=i-(t.left+n),a!=s&&this.$["list-table"].css({left:a=s})):t.left+a<0&&(s=t.left,s>0&&(s=0),a!=s&&this.$["list-table"].css({left:a=s})),a!=s&&i>a+o&&(s=i-o,s>0&&(s=0),this.$["list-table"].css({left:s})),e=null,t=null,n=null,i=null,a=null,s=null};this.init=function(){this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,this.id="ax5-media-viewer-"+ax5.getGuid(),e.target&&e.media&&e.media.list&&e.media.list.length>0&&this.attach(e.target)},this.attach=function(e,t){return e||console.log(ax5.info.getError("ax5mediaViewer","401","setConfig")),"undefined"!=typeof t&&this.setConfig(t,!1),this.target=jQuery(e),this.target.html(o.call(this)),this.$={root:this.target.find("[data-ax5-ui-media-viewer]"),viewer:this.target.find('[data-media-viewer-els="viewer"]'),"viewer-loading":this.target.find('[data-media-viewer-els="viewer-loading"]'),"list-holder":this.target.find('[data-media-viewer-els="media-list-holder"]'),"list-prev-handle":this.target.find('[data-media-viewer-els="media-list-prev-handle"]'),list:this.target.find('[data-media-viewer-els="media-list"]'),"list-table":this.target.find('[data-media-viewer-els="media-list-table"]'),"list-next-handle":this.target.find('[data-media-viewer-els="media-list-next-handle"]')},this.align(),jQuery(window).unbind("resize.ax5media-viewer-"+this.id).bind("resize.ax5media-viewer-"+this.id,function(){this.align(),r.call(this)}.bind(this)),this.target.unbind("click").bind("click",function(e){e=e||window.event,s.call(this,e),n.stopEvent(e)}.bind(this)),this.select(l.call(this)),this},this.align=function(){if(this.$.viewer.css({height:this.$.viewer.width()/e.viewer.ratio}),"image"==this.$.viewer.data("media-type")){var t=this.$.viewer.find("img");t.css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()}),setTimeout(function(e){e.css({left:(this.$.viewer.width()-e.width())/2})}.bind(this,t),1)}else"video"==this.$.viewer.data("media-type")&&this.$.viewer.find("iframe").css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()});this.$["viewer-loading"].css({height:this.$.viewer.height()});var i="%"==n.right(e.media.width,1)?n.number(e.media.width)/100*this.$.viewer.width():n.number(e.media.width),a="%"==n.right(e.media.height,1)?n.number(e.media.height)/100*this.$.viewer.width():n.number(e.media.height);return i=Math.floor(i),a=Math.floor(a),this.$["list-prev-handle"].css({width:1.5*i}),this.$["list-next-handle"].css({width:1.5*i}),this.$.list.css({height:a}),this.$["list-table"].find("[data-media-thumbnail]").css({width:i,height:a}),this.$["list-table"].find("[data-media-thumbnail-video]").css({width:i,height:a}),this},this.select=function(){var t={image:function(t,n){i.$["viewer-loading"].show();var a=[this.$.viewer.width(),this.$.viewer.height()],o=new Image;return o.src=t.image[e.columnKeys.src],o.onload=function(){i.$["viewer-loading"].fadeOut();var e=a[1],t=e*o.width/o.height;n(o,Math.floor(t),e)},o},video:function(t,n){i.$["viewer-loading"].show();var a=[this.$.viewer.width(),this.$.viewer.height()],o=jQuery(t.video[e.columnKeys.html]);n(o,a[0],a[1]),i.$["viewer-loading"].fadeOut()}},n={image:function(e,t,n){e.width=t,e.height=n;var i=$(e);this.$.viewer.html(i),i.css({left:(this.$.viewer.width()-t)/2}),this.$.viewer.data("media-type","image"),this.$.viewer.data("img-ratio",t/n)},video:function(e,t,n){e.css({width:t,height:n}),this.$.viewer.html(e),this.$.viewer.data("media-type","video"),this.$.viewer.data("img-ratio",t/n)}},a=function(e){this.$.list.find("[data-media-thumbnail]").removeClass("selected"),this.$.list.find("[data-media-thumbnail="+e+"]").addClass("selected"),r.call(this)};return function(i){if("undefined"==typeof i)return this;this.selectedIndex=Number(i);var o=e.media.list[i];a.call(this,i);for(var s in t)if(o[s]){t[s].call(this,o,n[s].bind(this));break}return this}}(),this.setMediaList=function(t){return e.media.list=[].concat(t),this.attach(e.target),this},this.main=function(){arguments&&n.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};e.mediaViewer=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root),function(e,t){var n=ax5.util,i=function(){var e;t&&t.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",file_types:"*/*"},this.target=null,this.selectedFile=null,this.uploadedFile=null,e=this.config,this.init=function(){console.log(e.target),this.target=$(e.target),this.target.html(this.__get_layout()),this.els={container:this.target.find('[data-ui-els="container"]'),preview:this.target.find('[data-ui-els="preview"]'),"preview-img":this.target.find('[data-ui-els="preview-img"]'),"input-file":this.target.find('[data-ui-els="input-file"]'),progress:this.target.find('[data-ui-els="progress"]'),"progress-bar":this.target.find('[data-ui-els="progress-bar"]')},this.els.preview.bind("click",function(){this.__request_select_file()}.bind(this)),this.els["input-file"].bind("change",function(e){this.__on_select_file(e||window.event)}.bind(this)),function(){var e,t=this.els.container,n=this.els["preview-img"],i=this;console.log(t.get(0)),t.get(0).addEventListener("dragover",function(i){i.stopPropagation(),i.preventDefault(),n.hide(),e&&clearTimeout(e),t.addClass("dragover")},!1),t.get(0).addEventListener("dragleave",function(i){i.stopPropagation(),i.preventDefault(),e&&clearTimeout(e),e=setTimeout(function(){n.show()},100),t.removeClass("dragover")},!1),t.get(0).addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),t.removeClass("dragover"),i.__on_select_file(e||window.event)},!1)}.call(this),setTimeout(function(){this.__set_size_layout()}.bind(this),1)},this.__get_layout=function(){var t=[],n="",i=e.file_types;return t.push('<div class="ax5-ui-single-uploader '+e.theme+'" data-ui-els="container">'),t.push('<div class="upload-preview" data-ui-els="preview">'),t.push('<img class="upload-preview-img" data-ui-els="preview-img" src="" style="display:none;width:100%;height:100%;" />'),t.push('<span class="empty-msg">'+e.empty_msg+"<span>"),t.push("</div>"),t.push('<div class="ax5-ui-progress '+(e.progress_theme||"")+'" data-ui-els="progress" style="display: none;"><div class="progress-bar" data-ui-els="progress-bar"></div></div>'),t.push('<input type="file" '+n+' accept="'+i+'" capture="camera" data-ui-els="input-file" />'),t.push("</div>"),t.join("")},this.__set_size_layout=this.align=function(){var e=20,t=this.els.progress.height(),n=this.els.container.width(),i=this.els.container.height();0!=n&&0!=i&&this.els.progress.css({left:e,top:i/2-t/2,width:n-2*e})},this.__request_select_file=function(){return e.before_select_file&&!e.before_select_file.call()?!1:void(window.imagePicker?window.imagePicker.getPictures(function(e){for(var t=0;t<e.length;t++)console.log("Image URI: "+e[t]);_this.__on_select_file(e)},function(e){console.log("Error: "+e)}):this.els["input-file"].trigger("click"))},this.__on_select_file=function(t){var n,i=this.target.id,a=this.els["preview-img"].get(0);if(console.log(t),"dataTransfer"in t?n=t.dataTransfer.files[0]:"target"in t?n=t.target.files[0]:t&&(n=t[0]),!n)return!1;if(this.selected_file=n,function(e){function t(t,n,i){var a={},o=new Image;o.src=t.src,o.onload=function(){this.width>this.height?this.height>i?(a={width:this.width*(i/this.height),height:i},a.left=(n-a.width)/2):(a={width:this.width,height:this.height},a.top=(i-a.height)/2):this.width>n?(a={height:this.height*(n/this.width),width:n},a.top=(i-a.height)/2):(a={width:this.width,height:this.height},a.left=(n-a.width)/2),console.log(a),e.els["preview-img"].css(a)}}if(e.els["preview-img"].css({display:"block"}),window.imagePicker)a.src=n,t(a,e.els.container.width(),e.els.container.height());else{var o=new FileReader(i);o.onloadend=function(){try{a.src=o.result,t(a,e.els.container.width(),e.els.container.height())}catch(n){console.log(n)}},n&&o.readAsDataURL(n)}}(this),e.on_event){var o={action:"fileselect",file:n};e.on_event.call(o,o)}},this.upload=function(){var t=this;if(!this.selected_file){if(e.on_event){var i={action:"error",error:ax5.info.get_error("single-uploader","460","upload")};e.on_event.call(i,i)}return this}var a=new FormData,o=this.els["progress-bar"];this.els.progress.css({display:"block"}),o.css({width:"0%"}),window.imagePicker?a.append(e.upload_http.filename_param_key,this.selected_file):a.append(e.upload_http.filename_param_key,this.selected_file);for(var s in e.upload_http.data)a.append(s,e.upload_http.data[s]);this.xhr=new XMLHttpRequest,this.xhr.open(e.upload_http.method,e.upload_http.url,!0),this.xhr.onload=function(e){var i=e.target.response;try{"string"==typeof i&&(i=n.parseJson(i))}catch(e){return console.log(e),!1}return i.error?(console.log(i.error),!1):void t.upload_complete(i)},this.xhr.upload.onprogress=function(e){o.css({width:n.number(e.loaded/e.total*100,{round:2})+"%"}),e.lengthComputable&&e.loaded>=e.total&&setTimeout(function(){t.els.progress.css({display:"none"})},300)},this.xhr.send(a)},this.upload_complete=function(t){if(this.selected_file=null,this.uploaded_file=t,this.els.container.addClass("uploaded"),e.on_event){var n={action:"uploaded",file:t};e.on_event.call(n,n)}},this.set_uploaded_file=function(e){this.uploaded_file=e,this.uploaded_file?this.els.container.addClass("uploaded"):this.els.container.removeClass("uploaded")},this.set_preview_img=function(e){e?this.els["preview-img"].attr({src:e}):this.els["preview-img"].attr({src:null})},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};e.uploader=function(){return n.isFunction(t)&&(i.prototype=new t),i}()}(ax5.ui,ax5.ui.root);